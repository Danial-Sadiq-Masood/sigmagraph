(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const oo=JSON.parse('{"nodes":[{"_id":"VgveZ5IBZ11VXldXAcbT","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:44:15.676618+0000","name":"HALA DIGITAL OÜ","reg_code":"14276473","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-06-12","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-06-12"}}},{"_id":"6BLjZ5IBZ11VXldXrz1j","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:50:27.736623+0000","name":"AVIRAM IVS","reg_code":"39589362","cc":"DEN"}},{"_id":"6RLjZ5IBZ11VXldXrz1j","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444798+0000","name":"CASEMI HOLDING APS","reg_code":"31280087","cc":"DEN"}},{"_id":"6hLjZ5IBZ11VXldXrz1j","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:50:27.736626+0000","name":"PETRI POULSEN HOLDING APS","reg_code":"39185970","cc":"DEN"}},{"_id":"PhDiZ5IBZ11VXldXWhqO","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:51:55.331912+0000","name":"GORILLA CAPITAL FUND 2017 KY","reg_code":"2868194-4","cc":"FIN"}},{"_id":"6xLjZ5IBZ11VXldXrz1j","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:50:27.736629+0000","name":"BAZHENOV MYKYTA","last_name":"BAZHENOV","given_name":"MYKYTA","dob":"1987-04-10"}},{"_id":"7BLjZ5IBZ11VXldXrz1j","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:57:24.168468+0000","name":"RUDCHUK ANDRII","last_name":"RUDCHUK","given_name":"ANDRII","dob":"1987-04-29"}},{"_id":"rQ_iZ5IBZ11VXldXE72i","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:50:12.633398+0000","name":"WISE GUYS BATCH 9 OÜ","reg_code":"14264398","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-05-23","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-05-23"}}},{"_id":"7RLjZ5IBZ11VXldXrz1j","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444786+0000","name":"JAKOB SODE HOLDING APS","reg_code":"31061555","cc":"DNK"}},{"_id":"GgrcZ5IBZ11VXldX7bVY","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:43:04.857276+0000","name":"ALLIES OÜ","reg_code":"14630584","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2018-12-21","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2018-12-21"}}},{"_id":"_w3fZ5IBZ11VXldXSgV2","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:06:59.477631+0000","name":"MONTONIO FINANCE OÜ","reg_code":"14557628","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2018-09-03","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2018-09-03"}}},{"_id":"vA3fZ5IBZ11VXldXRgJx","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:45:38.778386+0000","name":"MODERAN SOLUTIONS OÜ","reg_code":"12958323","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2015-12-04","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2015-12-04"}}},{"_id":"vBfnZ5IBZ11VXldXc9R2","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T17:10:38.082683+0000","name":"AINSOO DAG","last_name":"AINSOO","given_name":"DAG","dob":"1977-05-27"}},{"_id":"VwrcZ5IBZ11VXldXvoYj","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:11:12.508319+0000","name":"10XVENTURES OÜ","reg_code":"12716235","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2014-09-08","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2014-09-08"}}},{"_id":"IRjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.374372+0000","name":"LILLE FIX HOLDING APS","reg_code":"34084785","cc":"DEN"}},{"_id":"Lw7hZ5IBZ11VXldXT_6C","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:10:18.724874+0000","name":"SYSTEM CAPITAL OÜ","reg_code":"12040542","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2011-01-12","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2011-01-12"}}},{"_id":"yBTlZ5IBZ11VXldXGDri","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:07:09.730755+0000","name":"UAB \\"MODUS MOBILITY\\"","reg_code":"302784358","cc":"LTU"}},{"_id":"HBjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.374408+0000","name":"SEYDLITZ GROUP APS","reg_code":"34727082","cc":"DEN"}},{"_id":"tg_iZ5IBZ11VXldXE72i","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444776+0000","name":"WISE GUYS INVESTMENT OÜ","reg_code":"12236417","cc":"LVA","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2012-02-16","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2012-02-16"}}},{"_id":"IhjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:55:34.374379+0000","name":"RIEKSTIŅŠ ANDRIS","last_name":"RIEKSTIŅŠ","given_name":"ANDRIS","dob":"1971-01-03"}},{"_id":"IxjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.374381+0000","name":"CAVE APS","reg_code":"38659391","cc":"DEN"}},{"_id":"xwvdZ5IBZ11VXldX3aHD","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:44:06.427882+0000","name":"FRACTORY SOLUTIONS OÜ","reg_code":"14300852","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-07-26","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-07-26"}}},{"_id":"SQ7hZ5IBZ11VXldXK9l4","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:47:42.905971+0000","name":"SMARTSUB INC OÜ","reg_code":"14335129","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-09-19","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-09-19"}}},{"_id":"Sg7hZ5IBZ11VXldXU_9-","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:47:53.152822+0000","name":"ZEEW OÜ","reg_code":"14978057","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2020-05-25","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2020-05-25"}}},{"_id":"wg_hZ5IBZ11VXldXr1mN","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:48:16.724289+0000","name":"TRAPMINE OÜ","reg_code":"14363739","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-11-01","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-11-01"}}},{"_id":"qg_iZ5IBZ11VXldXE72i","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:49:39.082038+0000","name":"WISE GUYS BATCH 10 OÜ","reg_code":"14376051","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-11-22","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-11-22"}}},{"_id":"JBjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.374382+0000","name":"GLASAU SIA","reg_code":"40103229909","cc":"LVA"}},{"_id":"tQ_iZ5IBZ11VXldXE72i","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:11:05.439201+0000","name":"WISE GUYS HOLDING OÜ","reg_code":"14081077","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2016-07-13","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2016-07-13"}}},{"_id":"Tw7hZ5IBZ11VXldXP-1-","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:10:38.083571+0000","name":"STEPPAZ KRUE OÜ","reg_code":"12255946","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2012-03-27","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2012-03-27"}}},{"_id":"ig7hZ5IBZ11VXldXF8Zn","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:09:38.211360+0000","name":"SIENA HOLDING OÜ","reg_code":"12658992","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2014-05-09","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2014-05-09"}}},{"_id":"8RHjZ5IBZ11VXldXVMqK","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444801+0000","name":"ADES HOLDING","reg_code":"30514505","cc":"DEN"}},{"_id":"ExjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.374411+0000","name":"BKHS SIA","reg_code":"40003511759","cc":"LVA"}},{"_id":"Uw_iZ5IBZ11VXldXD7md","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:10:57.249336+0000","name":"WERKDATA OÜ","reg_code":"11288843","cc":"DEN","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2006-10-17","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2006-10-17"}}},{"_id":"BxLjZ5IBZ11VXldXoyR-","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444803+0000","name":"PETER SANDBERG MANAGEMENT APS","reg_code":"29979200","cc":"DEN"}},{"_id":"ERjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.374412+0000","name":"EKJ INVESTMENTS LLC","reg_code":"46-2585055","cc":"USA"}},{"_id":"EBjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:55:34.374413+0000","name":"BECKER ANDREAS","last_name":"BECKER","given_name":"ANDREAS","dob":"1974-08-27"}},{"_id":"JRjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:55:34.374394+0000","name":"BIKUSOV ARTEM","last_name":"BIKUSOV","given_name":"ARTEM","dob":"1990-06-02"}},{"_id":"Mg7gZ5IBZ11VXldXx3c4","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T17:10:57.249335+0000","name":"RAND CONSULTING OÜ","reg_code":"12386312","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2012-11-30","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2012-11-30"}}},{"_id":"JhjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:55:34.374397+0000","name":"SAN JUAN OSCAR","last_name":"SAN JUAN","given_name":"OSCAR","dob":"1976-05-31"}},{"_id":"JxjoZ5IBZ11VXldXXa8w","_cc":"est","source":{"context":"person","processing_date":"2024-10-07T16:55:34.374399+0000","name":"SOLODKYY KOSTYANTYN","last_name":"SOLODKYY","given_name":"KOSTYANTYN","dob":"1984-03-22"}},{"_id":"1A7gZ5IBZ11VXldXbyEQ","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444804+0000","name":"OÜ VALGUSETOOJA","reg_code":"14303721","cc":"EST","status":{"context":"registered","context_original":"Registrisse kantud","date_from":"2017-08-01","date_until":null},"registration":{"context":"LLC","context_long":"Limited Liability Company","context_original":"Osaühing","date_from":"2017-08-01"}}},{"_id":"IRfnZ5IBZ11VXldXd9pr","_cc":"est","source":{"context":"company","processing_date":"2024-10-07T16:55:34.444785+0000","name":"KELAVINT ADVISORY FZE","reg_code":"22501","cc":"UAE"}}],"edges":[{"source":{"processing_date":"2024-10-07T16:50:27.736624+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"143.00","percent":"3.81","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736625+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"403.00","percent":"10.75","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736626+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"142.00","percent":"3.79","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736628+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"217.00","percent":"5.79","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736629+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"575.00","percent":"15.33","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736632+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"1925.00","percent":"51.33","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736635+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"244.00","percent":"6.51","currency":"EUR","date_from":"2023-09-02"}},{"source":{"processing_date":"2024-10-07T16:50:27.736636+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"101.00","percent":"2.69","currency":"EUR","date_from":"2023-11-07"}},{"source":{"processing_date":"2024-10-07T16:57:24.081969+0000","context":"beneficiery","sub_context_label":"Direct beneficiery","sub_context":"direct","sub_context_original":"otsene osalus","date_from":"2018-10-26"}},{"source":{"processing_date":"2024-10-07T16:55:34.374375+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"1111.00","percent":"5.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:49:00.462989+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"405.00","percent":"6.46","currency":"EUR","date_from":"2023-09-03"}},{"source":{"processing_date":"2024-10-07T16:51:55.247264+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"72.36","percent":"0.59","currency":"EUR","date_from":"2022-05-09"}},{"source":{"processing_date":"2024-10-07T16:51:54.237341+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"862.50","percent":"8.32","currency":"EUR","date_from":"2023-01-25"}},{"source":{"processing_date":"2024-10-07T17:02:56.268868+0000","context":"beneficiery","sub_context_label":"Governing beneficiery","sub_context":"governing","sub_context_original":"kõrgema juhtorgani liige. s.o juhatuse liige või nõukogu liige","date_from":"2018-10-20"}},{"source":{"processing_date":"2024-10-07T16:55:34.374371+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374373+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"1333.00","percent":"6.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374374+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"111.00","percent":"0.50","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374376+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374377+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"889.00","percent":"4.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374378+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"667.00","percent":"3.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374379+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"889.00","percent":"4.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374381+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"889.00","percent":"4.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:50:12.558657+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"976.00","percent":"1.27","currency":"EUR","date_from":"2022-07-22"}},{"source":{"processing_date":"2024-10-07T16:54:25.363427+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"244.00","percent":"8.89","currency":"EUR","date_from":"2023-09-01"}},{"source":{"processing_date":"2024-10-07T16:54:35.547402+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"244.00","percent":"7.53","currency":"EUR","date_from":"2023-09-01"}},{"source":{"processing_date":"2024-10-07T16:55:05.933215+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"297.15","percent":"10.00","currency":"EUR","date_from":"2024-01-08"}},{"source":{"processing_date":"2024-10-07T16:55:34.373724+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"562.00","percent":"2.40","currency":"EUR","date_from":"2023-11-06"}},{"source":{"processing_date":"2024-10-07T16:55:34.374384+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"444.00","percent":"2.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374382+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"2222.00","percent":"10.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374385+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"4443.00","percent":"20.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374386+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374387+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374388+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"889.00","percent":"4.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374388+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"1778.00","percent":"8.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374390+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"444.00","percent":"2.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374391+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"1778.00","percent":"8.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374392+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374393+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"1111.00","percent":"5.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374394+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"444.00","percent":"2.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374397+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374398+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"111.00","percent":"0.50","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374399+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"natural","size":"444.00","percent":"2.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374402+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"222.00","percent":"1.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T16:55:34.374403+0000","context":"ownership","sub_context_label":"Full Ownership","sub_context":"full","sub_context_original":"Ainuomand","entity":"juridical","size":"667.00","percent":"3.00","currency":"EUR","date_from":"2024-07-03"}},{"source":{"processing_date":"2024-10-07T17:11:05.331524+0000","context":"link","sub_context_label":"Founder","sub_context":"founder","sub_context_original":"Asutaja","date_from":"2017-05-22"}}],"connections":{"1":[[0,0]],"2":[[0,1],[7,9]],"3":[[0,2]],"4":[[0,3],[9,10],[10,11],[11,12]],"5":[[0,4]],"6":[[0,5],[0,8]],"7":[[0,6],[21,22],[22,23],[23,24],[24,25]],"8":[[0,7],[7,27],[25,26]],"12":[[7,13]],"13":[[7,14]],"14":[[7,15]],"15":[[7,16]],"16":[[7,17]],"17":[[7,18]],"18":[[7,19]],"19":[[7,20]],"20":[[7,21]],"26":[[7,28]],"27":[[7,29],[7,44]],"28":[[7,30]],"29":[[7,31]],"30":[[7,32]],"31":[[7,33]],"32":[[7,34]],"33":[[7,35]],"34":[[7,36]],"35":[[7,37]],"36":[[7,38]],"37":[[7,39]],"38":[[7,40]],"39":[[7,41]],"40":[[7,42]],"41":[[7,43]]}}'),We={graph:oo};function Ne(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ao(i){if(i.__esModule)return i;var r=i.default;if(typeof r=="function"){var t=function e(){return this instanceof e?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(e){var n=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:function(){return i[e]}})}),t}var ht={exports:{}},$r;function so(){if($r)return ht.exports;$r=1;var i=typeof Reflect=="object"?Reflect:null,r=i&&typeof i.apply=="function"?i.apply:function(p,R,g){return Function.prototype.apply.call(p,R,g)},t;i&&typeof i.ownKeys=="function"?t=i.ownKeys:Object.getOwnPropertySymbols?t=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:t=function(p){return Object.getOwnPropertyNames(p)};function e(m){console&&console.warn&&console.warn(m)}var n=Number.isNaN||function(p){return p!==p};function o(){o.init.call(this)}ht.exports=o,ht.exports.once=k,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(m){if(typeof m!="number"||m<0||n(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");a=m}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||n(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function u(m){return m._maxListeners===void 0?o.defaultMaxListeners:m._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(p){for(var R=[],g=1;g<arguments.length;g++)R.push(arguments[g]);var b=p==="error",y=this._events;if(y!==void 0)b=b&&y.error===void 0;else if(!b)return!1;if(b){var E;if(R.length>0&&(E=R[0]),E instanceof Error)throw E;var S=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw S.context=E,S}var L=y[p];if(L===void 0)return!1;if(typeof L=="function")r(L,this,R);else for(var v=L.length,I=_(L,v),g=0;g<v;++g)r(I[g],this,R);return!0};function c(m,p,R,g){var b,y,E;if(s(R),y=m._events,y===void 0?(y=m._events=Object.create(null),m._eventsCount=0):(y.newListener!==void 0&&(m.emit("newListener",p,R.listener?R.listener:R),y=m._events),E=y[p]),E===void 0)E=y[p]=R,++m._eventsCount;else if(typeof E=="function"?E=y[p]=g?[R,E]:[E,R]:g?E.unshift(R):E.push(R),b=u(m),b>0&&E.length>b&&!E.warned){E.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=m,S.type=p,S.count=E.length,e(S)}return m}o.prototype.addListener=function(p,R){return c(this,p,R,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(p,R){return c(this,p,R,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(m,p,R){var g={fired:!1,wrapFn:void 0,target:m,type:p,listener:R},b=d.bind(g);return b.listener=R,g.wrapFn=b,b}o.prototype.once=function(p,R){return s(R),this.on(p,l(this,p,R)),this},o.prototype.prependOnceListener=function(p,R){return s(R),this.prependListener(p,l(this,p,R)),this},o.prototype.removeListener=function(p,R){var g,b,y,E,S;if(s(R),b=this._events,b===void 0)return this;if(g=b[p],g===void 0)return this;if(g===R||g.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete b[p],b.removeListener&&this.emit("removeListener",p,g.listener||R));else if(typeof g!="function"){for(y=-1,E=g.length-1;E>=0;E--)if(g[E]===R||g[E].listener===R){S=g[E].listener,y=E;break}if(y<0)return this;y===0?g.shift():x(g,y),g.length===1&&(b[p]=g[0]),b.removeListener!==void 0&&this.emit("removeListener",p,S||R)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(p){var R,g,b;if(g=this._events,g===void 0)return this;if(g.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):g[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete g[p]),this;if(arguments.length===0){var y=Object.keys(g),E;for(b=0;b<y.length;++b)E=y[b],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=g[p],typeof R=="function")this.removeListener(p,R);else if(R!==void 0)for(b=R.length-1;b>=0;b--)this.removeListener(p,R[b]);return this};function h(m,p,R){var g=m._events;if(g===void 0)return[];var b=g[p];return b===void 0?[]:typeof b=="function"?R?[b.listener||b]:[b]:R?C(b):_(b,b.length)}o.prototype.listeners=function(p){return h(this,p,!0)},o.prototype.rawListeners=function(p){return h(this,p,!1)},o.listenerCount=function(m,p){return typeof m.listenerCount=="function"?m.listenerCount(p):f.call(m,p)},o.prototype.listenerCount=f;function f(m){var p=this._events;if(p!==void 0){var R=p[m];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function _(m,p){for(var R=new Array(p),g=0;g<p;++g)R[g]=m[g];return R}function x(m,p){for(;p+1<m.length;p++)m[p]=m[p+1];m.pop()}function C(m){for(var p=new Array(m.length),R=0;R<p.length;++R)p[R]=m[R].listener||m[R];return p}function k(m,p){return new Promise(function(R,g){function b(E){m.removeListener(p,y),g(E)}function y(){typeof m.removeListener=="function"&&m.removeListener("error",b),R([].slice.call(arguments))}A(m,p,y,{once:!0}),p!=="error"&&w(m,b,{once:!0})})}function w(m,p,R){typeof m.on=="function"&&A(m,"error",p,R)}function A(m,p,R,g){if(typeof m.on=="function")g.once?m.once(p,R):m.on(p,R);else if(typeof m.addEventListener=="function")m.addEventListener(p,function b(y){g.once&&m.removeEventListener(p,b),R(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return ht.exports}var di=so(),$t,Mr;function Gt(){if(Mr)return $t;Mr=1;function i(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}return typeof Symbol<"u"&&(i.prototype[Symbol.iterator]=function(){return this}),i.of=function(){var r=arguments,t=r.length,e=0;return new i(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})},i.empty=function(){var r=new i(function(){return{done:!0}});return r},i.fromSequence=function(r){var t=0,e=r.length;return new i(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})},i.is=function(r){return r instanceof i?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"},$t=i,$t}var uo=Gt();const me=Ne(uo);var ft={},Br;function li(){return Br||(Br=1,ft.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",ft.SYMBOL_SUPPORT=typeof Symbol<"u"),ft}var Mt,jr;function hi(){if(jr)return Mt;jr=1;var i=Gt(),r=li(),t=r.ARRAY_BUFFER_SUPPORT,e=r.SYMBOL_SUPPORT;function n(o){return typeof o=="string"||Array.isArray(o)||t&&ArrayBuffer.isView(o)?i.fromSequence(o):typeof o!="object"||o===null?null:e&&typeof o[Symbol.iterator]=="function"?o[Symbol.iterator]():typeof o.next=="function"?o:null}return Mt=function(a){var s=n(a);if(!s)throw new Error("obliterator: target is not iterable nor a valid iterator.");return s},Mt}var Bt,Wr;function co(){if(Wr)return Bt;Wr=1;var i=hi();return Bt=function(t,e){for(var n=arguments.length>1?e:1/0,o=n!==1/0?new Array(n):[],a,s=0,u=i(t);;){if(s===n)return o;if(a=u.next(),a.done)return s!==e&&(o.length=s),o;o[s++]=a.value}},Bt}var lo=co();const fi=Ne(lo);var jt,Hr;function ho(){if(Hr)return jt;Hr=1;var i=Gt(),r=hi();return jt=function(){var e=arguments,n=null,o=-1;return new i(function(){var s=null;do{if(n===null){if(o++,o>=e.length)return{done:!0};n=r(e[o])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})},jt}var fo=ho();const Ce=Ne(fo);function go(){const i=arguments[0];for(let r=1,t=arguments.length;r<t;r++)if(arguments[r])for(const e in arguments[r])i[e]=arguments[r][e];return i}let te=go;typeof Object.assign=="function"&&(te=Object.assign);function ve(i,r,t,e){const n=i._nodes.get(r);let o=null;return n&&(e==="mixed"?o=n.out&&n.out[t]||n.undirected&&n.undirected[t]:e==="directed"?o=n.out&&n.out[t]:o=n.undirected&&n.undirected[t]),o}function ie(i){return typeof i=="object"&&i!==null}function gi(i){let r;for(r in i)return!1;return!0}function pe(i,r,t){Object.defineProperty(i,r,{enumerable:!1,configurable:!1,writable:!0,value:t})}function _e(i,r,t){const e={enumerable:!0,configurable:!0};typeof t=="function"?e.get=t:(e.value=t,e.writable=!1),Object.defineProperty(i,r,e)}function Vr(i){return!(!ie(i)||i.attributes&&!Array.isArray(i.attributes))}function po(){let i=Math.floor(Math.random()*256)&255;return()=>i++}class Gr extends Error{constructor(r){super(),this.name="GraphError",this.message=r}}class z extends Gr{constructor(r){super(r),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,z.prototype.constructor)}}class F extends Gr{constructor(r){super(r),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,F.prototype.constructor)}}class H extends Gr{constructor(r){super(r),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,H.prototype.constructor)}}function pi(i,r){this.key=i,this.attributes=r,this.clear()}pi.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function vi(i,r){this.key=i,this.attributes=r,this.clear()}vi.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function mi(i,r){this.key=i,this.attributes=r,this.clear()}mi.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Xe(i,r,t,e,n){this.key=r,this.attributes=n,this.undirected=i,this.source=t,this.target=e}Xe.prototype.attach=function(){let i="out",r="in";this.undirected&&(i=r="undirected");const t=this.source.key,e=this.target.key;this.source[i][e]=this,!(this.undirected&&t===e)&&(this.target[r][t]=this)};Xe.prototype.attachMulti=function(){let i="out",r="in";const t=this.source.key,e=this.target.key;this.undirected&&(i=r="undirected");const n=this.source[i],o=n[e];if(typeof o>"u"){n[e]=this,this.undirected&&t===e||(this.target[r][t]=this);return}o.previous=this,this.next=o,n[e]=this,this.target[r][t]=this};Xe.prototype.detach=function(){const i=this.source.key,r=this.target.key;let t="out",e="in";this.undirected&&(t=e="undirected"),delete this.source[t][r],delete this.target[e][i]};Xe.prototype.detachMulti=function(){const i=this.source.key,r=this.target.key;let t="out",e="in";this.undirected&&(t=e="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][r],delete this.target[e][i]):(this.next.previous=void 0,this.source[t][r]=this.next,this.target[e][i]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const yi=0,bi=1,vo=2,_i=3;function Le(i,r,t,e,n,o,a){let s,u,c,d;if(e=""+e,t===yi){if(s=i._nodes.get(e),!s)throw new F(`Graph.${r}: could not find the "${e}" node in the graph.`);c=n,d=o}else if(t===_i){if(n=""+n,u=i._edges.get(n),!u)throw new F(`Graph.${r}: could not find the "${n}" edge in the graph.`);const l=u.source.key,h=u.target.key;if(e===l)s=u.target;else if(e===h)s=u.source;else throw new F(`Graph.${r}: the "${e}" node is not attached to the "${n}" edge (${l}, ${h}).`);c=o,d=a}else{if(u=i._edges.get(e),!u)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`);t===bi?s=u.source:s=u.target,c=n,d=o}return[s,c,d]}function mo(i,r,t){i.prototype[r]=function(e,n,o){const[a,s]=Le(this,r,t,e,n,o);return a.attributes[s]}}function yo(i,r,t){i.prototype[r]=function(e,n){const[o]=Le(this,r,t,e,n);return o.attributes}}function bo(i,r,t){i.prototype[r]=function(e,n,o){const[a,s]=Le(this,r,t,e,n,o);return a.attributes.hasOwnProperty(s)}}function _o(i,r,t){i.prototype[r]=function(e,n,o,a){const[s,u,c]=Le(this,r,t,e,n,o,a);return s.attributes[u]=c,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function wo(i,r,t){i.prototype[r]=function(e,n,o,a){const[s,u,c]=Le(this,r,t,e,n,o,a);if(typeof c!="function")throw new z(`Graph.${r}: updater should be a function.`);const d=s.attributes,l=c(d[u]);return d[u]=l,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function Eo(i,r,t){i.prototype[r]=function(e,n,o){const[a,s]=Le(this,r,t,e,n,o);return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}function xo(i,r,t){i.prototype[r]=function(e,n,o){const[a,s]=Le(this,r,t,e,n,o);if(!ie(s))throw new z(`Graph.${r}: provided attributes are not a plain object.`);return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function To(i,r,t){i.prototype[r]=function(e,n,o){const[a,s]=Le(this,r,t,e,n,o);if(!ie(s))throw new z(`Graph.${r}: provided attributes are not a plain object.`);return te(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}function Ao(i,r,t){i.prototype[r]=function(e,n,o){const[a,s]=Le(this,r,t,e,n,o);if(typeof s!="function")throw new z(`Graph.${r}: provided updater is not a function.`);return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Ro=[{name:i=>`get${i}Attribute`,attacher:mo},{name:i=>`get${i}Attributes`,attacher:yo},{name:i=>`has${i}Attribute`,attacher:bo},{name:i=>`set${i}Attribute`,attacher:_o},{name:i=>`update${i}Attribute`,attacher:wo},{name:i=>`remove${i}Attribute`,attacher:Eo},{name:i=>`replace${i}Attributes`,attacher:xo},{name:i=>`merge${i}Attributes`,attacher:To},{name:i=>`update${i}Attributes`,attacher:Ao}];function So(i){Ro.forEach(function({name:r,attacher:t}){t(i,r("Node"),yi),t(i,r("Source"),bi),t(i,r("Target"),vo),t(i,r("Opposite"),_i)})}function Co(i,r,t){i.prototype[r]=function(e,n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+n;if(n=arguments[2],o=ve(this,a,s,t),!o)throw new F(`Graph.${r}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}return o.attributes[n]}}function Lo(i,r,t){i.prototype[r]=function(e){let n;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+e,a=""+arguments[1];if(n=ve(this,o,a,t),!n)throw new F(`Graph.${r}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,n=this._edges.get(e),!n)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}return n.attributes}}function Do(i,r,t){i.prototype[r]=function(e,n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+n;if(n=arguments[2],o=ve(this,a,s,t),!o)throw new F(`Graph.${r}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}return o.attributes.hasOwnProperty(n)}}function ko(i,r,t){i.prototype[r]=function(e,n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,u=""+n;if(n=arguments[2],o=arguments[3],a=ve(this,s,u,t),!a)throw new F(`Graph.${r}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}return a.attributes[n]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function Go(i,r,t){i.prototype[r]=function(e,n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+e,u=""+n;if(n=arguments[2],o=arguments[3],a=ve(this,s,u,t),!a)throw new F(`Graph.${r}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,a=this._edges.get(e),!a)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}if(typeof o!="function")throw new z(`Graph.${r}: updater should be a function.`);return a.attributes[n]=o(a.attributes[n]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function No(i,r,t){i.prototype[r]=function(e,n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+n;if(n=arguments[2],o=ve(this,a,s,t),!o)throw new F(`Graph.${r}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}return delete o.attributes[n],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:n}),this}}function Oo(i,r,t){i.prototype[r]=function(e,n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+n;if(n=arguments[2],o=ve(this,a,s,t),!o)throw new F(`Graph.${r}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}if(!ie(n))throw new z(`Graph.${r}: provided attributes are not a plain object.`);return o.attributes=n,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Fo(i,r,t){i.prototype[r]=function(e,n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+n;if(n=arguments[2],o=ve(this,a,s,t),!o)throw new F(`Graph.${r}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}if(!ie(n))throw new z(`Graph.${r}: provided attributes are not a plain object.`);return te(o.attributes,n),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:n}),this}}function Io(i,r,t){i.prototype[r]=function(e,n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new H(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new H(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+e,s=""+n;if(n=arguments[2],o=ve(this,a,s,t),!o)throw new F(`Graph.${r}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new H(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(e=""+e,o=this._edges.get(e),!o)throw new F(`Graph.${r}: could not find the "${e}" edge in the graph.`)}if(typeof n!="function")throw new z(`Graph.${r}: provided updater is not a function.`);return o.attributes=n(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Po=[{name:i=>`get${i}Attribute`,attacher:Co},{name:i=>`get${i}Attributes`,attacher:Lo},{name:i=>`has${i}Attribute`,attacher:Do},{name:i=>`set${i}Attribute`,attacher:ko},{name:i=>`update${i}Attribute`,attacher:Go},{name:i=>`remove${i}Attribute`,attacher:No},{name:i=>`replace${i}Attributes`,attacher:Oo},{name:i=>`merge${i}Attributes`,attacher:Fo},{name:i=>`update${i}Attributes`,attacher:Io}];function zo(i){Po.forEach(function({name:r,attacher:t}){t(i,r("Edge"),"mixed"),t(i,r("DirectedEdge"),"directed"),t(i,r("UndirectedEdge"),"undirected")})}const Uo=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function $o(i,r,t,e){let n=!1;for(const o in r){if(o===e)continue;const a=r[o];if(n=t(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),i&&n)return a.key}}function Mo(i,r,t,e){let n,o,a,s=!1;for(const u in r)if(u!==e){n=r[u];do{if(o=n.source,a=n.target,s=t(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected),i&&s)return n.key;n=n.next}while(n!==void 0)}}function Wt(i,r){const t=Object.keys(i),e=t.length;let n,o=0;return new me(function(){do if(n)n=n.next;else{if(o>=e)return{done:!0};const s=t[o++];if(s===r){n=void 0;continue}n=i[s]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}})}function Bo(i,r,t,e){const n=r[t];if(!n)return;const o=n.source,a=n.target;if(e(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected)&&i)return n.key}function jo(i,r,t,e){let n=r[t];if(!n)return;let o=!1;do{if(o=e(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),i&&o)return n.key;n=n.next}while(n!==void 0)}function Ht(i,r){let t=i[r];return t.next!==void 0?new me(function(){if(!t)return{done:!0};const e={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:e}}):me.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function Wo(i,r){if(i.size===0)return[];if(r==="mixed"||r===i.type)return typeof Array.from=="function"?Array.from(i._edges.keys()):fi(i._edges.keys(),i._edges.size);const t=r==="undirected"?i.undirectedSize:i.directedSize,e=new Array(t),n=r==="undirected",o=i._edges.values();let a=0,s,u;for(;s=o.next(),s.done!==!0;)u=s.value,u.undirected===n&&(e[a++]=u.key);return e}function wi(i,r,t,e){if(r.size===0)return;const n=t!=="mixed"&&t!==r.type,o=t==="undirected";let a,s,u=!1;const c=r._edges.values();for(;a=c.next(),a.done!==!0;){if(s=a.value,n&&s.undirected!==o)continue;const{key:d,attributes:l,source:h,target:f}=s;if(u=e(d,l,h.key,f.key,h.attributes,f.attributes,s.undirected),i&&u)return d}}function Ho(i,r){if(i.size===0)return me.empty();const t=r!=="mixed"&&r!==i.type,e=r==="undirected",n=i._edges.values();return new me(function(){let a,s;for(;;){if(a=n.next(),a.done)return a;if(s=a.value,!(t&&s.undirected!==e))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function Nr(i,r,t,e,n,o){const a=r?Mo:$o;let s;if(t!=="undirected"&&(e!=="out"&&(s=a(i,n.in,o),i&&s)||e!=="in"&&(s=a(i,n.out,o,e?void 0:n.key),i&&s))||t!=="directed"&&(s=a(i,n.undirected,o),i&&s))return s}function Vo(i,r,t,e){const n=[];return Nr(!1,i,r,t,e,function(o){n.push(o)}),n}function Xo(i,r,t){let e=me.empty();return i!=="undirected"&&(r!=="out"&&typeof t.in<"u"&&(e=Ce(e,Wt(t.in))),r!=="in"&&typeof t.out<"u"&&(e=Ce(e,Wt(t.out,r?void 0:t.key)))),i!=="directed"&&typeof t.undirected<"u"&&(e=Ce(e,Wt(t.undirected))),e}function Or(i,r,t,e,n,o,a){const s=t?jo:Bo;let u;if(r!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&(u=s(i,n.in,o,a),i&&u)||typeof n.out<"u"&&e!=="in"&&(e||n.key!==o)&&(u=s(i,n.out,o,a),i&&u))||r!=="directed"&&typeof n.undirected<"u"&&(u=s(i,n.undirected,o,a),i&&u))return u}function qo(i,r,t,e,n){const o=[];return Or(!1,i,r,t,e,n,function(a){o.push(a)}),o}function Zo(i,r,t,e){let n=me.empty();return i!=="undirected"&&(typeof t.in<"u"&&r!=="out"&&e in t.in&&(n=Ce(n,Ht(t.in,e))),typeof t.out<"u"&&r!=="in"&&e in t.out&&(r||t.key!==e)&&(n=Ce(n,Ht(t.out,e)))),i!=="directed"&&typeof t.undirected<"u"&&e in t.undirected&&(n=Ce(n,Ht(t.undirected,e))),n}function Yo(i,r){const{name:t,type:e,direction:n}=r;i.prototype[t]=function(o,a){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return[];if(!arguments.length)return Wo(this,e);if(arguments.length===1){o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new F(`Graph.${t}: could not find the "${o}" node in the graph.`);return Vo(this.multi,e==="mixed"?this.type:e,n,s)}if(arguments.length===2){o=""+o,a=""+a;const s=this._nodes.get(o);if(!s)throw new F(`Graph.${t}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new F(`Graph.${t}:  could not find the "${a}" target node in the graph.`);return qo(e,this.multi,n,s,a)}throw new z(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Ko(i,r){const{name:t,type:e,direction:n}=r,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[o]=function(c,d,l){if(!(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)){if(arguments.length===1)return l=c,wi(!1,this,e,l);if(arguments.length===2){c=""+c,l=d;const h=this._nodes.get(c);if(typeof h>"u")throw new F(`Graph.${o}: could not find the "${c}" node in the graph.`);return Nr(!1,this.multi,e==="mixed"?this.type:e,n,h,l)}if(arguments.length===3){c=""+c,d=""+d;const h=this._nodes.get(c);if(!h)throw new F(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(d))throw new F(`Graph.${o}:  could not find the "${d}" target node in the graph.`);return Or(!1,e,this.multi,n,h,d,l)}throw new z(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+t[0].toUpperCase()+t.slice(1);i.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop();let l;if(c.length===0){let h=0;e!=="directed"&&(h+=this.undirectedSize),e!=="undirected"&&(h+=this.directedSize),l=new Array(h);let f=0;c.push((_,x,C,k,w,A,m)=>{l[f++]=d(_,x,C,k,w,A,m)})}else l=[],c.push((h,f,_,x,C,k,w)=>{l.push(d(h,f,_,x,C,k,w))});return this[o].apply(this,c),l};const s="filter"+t[0].toUpperCase()+t.slice(1);i.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),d=c.pop(),l=[];return c.push((h,f,_,x,C,k,w)=>{d(h,f,_,x,C,k,w)&&l.push(h)}),this[o].apply(this,c),l};const u="reduce"+t[0].toUpperCase()+t.slice(1);i.prototype[u]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new z(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new z(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d,l;c.length===2?(d=c[0],l=c[1],c=[]):c.length===3?(d=c[1],l=c[2],c=[c[0]]):c.length===4&&(d=c[2],l=c[3],c=[c[0],c[1]]);let h=l;return c.push((f,_,x,C,k,w,A)=>{h=d(h,f,_,x,C,k,w,A)}),this[o].apply(this,c),h}}function Jo(i,r){const{name:t,type:e,direction:n}=r,o="find"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[o]=function(u,c,d){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return!1;if(arguments.length===1)return d=u,wi(!0,this,e,d);if(arguments.length===2){u=""+u,d=c;const l=this._nodes.get(u);if(typeof l>"u")throw new F(`Graph.${o}: could not find the "${u}" node in the graph.`);return Nr(!0,this.multi,e==="mixed"?this.type:e,n,l,d)}if(arguments.length===3){u=""+u,c=""+c;const l=this._nodes.get(u);if(!l)throw new F(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new F(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return Or(!0,e,this.multi,n,l,c,d)}throw new z(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((l,h,f,_,x,C,k)=>c(l,h,f,_,x,C,k)),!!this[o].apply(this,u)};const s="every"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((l,h,f,_,x,C,k)=>!c(l,h,f,_,x,C,k)),!this[o].apply(this,u)}}function Qo(i,r){const{name:t,type:e,direction:n}=r,o=t.slice(0,-1)+"Entries";i.prototype[o]=function(a,s){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return me.empty();if(!arguments.length)return Ho(this,e);if(arguments.length===1){a=""+a;const u=this._nodes.get(a);if(!u)throw new F(`Graph.${o}: could not find the "${a}" node in the graph.`);return Xo(e,n,u)}if(arguments.length===2){a=""+a,s=""+s;const u=this._nodes.get(a);if(!u)throw new F(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new F(`Graph.${o}:  could not find the "${s}" target node in the graph.`);return Zo(e,n,u,s)}throw new z(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ea(i){Uo.forEach(r=>{Yo(i,r),Ko(i,r),Jo(i,r),Qo(i,r)})}const ta=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Nt(){this.A=null,this.B=null}Nt.prototype.wrap=function(i){this.A===null?this.A=i:this.B===null&&(this.B=i)};Nt.prototype.has=function(i){return this.A!==null&&i in this.A||this.B!==null&&i in this.B};function Je(i,r,t,e,n){for(const o in e){const a=e[o],s=a.source,u=a.target,c=s===t?u:s;if(r&&r.has(c.key))continue;const d=n(c.key,c.attributes);if(i&&d)return c.key}}function Fr(i,r,t,e,n){if(r!=="mixed"){if(r==="undirected")return Je(i,null,e,e.undirected,n);if(typeof t=="string")return Je(i,null,e,e[t],n)}const o=new Nt;let a;if(r!=="undirected"){if(t!=="out"){if(a=Je(i,null,e,e.in,n),i&&a)return a;o.wrap(e.in)}if(t!=="in"){if(a=Je(i,o,e,e.out,n),i&&a)return a;o.wrap(e.out)}}if(r!=="directed"&&(a=Je(i,o,e,e.undirected,n),i&&a))return a}function ra(i,r,t){if(i!=="mixed"){if(i==="undirected")return Object.keys(t.undirected);if(typeof r=="string")return Object.keys(t[r])}const e=[];return Fr(!1,i,r,t,function(n){e.push(n)}),e}function Qe(i,r,t){const e=Object.keys(t),n=e.length;let o=0;return new me(function(){let s=null;do{if(o>=n)return i&&i.wrap(t),{done:!0};const u=t[e[o++]],c=u.source,d=u.target;if(s=c===r?d:c,i&&i.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}})}function na(i,r,t){if(i!=="mixed"){if(i==="undirected")return Qe(null,t,t.undirected);if(typeof r=="string")return Qe(null,t,t[r])}let e=me.empty();const n=new Nt;return i!=="undirected"&&(r!=="out"&&(e=Ce(e,Qe(n,t,t.in))),r!=="in"&&(e=Ce(e,Qe(n,t,t.out)))),i!=="directed"&&(e=Ce(e,Qe(n,t,t.undirected))),e}function ia(i,r){const{name:t,type:e,direction:n}=r;i.prototype[t]=function(o){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new F(`Graph.${t}: could not find the "${o}" node in the graph.`);return ra(e==="mixed"?this.type:e,n,a)}}function oa(i,r){const{name:t,type:e,direction:n}=r,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[o]=function(c,d){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return;c=""+c;const l=this._nodes.get(c);if(typeof l>"u")throw new F(`Graph.${o}: could not find the "${c}" node in the graph.`);Fr(!1,e==="mixed"?this.type:e,n,l,d)};const a="map"+t[0].toUpperCase()+t.slice(1);i.prototype[a]=function(c,d){const l=[];return this[o](c,(h,f)=>{l.push(d(h,f))}),l};const s="filter"+t[0].toUpperCase()+t.slice(1);i.prototype[s]=function(c,d){const l=[];return this[o](c,(h,f)=>{d(h,f)&&l.push(h)}),l};const u="reduce"+t[0].toUpperCase()+t.slice(1);i.prototype[u]=function(c,d,l){if(arguments.length<3)throw new z(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=l;return this[o](c,(f,_)=>{h=d(h,f,_)}),h}}function aa(i,r){const{name:t,type:e,direction:n}=r,o=t[0].toUpperCase()+t.slice(1,-1),a="find"+o;i.prototype[a]=function(c,d){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return;c=""+c;const l=this._nodes.get(c);if(typeof l>"u")throw new F(`Graph.${a}: could not find the "${c}" node in the graph.`);return Fr(!0,e==="mixed"?this.type:e,n,l,d)};const s="some"+o;i.prototype[s]=function(c,d){return!!this[a](c,d)};const u="every"+o;i.prototype[u]=function(c,d){return!this[a](c,(h,f)=>!d(h,f))}}function sa(i,r){const{name:t,type:e,direction:n}=r,o=t.slice(0,-1)+"Entries";i.prototype[o]=function(a){if(e!=="mixed"&&this.type!=="mixed"&&e!==this.type)return me.empty();a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new F(`Graph.${o}: could not find the "${a}" node in the graph.`);return na(e==="mixed"?this.type:e,n,s)}}function ua(i){ta.forEach(r=>{ia(i,r),oa(i,r),aa(i,r),sa(i,r)})}function gt(i,r,t,e,n){const o=e._nodes.values(),a=e.type;let s,u,c,d,l,h;for(;s=o.next(),s.done!==!0;){let f=!1;if(u=s.value,a!=="undirected"){d=u.out;for(c in d){l=d[c];do h=l.target,f=!0,n(u.key,h.key,u.attributes,h.attributes,l.key,l.attributes,l.undirected),l=l.next;while(l)}}if(a!=="directed"){d=u.undirected;for(c in d)if(!(r&&u.key>c)){l=d[c];do h=l.target,h.key!==c&&(h=l.source),f=!0,n(u.key,h.key,u.attributes,h.attributes,l.key,l.attributes,l.undirected),l=l.next;while(l)}}t&&!f&&n(u.key,null,u.attributes,null,null,null,null)}}function ca(i,r){const t={key:i};return gi(r.attributes)||(t.attributes=te({},r.attributes)),t}function da(i,r,t){const e={key:r,source:t.source.key,target:t.target.key};return gi(t.attributes)||(e.attributes=te({},t.attributes)),i==="mixed"&&t.undirected&&(e.undirected=!0),e}function la(i){if(!ie(i))throw new z('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in i))throw new z("Graph.import: serialized node is missing its key.");if("attributes"in i&&(!ie(i.attributes)||i.attributes===null))throw new z("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ha(i){if(!ie(i))throw new z('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in i))throw new z("Graph.import: serialized edge is missing its source.");if(!("target"in i))throw new z("Graph.import: serialized edge is missing its target.");if("attributes"in i&&(!ie(i.attributes)||i.attributes===null))throw new z("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in i&&typeof i.undirected!="boolean")throw new z("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const fa=po(),ga=new Set(["directed","undirected","mixed"]),Xr=new Set(["domain","_events","_eventsCount","_maxListeners"]),pa=[{name:i=>`${i}Edge`,generateKey:!0},{name:i=>`${i}DirectedEdge`,generateKey:!0,type:"directed"},{name:i=>`${i}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:i=>`${i}EdgeWithKey`},{name:i=>`${i}DirectedEdgeWithKey`,type:"directed"},{name:i=>`${i}UndirectedEdgeWithKey`,type:"undirected"}],va={allowSelfLoops:!0,multi:!1,type:"mixed"};function ma(i,r,t){if(t&&!ie(t))throw new z(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(r=""+r,t=t||{},i._nodes.has(r))throw new H(`Graph.addNode: the "${r}" node already exist in the graph.`);const e=new i.NodeDataClass(r,t);return i._nodes.set(r,e),i.emit("nodeAdded",{key:r,attributes:t}),e}function qr(i,r,t){const e=new i.NodeDataClass(r,t);return i._nodes.set(r,e),i.emit("nodeAdded",{key:r,attributes:t}),e}function Ei(i,r,t,e,n,o,a,s){if(!e&&i.type==="undirected")throw new H(`Graph.${r}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(e&&i.type==="directed")throw new H(`Graph.${r}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!ie(s))throw new z(`Graph.${r}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!i.allowSelfLoops&&o===a)throw new H(`Graph.${r}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=i._nodes.get(o),c=i._nodes.get(a);if(!u)throw new F(`Graph.${r}: source node "${o}" not found.`);if(!c)throw new F(`Graph.${r}: target node "${a}" not found.`);const d={key:null,undirected:e,source:o,target:a,attributes:s};if(t)n=i._edgeKeyGenerator();else if(n=""+n,i._edges.has(n))throw new H(`Graph.${r}: the "${n}" edge already exists in the graph.`);if(!i.multi&&(e?typeof u.undirected[a]<"u":typeof u.out[a]<"u"))throw new H(`Graph.${r}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const l=new Xe(e,n,u,c,s);i._edges.set(n,l);const h=o===a;return e?(u.undirectedDegree++,c.undirectedDegree++,h&&(u.undirectedLoops++,i._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,h&&(u.directedLoops++,i._directedSelfLoopCount++)),i.multi?l.attachMulti():l.attach(),e?i._undirectedSize++:i._directedSize++,d.key=n,i.emit("edgeAdded",d),n}function ya(i,r,t,e,n,o,a,s,u){if(!e&&i.type==="undirected")throw new H(`Graph.${r}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(e&&i.type==="directed")throw new H(`Graph.${r}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(u){if(typeof s!="function")throw new z(`Graph.${r}: invalid updater function. Expecting a function but got "${s}"`)}else if(!ie(s))throw new z(`Graph.${r}: invalid attributes. Expecting an object but got "${s}"`)}o=""+o,a=""+a;let c;if(u&&(c=s,s=void 0),!i.allowSelfLoops&&o===a)throw new H(`Graph.${r}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=i._nodes.get(o),l=i._nodes.get(a),h,f;if(!t&&(h=i._edges.get(n),h)){if((h.source.key!==o||h.target.key!==a)&&(!e||h.source.key!==a||h.target.key!==o))throw new H(`Graph.${r}: inconsistency detected when attempting to merge the "${n}" edge with "${o}" source & "${a}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!i.multi&&d&&(f=e?d.undirected[a]:d.out[a]),f){const w=[f.key,!1,!1,!1];if(u?!c:!s)return w;if(u){const A=f.attributes;f.attributes=c(A),i.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else te(f.attributes,s),i.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return w}s=s||{},u&&c&&(s=c(s));const _={key:null,undirected:e,source:o,target:a,attributes:s};if(t)n=i._edgeKeyGenerator();else if(n=""+n,i._edges.has(n))throw new H(`Graph.${r}: the "${n}" edge already exists in the graph.`);let x=!1,C=!1;d||(d=qr(i,o,{}),x=!0,o===a&&(l=d,C=!0)),l||(l=qr(i,a,{}),C=!0),h=new Xe(e,n,d,l,s),i._edges.set(n,h);const k=o===a;return e?(d.undirectedDegree++,l.undirectedDegree++,k&&(d.undirectedLoops++,i._undirectedSelfLoopCount++)):(d.outDegree++,l.inDegree++,k&&(d.directedLoops++,i._directedSelfLoopCount++)),i.multi?h.attachMulti():h.attach(),e?i._undirectedSize++:i._directedSize++,_.key=n,i.emit("edgeAdded",_),[n,!0,x,C]}function Be(i,r){i._edges.delete(r.key);const{source:t,target:e,attributes:n}=r,o=r.undirected,a=t===e;o?(t.undirectedDegree--,e.undirectedDegree--,a&&(t.undirectedLoops--,i._undirectedSelfLoopCount--)):(t.outDegree--,e.inDegree--,a&&(t.directedLoops--,i._directedSelfLoopCount--)),i.multi?r.detachMulti():r.detach(),o?i._undirectedSize--:i._directedSize--,i.emit("edgeDropped",{key:r.key,attributes:n,source:t.key,target:e.key,undirected:o})}class J extends di.EventEmitter{constructor(r){if(super(),r=te({},va,r),typeof r.multi!="boolean")throw new z(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${r.multi}".`);if(!ga.has(r.type))throw new z(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${r.type}".`);if(typeof r.allowSelfLoops!="boolean")throw new z(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${r.allowSelfLoops}".`);const t=r.type==="mixed"?pi:r.type==="directed"?vi:mi;pe(this,"NodeDataClass",t);const e="geid_"+fa()+"_";let n=0;const o=()=>{let a;do a=e+n++;while(this._edges.has(a));return a};pe(this,"_attributes",{}),pe(this,"_nodes",new Map),pe(this,"_edges",new Map),pe(this,"_directedSize",0),pe(this,"_undirectedSize",0),pe(this,"_directedSelfLoopCount",0),pe(this,"_undirectedSelfLoopCount",0),pe(this,"_edgeKeyGenerator",o),pe(this,"_options",r),Xr.forEach(a=>pe(this,a,this[a])),_e(this,"order",()=>this._nodes.size),_e(this,"size",()=>this._edges.size),_e(this,"directedSize",()=>this._directedSize),_e(this,"undirectedSize",()=>this._undirectedSize),_e(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),_e(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),_e(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),_e(this,"multi",this._options.multi),_e(this,"type",this._options.type),_e(this,"allowSelfLoops",this._options.allowSelfLoops),_e(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(r){return this._nodes.has(""+r)}hasDirectedEdge(r,t){if(this.type==="undirected")return!1;if(arguments.length===1){const e=""+r,n=this._edges.get(e);return!!n&&!n.undirected}else if(arguments.length===2){r=""+r,t=""+t;const e=this._nodes.get(r);return e?e.out.hasOwnProperty(t):!1}throw new z(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(r,t){if(this.type==="directed")return!1;if(arguments.length===1){const e=""+r,n=this._edges.get(e);return!!n&&n.undirected}else if(arguments.length===2){r=""+r,t=""+t;const e=this._nodes.get(r);return e?e.undirected.hasOwnProperty(t):!1}throw new z(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(r,t){if(arguments.length===1){const e=""+r;return this._edges.has(e)}else if(arguments.length===2){r=""+r,t=""+t;const e=this._nodes.get(r);return e?typeof e.out<"u"&&e.out.hasOwnProperty(t)||typeof e.undirected<"u"&&e.undirected.hasOwnProperty(t):!1}throw new z(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(r,t){if(this.type==="undirected")return;if(r=""+r,t=""+t,this.multi)throw new H("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const e=this._nodes.get(r);if(!e)throw new F(`Graph.directedEdge: could not find the "${r}" source node in the graph.`);if(!this._nodes.has(t))throw new F(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const n=e.out&&e.out[t]||void 0;if(n)return n.key}undirectedEdge(r,t){if(this.type==="directed")return;if(r=""+r,t=""+t,this.multi)throw new H("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const e=this._nodes.get(r);if(!e)throw new F(`Graph.undirectedEdge: could not find the "${r}" source node in the graph.`);if(!this._nodes.has(t))throw new F(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const n=e.undirected&&e.undirected[t]||void 0;if(n)return n.key}edge(r,t){if(this.multi)throw new H("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.edge: could not find the "${r}" source node in the graph.`);if(!this._nodes.has(t))throw new F(`Graph.edge: could not find the "${t}" target node in the graph.`);const n=e.out&&e.out[t]||e.undirected&&e.undirected[t]||void 0;if(n)return n.key}areDirectedNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areDirectedNeighbors: could not find the "${r}" node in the graph.`);return this.type==="undirected"?!1:t in e.in||t in e.out}areOutNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areOutNeighbors: could not find the "${r}" node in the graph.`);return this.type==="undirected"?!1:t in e.out}areInNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areInNeighbors: could not find the "${r}" node in the graph.`);return this.type==="undirected"?!1:t in e.in}areUndirectedNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areUndirectedNeighbors: could not find the "${r}" node in the graph.`);return this.type==="directed"?!1:t in e.undirected}areNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areNeighbors: could not find the "${r}" node in the graph.`);return this.type!=="undirected"&&(t in e.in||t in e.out)||this.type!=="directed"&&t in e.undirected}areInboundNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areInboundNeighbors: could not find the "${r}" node in the graph.`);return this.type!=="undirected"&&t in e.in||this.type!=="directed"&&t in e.undirected}areOutboundNeighbors(r,t){r=""+r,t=""+t;const e=this._nodes.get(r);if(!e)throw new F(`Graph.areOutboundNeighbors: could not find the "${r}" node in the graph.`);return this.type!=="undirected"&&t in e.out||this.type!=="directed"&&t in e.undirected}inDegree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.inDegree: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.outDegree: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.directedDegree: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.undirectedDegree: could not find the "${r}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.inboundDegree: could not find the "${r}" node in the graph.`);let e=0;return this.type!=="directed"&&(e+=t.undirectedDegree),this.type!=="undirected"&&(e+=t.inDegree),e}outboundDegree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.outboundDegree: could not find the "${r}" node in the graph.`);let e=0;return this.type!=="directed"&&(e+=t.undirectedDegree),this.type!=="undirected"&&(e+=t.outDegree),e}degree(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.degree: could not find the "${r}" node in the graph.`);let e=0;return this.type!=="directed"&&(e+=t.undirectedDegree),this.type!=="undirected"&&(e+=t.inDegree+t.outDegree),e}inDegreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.inDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.outDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.directedDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);let e=0,n=0;return this.type!=="directed"&&(e+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(e+=t.inDegree,n+=t.directedLoops),e-n}outboundDegreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);let e=0,n=0;return this.type!=="directed"&&(e+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(e+=t.outDegree,n+=t.directedLoops),e-n}degreeWithoutSelfLoops(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.degreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);let e=0,n=0;return this.type!=="directed"&&(e+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(e+=t.inDegree+t.outDegree,n+=t.directedLoops*2),e-n}source(r){r=""+r;const t=this._edges.get(r);if(!t)throw new F(`Graph.source: could not find the "${r}" edge in the graph.`);return t.source.key}target(r){r=""+r;const t=this._edges.get(r);if(!t)throw new F(`Graph.target: could not find the "${r}" edge in the graph.`);return t.target.key}extremities(r){r=""+r;const t=this._edges.get(r);if(!t)throw new F(`Graph.extremities: could not find the "${r}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(r,t){r=""+r,t=""+t;const e=this._edges.get(t);if(!e)throw new F(`Graph.opposite: could not find the "${t}" edge in the graph.`);const n=e.source.key,o=e.target.key;if(r===n)return o;if(r===o)return n;throw new F(`Graph.opposite: the "${r}" node is not attached to the "${t}" edge (${n}, ${o}).`)}hasExtremity(r,t){r=""+r,t=""+t;const e=this._edges.get(r);if(!e)throw new F(`Graph.hasExtremity: could not find the "${r}" edge in the graph.`);return e.source.key===t||e.target.key===t}isUndirected(r){r=""+r;const t=this._edges.get(r);if(!t)throw new F(`Graph.isUndirected: could not find the "${r}" edge in the graph.`);return t.undirected}isDirected(r){r=""+r;const t=this._edges.get(r);if(!t)throw new F(`Graph.isDirected: could not find the "${r}" edge in the graph.`);return!t.undirected}isSelfLoop(r){r=""+r;const t=this._edges.get(r);if(!t)throw new F(`Graph.isSelfLoop: could not find the "${r}" edge in the graph.`);return t.source===t.target}addNode(r,t){return ma(this,r,t).key}mergeNode(r,t){if(t&&!ie(t))throw new z(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);r=""+r,t=t||{};let e=this._nodes.get(r);return e?(t&&(te(e.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:r,attributes:e.attributes,data:t})),[r,!1]):(e=new this.NodeDataClass(r,t),this._nodes.set(r,e),this.emit("nodeAdded",{key:r,attributes:t}),[r,!0])}updateNode(r,t){if(t&&typeof t!="function")throw new z(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);r=""+r;let e=this._nodes.get(r);if(e){if(t){const o=e.attributes;e.attributes=t(o),this.emit("nodeAttributesUpdated",{type:"replace",key:r,attributes:e.attributes})}return[r,!1]}const n=t?t({}):{};return e=new this.NodeDataClass(r,n),this._nodes.set(r,e),this.emit("nodeAdded",{key:r,attributes:n}),[r,!0]}dropNode(r){r=""+r;const t=this._nodes.get(r);if(!t)throw new F(`Graph.dropNode: could not find the "${r}" node in the graph.`);let e;if(this.type!=="undirected"){for(const n in t.out){e=t.out[n];do Be(this,e),e=e.next;while(e)}for(const n in t.in){e=t.in[n];do Be(this,e),e=e.next;while(e)}}if(this.type!=="directed")for(const n in t.undirected){e=t.undirected[n];do Be(this,e),e=e.next;while(e)}this._nodes.delete(r),this.emit("nodeDropped",{key:r,attributes:t.attributes})}dropEdge(r){let t;if(arguments.length>1){const e=""+arguments[0],n=""+arguments[1];if(t=ve(this,e,n,this.type),!t)throw new F(`Graph.dropEdge: could not find the "${e}" -> "${n}" edge in the graph.`)}else if(r=""+r,t=this._edges.get(r),!t)throw new F(`Graph.dropEdge: could not find the "${r}" edge in the graph.`);return Be(this,t),this}dropDirectedEdge(r,t){if(arguments.length<2)throw new H("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");r=""+r,t=""+t;const e=ve(this,r,t,"directed");if(!e)throw new F(`Graph.dropDirectedEdge: could not find a "${r}" -> "${t}" edge in the graph.`);return Be(this,e),this}dropUndirectedEdge(r,t){if(arguments.length<2)throw new H("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new H("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const e=ve(this,r,t,"undirected");if(!e)throw new F(`Graph.dropUndirectedEdge: could not find a "${r}" -> "${t}" edge in the graph.`);return Be(this,e),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const r=this._nodes.values();let t;for(;t=r.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(r){return this._attributes[r]}getAttributes(){return this._attributes}hasAttribute(r){return this._attributes.hasOwnProperty(r)}setAttribute(r,t){return this._attributes[r]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:r}),this}updateAttribute(r,t){if(typeof t!="function")throw new z("Graph.updateAttribute: updater should be a function.");const e=this._attributes[r];return this._attributes[r]=t(e),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:r}),this}removeAttribute(r){return delete this._attributes[r],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:r}),this}replaceAttributes(r){if(!ie(r))throw new z("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=r,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(r){if(!ie(r))throw new z("Graph.mergeAttributes: provided attributes are not a plain object.");return te(this._attributes,r),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:r}),this}updateAttributes(r){if(typeof r!="function")throw new z("Graph.updateAttributes: provided updater is not a function.");return this._attributes=r(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(r,t){if(typeof r!="function")throw new z("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!Vr(t))throw new z("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const e=this._nodes.values();let n,o;for(;n=e.next(),n.done!==!0;)o=n.value,o.attributes=r(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(r,t){if(typeof r!="function")throw new z("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!Vr(t))throw new z("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const e=this._edges.values();let n,o,a,s;for(;n=e.next(),n.done!==!0;)o=n.value,a=o.source,s=o.target,o.attributes=r(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(r){if(typeof r!="function")throw new z("Graph.forEachAdjacencyEntry: expecting a callback.");gt(!1,!1,!1,this,r)}forEachAdjacencyEntryWithOrphans(r){if(typeof r!="function")throw new z("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");gt(!1,!1,!0,this,r)}forEachAssymetricAdjacencyEntry(r){if(typeof r!="function")throw new z("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");gt(!1,!0,!1,this,r)}forEachAssymetricAdjacencyEntryWithOrphans(r){if(typeof r!="function")throw new z("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");gt(!1,!0,!0,this,r)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):fi(this._nodes.keys(),this._nodes.size)}forEachNode(r){if(typeof r!="function")throw new z("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)n=e.value,r(n.key,n.attributes)}findNode(r){if(typeof r!="function")throw new z("Graph.findNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)if(n=e.value,r(n.key,n.attributes))return n.key}mapNodes(r){if(typeof r!="function")throw new z("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let e,n;const o=new Array(this.order);let a=0;for(;e=t.next(),e.done!==!0;)n=e.value,o[a++]=r(n.key,n.attributes);return o}someNode(r){if(typeof r!="function")throw new z("Graph.someNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)if(n=e.value,r(n.key,n.attributes))return!0;return!1}everyNode(r){if(typeof r!="function")throw new z("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let e,n;for(;e=t.next(),e.done!==!0;)if(n=e.value,!r(n.key,n.attributes))return!1;return!0}filterNodes(r){if(typeof r!="function")throw new z("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let e,n;const o=[];for(;e=t.next(),e.done!==!0;)n=e.value,r(n.key,n.attributes)&&o.push(n.key);return o}reduceNodes(r,t){if(typeof r!="function")throw new z("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new z("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let e=t;const n=this._nodes.values();let o,a;for(;o=n.next(),o.done!==!0;)a=o.value,e=r(e,a.key,a.attributes);return e}nodeEntries(){const r=this._nodes.values();return new me(()=>{const t=r.next();if(t.done)return t;const e=t.value;return{value:{node:e.key,attributes:e.attributes},done:!1}})}export(){const r=new Array(this._nodes.size);let t=0;this._nodes.forEach((n,o)=>{r[t++]=ca(o,n)});const e=new Array(this._edges.size);return t=0,this._edges.forEach((n,o)=>{e[t++]=da(this.type,o,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:r,edges:e}}import(r,t=!1){if(r instanceof J)return r.forEachNode((u,c)=>{t?this.mergeNode(u,c):this.addNode(u,c)}),r.forEachEdge((u,c,d,l,h,f,_)=>{t?_?this.mergeUndirectedEdgeWithKey(u,d,l,c):this.mergeDirectedEdgeWithKey(u,d,l,c):_?this.addUndirectedEdgeWithKey(u,d,l,c):this.addDirectedEdgeWithKey(u,d,l,c)}),this;if(!ie(r))throw new z("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(r.attributes){if(!ie(r.attributes))throw new z("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(r.attributes):this.replaceAttributes(r.attributes)}let e,n,o,a,s;if(r.nodes){if(o=r.nodes,!Array.isArray(o))throw new z("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=o.length;e<n;e++){a=o[e],la(a);const{key:u,attributes:c}=a;t?this.mergeNode(u,c):this.addNode(u,c)}}if(r.edges){let u=!1;if(this.type==="undirected"&&(u=!0),o=r.edges,!Array.isArray(o))throw new z("Graph.import: invalid edges. Expecting an array.");for(e=0,n=o.length;e<n;e++){s=o[e],ha(s);const{source:c,target:d,attributes:l,undirected:h=u}=s;let f;"key"in s?(f=t?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,s.key,c,d,l)):(f=t?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,d,l))}}return this}nullCopy(r){const t=new J(te({},this._options,r));return t.replaceAttributes(te({},this.getAttributes())),t}emptyCopy(r){const t=this.nullCopy(r);return this._nodes.forEach((e,n)=>{const o=te({},e.attributes);e=new t.NodeDataClass(n,o),t._nodes.set(n,e)}),t}copy(r){if(r=r||{},typeof r.type=="string"&&r.type!==this.type&&r.type!=="mixed")throw new H(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${r.type}" because this would mean losing information about the current graph.`);if(typeof r.multi=="boolean"&&r.multi!==this.multi&&r.multi!==!0)throw new H("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof r.allowSelfLoops=="boolean"&&r.allowSelfLoops!==this.allowSelfLoops&&r.allowSelfLoops!==!0)throw new H("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(r),e=this._edges.values();let n,o;for(;n=e.next(),n.done!==!0;)o=n.value,Ei(t,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,te({},o.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const r={};this._nodes.forEach((o,a)=>{r[a]=o.attributes});const t={},e={};this._edges.forEach((o,a)=>{const s=o.undirected?"--":"->";let u="",c=o.source.key,d=o.target.key,l;o.undirected&&c>d&&(l=c,c=d,d=l);const h=`(${c})${s}(${d})`;a.startsWith("geid_")?this.multi&&(typeof e[h]>"u"?e[h]=0:e[h]++,u+=`${e[h]}. `):u+=`[${a}]: `,u+=h,t[u]=o.attributes});const n={};for(const o in this)this.hasOwnProperty(o)&&!Xr.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(n[o]=this[o]);return n.attributes=this._attributes,n.nodes=r,n.edges=t,pe(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(J.prototype[Symbol.for("nodejs.util.inspect.custom")]=J.prototype.inspect);pa.forEach(i=>{["add","merge","update"].forEach(r=>{const t=i.name(r),e=r==="add"?Ei:ya;i.generateKey?J.prototype[t]=function(n,o,a){return e(this,t,!0,(i.type||this.type)==="undirected",null,n,o,a,r==="update")}:J.prototype[t]=function(n,o,a,s){return e(this,t,!1,(i.type||this.type)==="undirected",n,o,a,s,r==="update")}})});So(J);zo(J);ea(J);ua(J);class xi extends J{constructor(r){const t=te({type:"directed"},r);if("multi"in t&&t.multi!==!1)throw new z("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new z('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Ti extends J{constructor(r){const t=te({type:"undirected"},r);if("multi"in t&&t.multi!==!1)throw new z("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new z('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Ai extends J{constructor(r){const t=te({multi:!0},r);if("multi"in t&&t.multi!==!0)throw new z("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Ri extends J{constructor(r){const t=te({type:"directed",multi:!0},r);if("multi"in t&&t.multi!==!0)throw new z("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new z('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Si extends J{constructor(r){const t=te({type:"undirected",multi:!0},r);if("multi"in t&&t.multi!==!0)throw new z("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new z('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function qe(i){i.from=function(r,t){const e=te({},r.options,t),n=new i(e);return n.import(r),n}}qe(J);qe(xi);qe(Ti);qe(Ai);qe(Ri);qe(Si);J.Graph=J;J.DirectedGraph=xi;J.UndirectedGraph=Ti;J.MultiGraph=Ai;J.MultiDirectedGraph=Ri;J.MultiUndirectedGraph=Si;J.InvalidArgumentsGraphError=z;J.NotFoundGraphError=F;J.UsageGraphError=H;function ba(i,r){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var e=t.call(i,r||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function ot(i){var r=ba(i,"string");return typeof r=="symbol"?r:r+""}function ue(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function Zr(i,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,ot(e.key),e)}}function ce(i,r,t){return r&&Zr(i.prototype,r),t&&Zr(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ve(i){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ve(i)}function Ci(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ci=function(){return!!i})()}function O(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _a(i,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(i)}function ye(i,r,t){return r=Ve(r),_a(i,Ci()?Reflect.construct(r,t||[],Ve(i).constructor):r.apply(i,t))}function Rr(i,r){return Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rr(i,r)}function be(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&Rr(i,r)}function wa(i){if(Array.isArray(i))return i}function Ea(i,r){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var e,n,o,a,s=[],u=!0,c=!1;try{if(o=(t=t.call(i)).next,r===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(e=o.call(t)).done)&&(s.push(e.value),s.length!==r);u=!0);}catch(d){c=!0,n=d}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw n}}return s}}function Sr(i,r){(r==null||r>i.length)&&(r=i.length);for(var t=0,e=Array(r);t<r;t++)e[t]=i[t];return e}function Li(i,r){if(i){if(typeof i=="string")return Sr(i,r);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Sr(i,r):void 0}}function xa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(i,r){return wa(i)||Ea(i,r)||Li(i,r)||xa()}var Vt={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},Di=new Int8Array(4),Xt=new Int32Array(Di.buffer,0,1),Ta=new Float32Array(Di.buffer,0,1),Aa=/^\s*rgba?\s*\(/,Ra=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Sa(i){var r=0,t=0,e=0,n=1;if(i[0]==="#")i.length===4?(r=parseInt(i.charAt(1)+i.charAt(1),16),t=parseInt(i.charAt(2)+i.charAt(2),16),e=parseInt(i.charAt(3)+i.charAt(3),16)):(r=parseInt(i.charAt(1)+i.charAt(2),16),t=parseInt(i.charAt(3)+i.charAt(4),16),e=parseInt(i.charAt(5)+i.charAt(6),16)),i.length===9&&(n=parseInt(i.charAt(7)+i.charAt(8),16)/255);else if(Aa.test(i)){var o=i.match(Ra);o&&(r=+o[1],t=+o[2],e=+o[3],o[4]&&(n=+o[4]))}return{r,g:t,b:e,a:n}}var He={};for(var pt in Vt)He[pt]=Ze(Vt[pt]),He[Vt[pt]]=He[pt];function ki(i,r,t,e,n){return Xt[0]=e<<24|t<<16|r<<8|i,Xt[0]=Xt[0]&4278190079,Ta[0]}function Ze(i){if(i=i.toLowerCase(),typeof He[i]<"u")return He[i];var r=Sa(i),t=r.r,e=r.g,n=r.b,o=r.a;o=o*255|0;var a=ki(t,e,n,o);return He[i]=a,a}var qt={};function Gi(i){if(typeof qt[i]<"u")return qt[i];var r=(i&16711680)>>>16,t=(i&65280)>>>8,e=i&255,n=255,o=ki(r,t,e,n);return qt[i]=o,o}function Yr(i,r,t,e){return t+(r<<8)+(i<<16)}function Kr(i,r,t,e,n,o){var a=Math.floor(t/o*n),s=Math.floor(i.drawingBufferHeight/o-e/o*n),u=new Uint8Array(4);i.bindFramebuffer(i.FRAMEBUFFER,r),i.readPixels(a,s,1,1,i.RGBA,i.UNSIGNED_BYTE,u);var c=Lt(u,4),d=c[0],l=c[1],h=c[2],f=c[3];return[d,l,h,f]}function N(i,r,t){return(r=ot(r))in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}function Jr(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function j(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Jr(Object(t),!0).forEach(function(e){N(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Jr(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function Ca(i,r){for(;!{}.hasOwnProperty.call(i,r)&&(i=Ve(i))!==null;);return i}function Cr(){return Cr=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,r,t){var e=Ca(i,r);if(e){var n=Object.getOwnPropertyDescriptor(e,r);return n.get?n.get.call(arguments.length<3?i:t):n.value}},Cr.apply(null,arguments)}function Ni(i,r,t,e){var n=Cr(Ve(i.prototype),r,t);return typeof n=="function"?function(o){return n.apply(t,o)}:n}function La(i){return i.normalized?1:i.size}function Zt(i){var r=0;return i.forEach(function(t){return r+=La(t)}),r}function Oi(i,r,t){var e=i==="VERTEX"?r.VERTEX_SHADER:r.FRAGMENT_SHADER,n=r.createShader(e);if(n===null)throw new Error("loadShader: error while creating the shader");r.shaderSource(n,t),r.compileShader(n);var o=r.getShaderParameter(n,r.COMPILE_STATUS);if(!o){var a=r.getShaderInfoLog(n);throw r.deleteShader(n),new Error(`loadShader: error while compiling the shader:
`.concat(a,`
`).concat(t))}return n}function Da(i,r){return Oi("VERTEX",i,r)}function ka(i,r){return Oi("FRAGMENT",i,r)}function Ga(i,r){var t=i.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var e,n;for(e=0,n=r.length;e<n;e++)i.attachShader(t,r[e]);i.linkProgram(t);var o=i.getProgramParameter(t,i.LINK_STATUS);if(!o)throw i.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function Qr(i){var r=i.gl,t=i.buffer,e=i.program,n=i.vertexShader,o=i.fragmentShader;r.deleteShader(n),r.deleteShader(o),r.deleteProgram(e),r.deleteBuffer(t)}var en=`#define PICKING_MODE
`,Na=N(N(N(N(N(N(N(N({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),Fi=function(){function i(r,t,e){ue(this,i),N(this,"array",new Float32Array),N(this,"constantArray",new Float32Array),N(this,"capacity",0),N(this,"verticesCount",0);var n=this.getDefinition();if(this.VERTICES=n.VERTICES,this.VERTEX_SHADER_SOURCE=n.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=n.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=n.UNIFORMS,this.ATTRIBUTES=n.ATTRIBUTES,this.METHOD=n.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in n?n.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in n?n.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in n,this.ATTRIBUTES_ITEMS_COUNT=Zt(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=e,this.normalProgram=this.getProgramInfo("normal",r,n.VERTEX_SHADER_SOURCE,n.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",r,en+n.VERTEX_SHADER_SOURCE,en+n.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var o=Zt(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var a=0;a<this.CONSTANT_DATA.length;a++){var s=this.CONSTANT_DATA[a];if(s.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(s.length," items instead of ").concat(o,")"));for(var u=0;u<s.length;u++)this.constantArray[a*o+u]=s[u]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return ce(i,[{key:"kill",value:function(){Qr(this.normalProgram),this.pickProgram&&(Qr(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,e,n,o,a){var s=this.getDefinition(),u=e.createBuffer();if(u===null)throw new Error("Program: error while creating the WebGL buffer.");var c=Da(e,n),d=ka(e,o),l=Ga(e,[c,d]),h={};s.UNIFORMS.forEach(function(x){var C=e.getUniformLocation(l,x);C&&(h[x]=C)});var f={};s.ATTRIBUTES.forEach(function(x){f[x.name]=e.getAttribLocation(l,x.name)});var _;if("CONSTANT_ATTRIBUTES"in s&&(s.CONSTANT_ATTRIBUTES.forEach(function(x){f[x.name]=e.getAttribLocation(l,x.name)}),_=e.createBuffer(),_===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:l,gl:e,frameBuffer:a,buffer:u,constantBuffer:_||{},uniformLocations:h,attributeLocations:f,isPicking:t==="pick",vertexShader:c,fragmentShader:d}}},{key:"bindProgram",value:function(t){var e=this,n=0,o=t.gl,a=t.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,t.constantBuffer),n=0,this.CONSTANT_ATTRIBUTES.forEach(function(s){return n+=e.bindAttribute(s,t,n,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),n=0,this.ATTRIBUTES.forEach(function(s){return n+=e.bindAttribute(s,t,n,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,a),n=0,this.ATTRIBUTES.forEach(function(s){return n+=e.bindAttribute(s,t,n)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var e=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t,!1)}),this.ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t,!0)})):this.ATTRIBUTES.forEach(function(n){return e.unbindAttribute(n,t)})}},{key:"bindAttribute",value:function(t,e,n,o){var a=Na[t.type];if(typeof a!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var s=e.attributeLocations[t.name],u=e.gl;if(s!==-1){u.enableVertexAttribArray(s);var c=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:Zt(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(u.vertexAttribPointer(s,t.size,t.type,t.normalized||!1,c,n),this.isInstanced&&o)if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(s,1);else{var d=u.getExtension("ANGLE_instanced_arrays");d&&d.vertexAttribDivisorANGLE(s,1)}}return t.size*a}},{key:"unbindAttribute",value:function(t,e,n){var o=e.attributeLocations[t.name],a=e.gl;if(o!==-1&&(a.disableVertexAttribArray(o),this.isInstanced&&n))if(a instanceof WebGL2RenderingContext)a.vertexAttribDivisor(o,0);else{var s=a.getExtension("ANGLE_instanced_arrays");s&&s.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,e){var n=e.gl,o=e.program;n.enable(n.BLEND),n.useProgram(o),this.setUniforms(t,e),this.drawWebGL(this.METHOD,e)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(j(j({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,e){var n=e.gl,o=e.frameBuffer;if(n.bindFramebuffer(n.FRAMEBUFFER,o),!this.isInstanced)n.drawArrays(t,0,this.verticesCount);else if(n instanceof WebGL2RenderingContext)n.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var a=n.getExtension("ANGLE_instanced_arrays");a&&a.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}]),i}(),Oa=function(i){be(r,i);function r(){return ue(this,r),ye(this,r,arguments)}return ce(r,[{key:"kill",value:function(){Ni(r,"kill",this)([])}},{key:"process",value:function(e,n,o){var a=n*this.STRIDE;if(o.hidden){for(var s=a+this.STRIDE;a<s;a++)this.array[a]=0;return}return this.processVisibleItem(Gi(e),a,o)}}]),r}(Fi),Ot=function(i){be(r,i);function r(){var t;ue(this,r);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t=ye(this,r,[].concat(n)),N(O(t),"drawLabel",void 0),t}return ce(r,[{key:"kill",value:function(){Ni(r,"kill",this)([])}},{key:"process",value:function(e,n,o,a,s){var u=n*this.STRIDE;if(s.hidden||o.hidden||a.hidden){for(var c=u+this.STRIDE;u<c;u++)this.array[u]=0;return}return this.processVisibleItem(Gi(e),u,o,a,s)}}]),r}(Fi);function Fa(i,r){return function(){function t(e,n,o){ue(this,t),N(this,"drawLabel",r),this.programs=i.map(function(a){return new a(e,n,o)})}return ce(t,[{key:"reallocate",value:function(n){this.programs.forEach(function(o){return o.reallocate(n)})}},{key:"process",value:function(n,o,a,s,u){this.programs.forEach(function(c){return c.process(n,o,a,s,u)})}},{key:"render",value:function(n){this.programs.forEach(function(o){return o.render(n)})}},{key:"kill",value:function(){this.programs.forEach(function(n){return n.kill()})}}]),t}()}function Ia(i,r,t,e,n){var o=n.edgeLabelSize,a=n.edgeLabelFont,s=n.edgeLabelWeight,u=n.edgeLabelColor.attribute?r[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,c=r.label;if(c){i.fillStyle=u,i.font="".concat(s," ").concat(o,"px ").concat(a);var d=t.size,l=e.size,h=t.x,f=t.y,_=e.x,x=e.y,C=(h+_)/2,k=(f+x)/2,w=_-h,A=x-f,m=Math.sqrt(w*w+A*A);if(!(m<d+l)){h+=w*d/m,f+=A*d/m,_-=w*l/m,x-=A*l/m,C=(h+_)/2,k=(f+x)/2,w=_-h,A=x-f,m=Math.sqrt(w*w+A*A);var p=i.measureText(c).width;if(p>m){var R="…";for(c=c+R,p=i.measureText(c).width;p>m&&c.length>1;)c=c.slice(0,-2)+R,p=i.measureText(c).width;if(c.length<4)return}var g;w>0?A>0?g=Math.acos(w/m):g=Math.asin(A/m):A>0?g=Math.acos(w/m)+Math.PI:g=Math.asin(w/m)+Math.PI/2,i.save(),i.translate(C,k),i.rotate(g),i.fillText(c,-p/2,r.size/2+o),i.restore()}}}function Ii(i,r,t){if(r.label){var e=t.labelSize,n=t.labelFont,o=t.labelWeight,a=t.labelColor.attribute?r[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;i.fillStyle=a,i.font="".concat(o," ").concat(e,"px ").concat(n),i.fillText(r.label,r.x+r.size+3,r.y+e/3)}}function Pa(i,r,t){var e=t.labelSize,n=t.labelFont,o=t.labelWeight;i.font="".concat(o," ").concat(e,"px ").concat(n),i.fillStyle="#FFF",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=8,i.shadowColor="#000";var a=2;if(typeof r.label=="string"){var s=i.measureText(r.label).width,u=Math.round(s+5),c=Math.round(e+2*a),d=Math.max(r.size,e/2)+a,l=Math.asin(c/2/d),h=Math.sqrt(Math.abs(Math.pow(d,2)-Math.pow(c/2,2)));i.beginPath(),i.moveTo(r.x+h,r.y+c/2),i.lineTo(r.x+d+u,r.y+c/2),i.lineTo(r.x+d+u,r.y-c/2),i.lineTo(r.x+h,r.y-c/2),i.arc(r.x,r.y,d,l,-l),i.closePath(),i.fill()}else i.beginPath(),i.arc(r.x,r.y,r.size+a,0,Math.PI*2),i.closePath(),i.fill();i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,Ii(i,r,t)}var za=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Ua=za,$a=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Ma=$a,Pi=WebGLRenderingContext,tn=Pi.UNSIGNED_BYTE,Yt=Pi.FLOAT,Ba=["u_sizeRatio","u_correctionRatio","u_matrix"],Ft=function(i){be(r,i);function r(){return ue(this,r),ye(this,r,arguments)}return ce(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Ma,FRAGMENT_SHADER_SOURCE:Ua,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Ba,ATTRIBUTES:[{name:"a_position",size:2,type:Yt},{name:"a_size",size:1,type:Yt},{name:"a_color",size:4,type:tn,normalized:!0},{name:"a_id",size:4,type:tn,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Yt}],CONSTANT_DATA:[[r.ANGLE_1],[r.ANGLE_2],[r.ANGLE_3]]}}},{key:"processVisibleItem",value:function(e,n,o){var a=this.array,s=Ze(o.color);a[n++]=o.x,a[n++]=o.y,a[n++]=o.size,a[n++]=s,a[n++]=e}},{key:"setUniforms",value:function(e,n){var o=n.gl,a=n.uniformLocations,s=a.u_sizeRatio,u=a.u_correctionRatio,c=a.u_matrix;o.uniform1f(u,e.correctionRatio),o.uniform1f(s,e.sizeRatio),o.uniformMatrix3fv(c,!1,e.matrix)}}]),r}(Oa);N(Ft,"ANGLE_1",0);N(Ft,"ANGLE_2",2*Math.PI/3);N(Ft,"ANGLE_3",4*Math.PI/3);var ja=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,Wa=ja,Ha=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Va=Ha,zi=WebGLRenderingContext,rn=zi.UNSIGNED_BYTE,vt=zi.FLOAT,Xa=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],It={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function Ui(i){var r=j(j({},It),{});return function(t){be(e,t);function e(){return ue(this,e),ye(this,e,arguments)}return ce(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Va,FRAGMENT_SHADER_SOURCE:Wa,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Xa,ATTRIBUTES:[{name:"a_position",size:2,type:vt},{name:"a_normal",size:2,type:vt},{name:"a_radius",size:1,type:vt},{name:"a_color",size:4,type:rn,normalized:!0},{name:"a_id",size:4,type:rn,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:vt}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,a,s,u,c){if(r.extremity==="source"){var d=[u,s];s=d[0],u=d[1]}var l=c.size||1,h=u.size||1,f=s.x,_=s.y,x=u.x,C=u.y,k=Ze(c.color),w=x-f,A=C-_,m=w*w+A*A,p=0,R=0;m&&(m=1/Math.sqrt(m),p=-A*m*l,R=w*m*l);var g=this.array;g[a++]=x,g[a++]=C,g[a++]=-p,g[a++]=-R,g[a++]=h,g[a++]=k,g[a++]=o}},{key:"setUniforms",value:function(o,a){var s=a.gl,u=a.uniformLocations,c=u.u_matrix,d=u.u_sizeRatio,l=u.u_correctionRatio,h=u.u_minEdgeThickness,f=u.u_lengthToThicknessRatio,_=u.u_widenessToThicknessRatio;s.uniformMatrix3fv(c,!1,o.matrix),s.uniform1f(d,o.sizeRatio),s.uniform1f(l,o.correctionRatio),s.uniform1f(h,o.minEdgeThickness),s.uniform1f(f,r.lengthToThicknessRatio),s.uniform1f(_,r.widenessToThicknessRatio)}}]),e}(Ot)}Ui();var qa=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,$i=qa,Za=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Ya=Za,Mi=WebGLRenderingContext,nn=Mi.UNSIGNED_BYTE,Pe=Mi.FLOAT,Ka=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],Ja={lengthToThicknessRatio:It.lengthToThicknessRatio};function Bi(i){var r=j(j({},Ja),{});return function(t){be(e,t);function e(){return ue(this,e),ye(this,e,arguments)}return ce(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Ya,FRAGMENT_SHADER_SOURCE:$i,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Ka,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Pe},{name:"a_positionEnd",size:2,type:Pe},{name:"a_normal",size:2,type:Pe},{name:"a_color",size:4,type:nn,normalized:!0},{name:"a_id",size:4,type:nn,normalized:!0},{name:"a_radius",size:1,type:Pe}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Pe},{name:"a_normalCoef",size:1,type:Pe},{name:"a_radiusCoef",size:1,type:Pe}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,a,s,u,c){var d=c.size||1,l=s.x,h=s.y,f=u.x,_=u.y,x=Ze(c.color),C=f-l,k=_-h,w=u.size||1,A=C*C+k*k,m=0,p=0;A&&(A=1/Math.sqrt(A),m=-k*A*d,p=C*A*d);var R=this.array;R[a++]=l,R[a++]=h,R[a++]=f,R[a++]=_,R[a++]=m,R[a++]=p,R[a++]=x,R[a++]=o,R[a++]=w}},{key:"setUniforms",value:function(o,a){var s=a.gl,u=a.uniformLocations,c=u.u_matrix,d=u.u_zoomRatio,l=u.u_feather,h=u.u_pixelRatio,f=u.u_correctionRatio,_=u.u_sizeRatio,x=u.u_minEdgeThickness,C=u.u_lengthToThicknessRatio;s.uniformMatrix3fv(c,!1,o.matrix),s.uniform1f(d,o.zoomRatio),s.uniform1f(_,o.sizeRatio),s.uniform1f(f,o.correctionRatio),s.uniform1f(h,o.pixelRatio),s.uniform1f(l,o.antiAliasingFeather),s.uniform1f(x,o.minEdgeThickness),s.uniform1f(C,r.lengthToThicknessRatio)}}]),e}(Ot)}Bi();function Qa(i){return Fa([Bi(),Ui()])}var es=Qa(),ts=es,rs=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,ns=rs,ji=WebGLRenderingContext,on=ji.UNSIGNED_BYTE,et=ji.FLOAT,is=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],Wi=function(i){be(r,i);function r(){return ue(this,r),ye(this,r,arguments)}return ce(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:ns,FRAGMENT_SHADER_SOURCE:$i,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:is,ATTRIBUTES:[{name:"a_positionStart",size:2,type:et},{name:"a_positionEnd",size:2,type:et},{name:"a_normal",size:2,type:et},{name:"a_color",size:4,type:on,normalized:!0},{name:"a_id",size:4,type:on,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:et},{name:"a_normalCoef",size:1,type:et}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(e,n,o,a,s){var u=s.size||1,c=o.x,d=o.y,l=a.x,h=a.y,f=Ze(s.color),_=l-c,x=h-d,C=_*_+x*x,k=0,w=0;C&&(C=1/Math.sqrt(C),k=-x*C*u,w=_*C*u);var A=this.array;A[n++]=c,A[n++]=d,A[n++]=l,A[n++]=h,A[n++]=k,A[n++]=w,A[n++]=f,A[n++]=e}},{key:"setUniforms",value:function(e,n){var o=n.gl,a=n.uniformLocations,s=a.u_matrix,u=a.u_zoomRatio,c=a.u_feather,d=a.u_pixelRatio,l=a.u_correctionRatio,h=a.u_sizeRatio,f=a.u_minEdgeThickness;o.uniformMatrix3fv(s,!1,e.matrix),o.uniform1f(u,e.zoomRatio),o.uniform1f(h,e.sizeRatio),o.uniform1f(l,e.correctionRatio),o.uniform1f(d,e.pixelRatio),o.uniform1f(c,e.antiAliasingFeather),o.uniform1f(f,e.minEdgeThickness)}}]),r}(Ot),Ir=function(i){be(r,i);function r(){var t;return ue(this,r),t=ye(this,r),t.rawEmitter=O(t),t}return ce(r)}(di.EventEmitter),Kt,an;function de(){return an||(an=1,Kt=function(r){return r!==null&&typeof r=="object"&&typeof r.addUndirectedEdgeWithKey=="function"&&typeof r.dropNode=="function"&&typeof r.multi=="boolean"}),Kt}var os=de();const as=Ne(os);var ss=function(r){return r},us=function(r){return r*r},cs=function(r){return r*(2-r)},ds=function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},ls=function(r){return r*r*r},hs=function(r){return--r*r*r+1},fs=function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},gs={linear:ss,quadraticIn:us,quadraticOut:cs,quadraticInOut:ds,cubicIn:ls,cubicOut:hs,cubicInOut:fs},ps={easing:"quadraticInOut",duration:150};function we(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function mt(i,r,t){return i[0]=r,i[4]=typeof t=="number"?t:r,i}function sn(i,r){var t=Math.sin(r),e=Math.cos(r);return i[0]=e,i[1]=t,i[3]=-t,i[4]=e,i}function un(i,r,t){return i[6]=r,i[7]=t,i}function De(i,r){var t=i[0],e=i[1],n=i[2],o=i[3],a=i[4],s=i[5],u=i[6],c=i[7],d=i[8],l=r[0],h=r[1],f=r[2],_=r[3],x=r[4],C=r[5],k=r[6],w=r[7],A=r[8];return i[0]=l*t+h*o+f*u,i[1]=l*e+h*a+f*c,i[2]=l*n+h*s+f*d,i[3]=_*t+x*o+C*u,i[4]=_*e+x*a+C*c,i[5]=_*n+x*s+C*d,i[6]=k*t+w*o+A*u,i[7]=k*e+w*a+A*c,i[8]=k*n+w*s+A*d,i}function Lr(i,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,e=i[0],n=i[1],o=i[3],a=i[4],s=i[6],u=i[7],c=r.x,d=r.y;return{x:c*e+d*o+s*t,y:c*n+d*a+u*t}}function vs(i,r){var t=i.height/i.width,e=r.height/r.width;return t<1&&e>1||t>1&&e<1?1:Math.min(Math.max(e,1/e),Math.max(1/t,t))}function tt(i,r,t,e,n){var o=i.angle,a=i.ratio,s=i.x,u=i.y,c=r.width,d=r.height,l=we(),h=Math.min(c,d)-2*e,f=vs(r,t);return n?(De(l,un(we(),s,u)),De(l,mt(we(),a)),De(l,sn(we(),o)),De(l,mt(we(),c/h/2/f,d/h/2/f))):(De(l,mt(we(),2*(h/c)*f,2*(h/d)*f)),De(l,sn(we(),-o)),De(l,mt(we(),1/a)),De(l,un(we(),-s,-u))),l}function ms(i,r,t){var e=Lr(i,{x:Math.cos(r.angle),y:Math.sin(r.angle)},0),n=e.x,o=e.y;return 1/Math.sqrt(Math.pow(n,2)+Math.pow(o,2))/t.width}function ys(i){if(!i.order)return{x:[0,1],y:[0,1]};var r=1/0,t=-1/0,e=1/0,n=-1/0;return i.forEachNode(function(o,a){var s=a.x,u=a.y;s<r&&(r=s),s>t&&(t=s),u<e&&(e=u),u>n&&(n=u)}),{x:[r,t],y:[e,n]}}function bs(i){if(!as(i))throw new Error("Sigma: invalid graph instance.");i.forEachNode(function(r,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(r," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function _s(i,r,t){var e=document.createElement(i);if(r)for(var n in r)e.style[n]=r[n];if(t)for(var o in t)e.setAttribute(o,t[o]);return e}function cn(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function dn(i,r,t){return t.sort(function(e,n){var o=r(e)||0,a=r(n)||0;return o<a?-1:o>a?1:0})}function ln(i){var r=Lt(i.x,2),t=r[0],e=r[1],n=Lt(i.y,2),o=n[0],a=n[1],s=Math.max(e-t,a-o),u=(e+t)/2,c=(a+o)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(u)&&(u=0),isNaN(c)&&(c=0);var d=function(h){return{x:.5+(h.x-u)/s,y:.5+(h.y-c)/s}};return d.applyTo=function(l){l.x=.5+(l.x-u)/s,l.y=.5+(l.y-c)/s},d.inverse=function(l){return{x:u+s*(l.x-.5),y:c+s*(l.y-.5)}},d.ratio=s,d}function hn(i,r){var t=r.size;if(t!==0){var e=i.length;i.length+=t;var n=0;r.forEach(function(o){i[e+n]=o,n++})}}function Jt(i){i=i||{};for(var r=0,t=arguments.length<=1?0:arguments.length-1;r<t;r++){var e=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];e&&Object.assign(i,e)}return i}var Pr={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:Ia,defaultDrawNodeLabel:Ii,defaultDrawNodeHover:Pa,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraRotation:!0,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},ws={circle:Ft},Es={arrow:ts,line:Wi};function fn(i){if(typeof i.labelDensity!="number"||i.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var r=i.minCameraRatio,t=i.maxCameraRatio;if(typeof r=="number"&&typeof t=="number"&&t<r)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function xs(i){var r=Jt({},Pr,i);return r.nodeProgramClasses=Jt({},ws,r.nodeProgramClasses),r.edgeProgramClasses=Jt({},Es,r.edgeProgramClasses),r}var yt=1.5,gn=function(i){be(r,i);function r(){var t;return ue(this,r),t=ye(this,r),N(O(t),"x",.5),N(O(t),"y",.5),N(O(t),"angle",0),N(O(t),"ratio",1),N(O(t),"minRatio",null),N(O(t),"maxRatio",null),N(O(t),"enabledRotation",!0),N(O(t),"nextFrame",null),N(O(t),"previousState",null),N(O(t),"enabled",!0),t.previousState=t.getState(),t}return ce(r,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle}},{key:"getPreviousState",value:function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null}},{key:"getBoundedRatio",value:function(e){var n=e;return typeof this.minRatio=="number"&&(n=Math.max(n,this.minRatio)),typeof this.maxRatio=="number"&&(n=Math.min(n,this.maxRatio)),n}},{key:"validateState",value:function(e){var n={};return typeof e.x=="number"&&(n.x=e.x),typeof e.y=="number"&&(n.y=e.y),this.enabledRotation&&typeof e.angle=="number"&&(n.angle=e.angle),typeof e.ratio=="number"&&(n.ratio=this.getBoundedRatio(e.ratio)),n}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(e){if(!this.enabled)return this;this.previousState=this.getState();var n=this.validateState(e);return typeof n.x=="number"&&(this.x=n.x),typeof n.y=="number"&&(this.y=n.y),this.enabledRotation&&typeof n.angle=="number"&&(this.angle=n.angle),typeof n.ratio=="number"&&(this.ratio=n.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(e){return this.setState(e(this.getState())),this}},{key:"animate",value:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(!a)return new Promise(function(f){return n.animate(e,o,f)});if(this.enabled){var s=j(j({},ps),o),u=this.validateState(e),c=typeof s.easing=="function"?s.easing:gs[s.easing],d=Date.now(),l=this.getState(),h=function f(){var _=(Date.now()-d)/s.duration;if(_>=1){n.nextFrame=null,n.setState(u),n.animationCallback&&(n.animationCallback.call(null),n.animationCallback=void 0);return}var x=c(_),C={};typeof u.x=="number"&&(C.x=l.x+(u.x-l.x)*x),typeof u.y=="number"&&(C.y=l.y+(u.y-l.y)*x),n.enabledRotation&&typeof u.angle=="number"&&(C.angle=l.angle+(u.angle-l.angle)*x),typeof u.ratio=="number"&&(C.ratio=l.ratio+(u.ratio-l.ratio)*x),n.setState(C),n.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=a}}},{key:"animatedZoom",value:function(e){return e?typeof e=="number"?this.animate({ratio:this.ratio/e}):this.animate({ratio:this.ratio/(e.factor||yt)},e):this.animate({ratio:this.ratio/yt})}},{key:"animatedUnzoom",value:function(e){return e?typeof e=="number"?this.animate({ratio:this.ratio*e}):this.animate({ratio:this.ratio*(e.factor||yt)},e):this.animate({ratio:this.ratio*yt})}},{key:"animatedReset",value:function(e){return this.animate({x:.5,y:.5,ratio:1,angle:0},e)}},{key:"copy",value:function(){return r.from(this.getState())}}],[{key:"from",value:function(e){var n=new r;return n.setState(e)}}]),r}(Ir);function Ee(i,r){var t=r.getBoundingClientRect();return{x:i.clientX-t.left,y:i.clientY-t.top}}function Re(i,r){var t=j(j({},Ee(i,r)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:i});return t}function rt(i){var r="x"in i?i:j(j({},i.touches[0]||i.previousTouches[0]),{},{original:i.original,sigmaDefaultPrevented:i.sigmaDefaultPrevented,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0,r.sigmaDefaultPrevented=!0}});return r}function Ts(i,r){return j(j({},Re(i,r)),{},{delta:Hi(i)})}var As=2;function wt(i){for(var r=[],t=0,e=Math.min(i.length,As);t<e;t++)r.push(i[t]);return r}function nt(i,r,t){var e={touches:wt(i.touches).map(function(n){return Ee(n,t)}),previousTouches:r.map(function(n){return Ee(n,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:i};return e}function Hi(i){if(typeof i.deltaY<"u")return i.deltaY*-3/360;if(typeof i.detail<"u")return i.detail/-9;throw new Error("Captor: could not extract delta from event.")}var Vi=function(i){be(r,i);function r(t,e){var n;return ue(this,r),n=ye(this,r),n.container=t,n.renderer=e,n}return ce(r)}(Ir),Rs=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],Ss=Rs.reduce(function(i,r){return j(j({},i),{},N({},r,Pr[r]))},{}),Cs=function(i){be(r,i);function r(t,e){var n;return ue(this,r),n=ye(this,r,[t,e]),N(O(n),"enabled",!0),N(O(n),"draggedEvents",0),N(O(n),"downStartTime",null),N(O(n),"lastMouseX",null),N(O(n),"lastMouseY",null),N(O(n),"isMouseDown",!1),N(O(n),"isMoving",!1),N(O(n),"movingTimeout",null),N(O(n),"startCameraState",null),N(O(n),"clicks",0),N(O(n),"doubleClickTimeout",null),N(O(n),"currentWheelDirection",0),N(O(n),"settings",Ss),n.handleClick=n.handleClick.bind(O(n)),n.handleRightClick=n.handleRightClick.bind(O(n)),n.handleDown=n.handleDown.bind(O(n)),n.handleUp=n.handleUp.bind(O(n)),n.handleMove=n.handleMove.bind(O(n)),n.handleWheel=n.handleWheel.bind(O(n)),n.handleLeave=n.handleLeave.bind(O(n)),n.handleEnter=n.handleEnter.bind(O(n)),t.addEventListener("click",n.handleClick,{capture:!1}),t.addEventListener("contextmenu",n.handleRightClick,{capture:!1}),t.addEventListener("mousedown",n.handleDown,{capture:!1}),t.addEventListener("wheel",n.handleWheel,{capture:!1}),t.addEventListener("mouseleave",n.handleLeave,{capture:!1}),t.addEventListener("mouseenter",n.handleEnter,{capture:!1}),document.addEventListener("mousemove",n.handleMove,{capture:!1}),document.addEventListener("mouseup",n.handleUp,{capture:!1}),n}return ce(r,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseleave",this.handleLeave),e.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(e){var n=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){n.clicks=0,n.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Re(e,this.container))}}},{key:"handleRightClick",value:function(e){this.enabled&&this.emit("rightClick",Re(e,this.container))}},{key:"handleDoubleClick",value:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var n=Re(e,this.container);if(this.emit("doubleClick",n),!n.sigmaDefaultPrevented){var o=this.renderer.getCamera(),a=o.getBoundedRatio(o.getState().ratio/this.settings.doubleClickZoomingRatio);o.animate(this.renderer.getViewportZoomedState(Ee(e,this.container),a),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(e){if(this.enabled){if(e.button===0){this.startCameraState=this.renderer.getCamera().getState();var n=Ee(e,this.container),o=n.x,a=n.y;this.lastMouseX=o,this.lastMouseY=a,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Re(e,this.container))}}},{key:"handleUp",value:function(e){var n=this;if(!(!this.enabled||!this.isMouseDown)){var o=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var a=Ee(e,this.container),s=a.x,u=a.y,c=o.getState(),d=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:c.x+this.settings.inertiaRatio*(c.x-d.x),y:c.y+this.settings.inertiaRatio*(c.y-d.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==s||this.lastMouseY!==u)&&o.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var l=n.draggedEvents>0;n.draggedEvents=0,l&&n.renderer.refresh()},0),this.emit("mouseup",Re(e,this.container))}}},{key:"handleMove",value:function(e){var n=this;if(this.enabled){var o=Re(e,this.container);if(this.emit("mousemovebody",o),(e.target===this.container||e.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.movingTimeout=null,n.isMoving=!1},this.settings.dragTimeout);var a=this.renderer.getCamera(),s=Ee(e,this.container),u=s.x,c=s.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),l=this.renderer.viewportToFramedGraph({x:u,y:c}),h=d.x-l.x,f=d.y-l.y,_=a.getState(),x=_.x+h,C=_.y+f;a.setState({x,y:C}),this.lastMouseX=u,this.lastMouseY=c,e.preventDefault(),e.stopPropagation()}}}},{key:"handleLeave",value:function(e){this.emit("mouseleave",Re(e,this.container))}},{key:"handleEnter",value:function(e){this.emit("mouseenter",Re(e,this.container))}},{key:"handleWheel",value:function(e){var n=this;if(this.enabled){e.preventDefault(),e.stopPropagation();var o=Hi(e);if(o){var a=Ts(e,this.container);if(this.emit("wheel",a),!a.sigmaDefaultPrevented){var s=o>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,u=this.renderer.getCamera(),c=u.getBoundedRatio(u.getState().ratio*s),d=o>0?1:-1,l=Date.now();this.currentWheelDirection===d&&this.lastWheelTriggerTime&&l-this.lastWheelTriggerTime<this.settings.zoomDuration/5||(u.animate(this.renderer.getViewportZoomedState(Ee(e,this.container),c),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){n.currentWheelDirection=0}),this.currentWheelDirection=d,this.lastWheelTriggerTime=l)}}}}},{key:"setSettings",value:function(e){this.settings=e}}]),r}(Vi),Ls=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],Ds=Ls.reduce(function(i,r){return j(j({},i),{},N({},r,Pr[r]))},{}),ks=function(i){be(r,i);function r(t,e){var n;return ue(this,r),n=ye(this,r,[t,e]),N(O(n),"enabled",!0),N(O(n),"isMoving",!1),N(O(n),"hasMoved",!1),N(O(n),"touchMode",0),N(O(n),"startTouchesPositions",[]),N(O(n),"lastTouches",[]),N(O(n),"lastTap",null),N(O(n),"settings",Ds),n.handleStart=n.handleStart.bind(O(n)),n.handleLeave=n.handleLeave.bind(O(n)),n.handleMove=n.handleMove.bind(O(n)),t.addEventListener("touchstart",n.handleStart,{capture:!1}),t.addEventListener("touchcancel",n.handleLeave,{capture:!1}),document.addEventListener("touchend",n.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",n.handleMove,{capture:!1,passive:!1}),n}return ce(r,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(e){var n=this;if(this.enabled){e.preventDefault();var o=wt(e.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(f){return Ee(f,n.container)}),this.touchMode===2){var a=Lt(this.startTouchesPositions,2),s=a[0],u=s.x,c=s.y,d=a[1],l=d.x,h=d.y;this.startTouchesAngle=Math.atan2(h-c,l-u),this.startTouchesDistance=Math.sqrt(Math.pow(l-u,2)+Math.pow(h-c,2))}this.emit("touchdown",nt(e,this.lastTouches,this.container)),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(e){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(e.cancelable&&e.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(e.touches.length===1){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var n=this.renderer.getCamera(),o=n.getState(),a=n.getPreviousState()||{x:0,y:0};n.animate({x:o.x+this.settings.inertiaRatio*(o.x-a.x),y:o.y+this.settings.inertiaRatio*(o.y-a.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",nt(e,this.lastTouches,this.container)),!e.touches.length){var s=Ee(this.lastTouches[0],this.container),u=this.startTouchesPositions[0],c=Math.pow(s.x-u.x,2)+Math.pow(s.y-u.y,2);if(!e.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var d=nt(e,this.lastTouches,this.container);if(this.emit("doubletap",d),this.lastTap=null,!d.sigmaDefaultPrevented){var l=this.renderer.getCamera(),h=l.getBoundedRatio(l.getState().ratio/this.settings.doubleClickZoomingRatio);l.animate(this.renderer.getViewportZoomedState(s,h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=nt(e,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=wt(e.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(e){var n=this;if(!(!this.enabled||!this.startTouchesPositions.length)){e.preventDefault();var o=wt(e.touches),a=o.map(function(q){return Ee(q,n.container)}),s=this.lastTouches;this.lastTouches=o,this.lastTouchesPositions=a;var u=nt(e,s,this.container);if(this.emit("touchmove",u),!u.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=a.some(function(q,V){var P=n.startTouchesPositions[V];return P&&(q.x!==P.x||q.y!==P.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),d=this.startCameraState,l=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=h.x,_=h.y,x=this.renderer.viewportToFramedGraph(a[0]),C=x.x,k=x.y;c.setState({x:d.x+f-C,y:d.y+_-k});break}case 2:{var w={x:.5,y:.5,angle:0,ratio:1},A=a[0],m=A.x,p=A.y,R=a[1],g=R.x,b=R.y,y=Math.atan2(b-p,g-m)-this.startTouchesAngle,E=Math.hypot(b-p,g-m)/this.startTouchesDistance,S=c.getBoundedRatio(d.ratio/E);w.ratio=S,w.angle=d.angle+y;var L=this.getDimensions(),v=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),I=Math.min(L.width,L.height)-2*l,U=I/L.width,D=I/L.height,T=S/I,$=m-I/2/U,M=p-I/2/D,X=[$*Math.cos(-w.angle)-M*Math.sin(-w.angle),M*Math.cos(-w.angle)+$*Math.sin(-w.angle)];$=X[0],M=X[1],w.x=v.x-$*T,w.y=v.y+M*T,c.setState(w);break}}}}}},{key:"setSettings",value:function(e){this.settings=e}}]),r}(Vi);function Gs(i){if(Array.isArray(i))return Sr(i)}function Ns(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Os(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pn(i){return Gs(i)||Ns(i)||Li(i)||Os()}function Fs(i,r){if(i==null)return{};var t={};for(var e in i)if({}.hasOwnProperty.call(i,e)){if(r.includes(e))continue;t[e]=i[e]}return t}function Qt(i,r){if(i==null)return{};var t,e,n=Fs(i,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(e=0;e<o.length;e++)t=o[e],r.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(n[t]=i[t])}return n}var vn=function(){function i(r,t){ue(this,i),this.key=r,this.size=t}return ce(i,null,[{key:"compare",value:function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1}}]),i}(),mn=function(){function i(){ue(this,i),N(this,"width",0),N(this,"height",0),N(this,"cellSize",0),N(this,"columns",0),N(this,"rows",0),N(this,"cells",{})}return ce(i,[{key:"resizeAndClear",value:function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}}},{key:"getIndex",value:function(t){var e=Math.floor(t.x/this.cellSize),n=Math.floor(t.y/this.cellSize);return n*this.columns+e}},{key:"add",value:function(t,e,n){var o=new vn(t,e),a=this.getIndex(n),s=this.cells[a];s||(s=[],this.cells[a]=s),s.push(o)}},{key:"organize",value:function(){for(var t in this.cells){var e=this.cells[t];e.sort(vn.compare)}}},{key:"getLabelsToDisplay",value:function(t,e){var n=this.cellSize*this.cellSize,o=n/t/t,a=o*e/n,s=Math.ceil(a),u=[];for(var c in this.cells)for(var d=this.cells[c],l=0;l<Math.min(s,d.length);l++)u.push(d[l].key);return u}}]),i}();function Is(i){var r=i.graph,t=i.hoveredNode,e=i.highlightedNodes,n=i.displayedNodeLabels,o=[];return r.forEachEdge(function(a,s,u,c){(u===t||c===t||e.has(u)||e.has(c)||n.has(u)&&n.has(c))&&o.push(a)}),o}var yn=150,bn=50,Se=Object.prototype.hasOwnProperty;function Ps(i,r,t){if(!Se.call(t,"x")||!Se.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(r,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=i.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),Se.call(t,"hidden")||(t.hidden=!1),Se.call(t,"highlighted")||(t.highlighted=!1),Se.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=i.defaultNodeType),t.zIndex||(t.zIndex=0),t}function zs(i,r,t){return t.color||(t.color=i.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),Se.call(t,"hidden")||(t.hidden=!1),Se.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=i.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var Us=function(i){be(r,i);function r(t,e){var n,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(ue(this,r),n=ye(this,r),N(O(n),"elements",{}),N(O(n),"canvasContexts",{}),N(O(n),"webGLContexts",{}),N(O(n),"pickingLayers",new Set),N(O(n),"textures",{}),N(O(n),"frameBuffers",{}),N(O(n),"activeListeners",{}),N(O(n),"labelGrid",new mn),N(O(n),"nodeDataCache",{}),N(O(n),"edgeDataCache",{}),N(O(n),"nodeProgramIndex",{}),N(O(n),"edgeProgramIndex",{}),N(O(n),"nodesWithForcedLabels",new Set),N(O(n),"edgesWithForcedLabels",new Set),N(O(n),"nodeExtent",{x:[0,1],y:[0,1]}),N(O(n),"nodeZExtent",[1/0,-1/0]),N(O(n),"edgeZExtent",[1/0,-1/0]),N(O(n),"matrix",we()),N(O(n),"invMatrix",we()),N(O(n),"correctionRatio",1),N(O(n),"customBBox",null),N(O(n),"normalizationFunction",ln({x:[0,1],y:[0,1]})),N(O(n),"graphToViewportRatio",1),N(O(n),"itemIDsIndex",{}),N(O(n),"nodeIndices",{}),N(O(n),"edgeIndices",{}),N(O(n),"width",0),N(O(n),"height",0),N(O(n),"pixelRatio",cn()),N(O(n),"pickingDownSizingRatio",2*n.pixelRatio),N(O(n),"displayedNodeLabels",new Set),N(O(n),"displayedEdgeLabels",new Set),N(O(n),"highlightedNodes",new Set),N(O(n),"hoveredNode",null),N(O(n),"hoveredEdge",null),N(O(n),"renderFrame",null),N(O(n),"renderHighlightedNodesFrame",null),N(O(n),"needToProcess",!1),N(O(n),"checkEdgesEventsFrame",null),N(O(n),"nodePrograms",{}),N(O(n),"nodeHoverPrograms",{}),N(O(n),"edgePrograms",{}),n.settings=xs(o),fn(n.settings),bs(t),!(e instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");n.graph=t,n.container=e,n.createWebGLContext("edges",{picking:o.enableEdgeEvents}),n.createCanvasContext("edgeLabels"),n.createWebGLContext("nodes",{picking:!0}),n.createCanvasContext("labels"),n.createCanvasContext("hovers"),n.createWebGLContext("hoverNodes"),n.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),n.resize();for(var a in n.settings.nodeProgramClasses)n.registerNodeProgram(a,n.settings.nodeProgramClasses[a],n.settings.nodeHoverProgramClasses[a]);for(var s in n.settings.edgeProgramClasses)n.registerEdgeProgram(s,n.settings.edgeProgramClasses[s]);return n.camera=new gn,n.bindCameraHandlers(),n.mouseCaptor=new Cs(n.elements.mouse,O(n)),n.mouseCaptor.setSettings(n.settings),n.touchCaptor=new ks(n.elements.mouse,O(n)),n.touchCaptor.setSettings(n.settings),n.bindEventHandlers(),n.bindGraphHandlers(),n.handleSettingsUpdate(),n.refresh(),n}return ce(r,[{key:"registerNodeProgram",value:function(e,n,o){return this.nodePrograms[e]&&this.nodePrograms[e].kill(),this.nodeHoverPrograms[e]&&this.nodeHoverPrograms[e].kill(),this.nodePrograms[e]=new n(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[e]=new(o||n)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(e,n){return this.edgePrograms[e]&&this.edgePrograms[e].kill(),this.edgePrograms[e]=new n(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(e){if(this.nodePrograms[e]){var n=this.nodePrograms,o=n[e],a=Qt(n,[e].map(ot));o.kill(),this.nodePrograms=a}if(this.nodeHoverPrograms[e]){var s=this.nodeHoverPrograms,u=s[e],c=Qt(s,[e].map(ot));u.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(e){if(this.edgePrograms[e]){var n=this.edgePrograms,o=n[e],a=Qt(n,[e].map(ot));o.kill(),this.edgePrograms=a}return this}},{key:"resetWebGLTexture",value:function(e){var n=this.webGLContexts[e],o=this.frameBuffers[e],a=this.textures[e];a&&n.deleteTexture(a);var s=n.createTexture();return n.bindFramebuffer(n.FRAMEBUFFER,o),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0),this.textures[e]=s,this}},{key:"bindCameraHandlers",value:function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(e){var n=e.x,o=e.y,a=Kr(this.webGLContexts.nodes,this.frameBuffers.nodes,n,o,this.pixelRatio,this.pickingDownSizingRatio),s=Yr.apply(void 0,pn(a)),u=this.itemIDsIndex[s];return u&&u.type==="node"?u.id:null}},{key:"bindEventHandlers",value:function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var a=rt(o),s={event:a,preventSigmaDefault:function(){a.preventSigmaDefault()}},u=e.getNodeAtPosition(a);if(u&&e.hoveredNode!==u&&!e.nodeDataCache[u].hidden){e.hoveredNode&&e.emit("leaveNode",j(j({},s),{},{node:e.hoveredNode})),e.hoveredNode=u,e.emit("enterNode",j(j({},s),{},{node:u})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode&&e.getNodeAtPosition(a)!==e.hoveredNode){var c=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",j(j({},s),{},{node:c})),e.scheduleHighlightedNodesRender();return}if(e.settings.enableEdgeEvents){var d=e.hoveredNode?null:e.getEdgeAtPoint(s.event.x,s.event.y);d!==e.hoveredEdge&&(e.hoveredEdge&&e.emit("leaveEdge",j(j({},s),{},{edge:e.hoveredEdge})),d&&e.emit("enterEdge",j(j({},s),{},{edge:d})),e.hoveredEdge=d)}},this.activeListeners.handleMoveBody=function(o){var a=rt(o);e.emit("moveBody",{event:a,preventSigmaDefault:function(){a.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(o){var a=rt(o),s={event:a,preventSigmaDefault:function(){a.preventSigmaDefault()}};e.hoveredNode&&(e.emit("leaveNode",j(j({},s),{},{node:e.hoveredNode})),e.scheduleHighlightedNodesRender()),e.settings.enableEdgeEvents&&e.hoveredEdge&&(e.emit("leaveEdge",j(j({},s),{},{edge:e.hoveredEdge})),e.scheduleHighlightedNodesRender()),e.emit("leaveStage",j({},s))},this.activeListeners.handleEnter=function(o){var a=rt(o),s={event:a,preventSigmaDefault:function(){a.preventSigmaDefault()}};e.emit("enterStage",j({},s))};var n=function(a){return function(s){var u=rt(s),c={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}},d=e.getNodeAtPosition(u);if(d)return e.emit("".concat(a,"Node"),j(j({},c),{},{node:d}));if(e.settings.enableEdgeEvents){var l=e.getEdgeAtPoint(u.x,u.y);if(l)return e.emit("".concat(a,"Edge"),j(j({},c),{},{edge:l}))}return e.emit("".concat(a,"Stage"),c)}};return this.activeListeners.handleClick=n("click"),this.activeListeners.handleRightClick=n("rightClick"),this.activeListeners.handleDoubleClick=n("doubleClick"),this.activeListeners.handleWheel=n("wheel"),this.activeListeners.handleDown=n("down"),this.activeListeners.handleUp=n("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var e=this,n=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(a){var s,u=(s=a.hints)===null||s===void 0?void 0:s.attributes;e.graph.forEachNode(function(d){return e.updateNode(d)});var c=!u||u.some(function(d){return o.has(d)});e.refresh({partialGraph:{nodes:n.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(a){var s,u=(s=a.hints)===null||s===void 0?void 0:s.attributes;e.graph.forEachEdge(function(d){return e.updateEdge(d)});var c=u&&["zIndex","type"].some(function(d){return u==null?void 0:u.includes(d)});e.refresh({partialGraph:{edges:n.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(a){var s=a.key;e.addNode(s),e.refresh({partialGraph:{nodes:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(a){var s=a.key;e.refresh({partialGraph:{nodes:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(a){var s=a.key;e.removeNode(s),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(a){var s=a.key;e.addEdge(s),e.refresh({partialGraph:{edges:[s]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(a){var s=a.key;e.refresh({partialGraph:{edges:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(a){var s=a.key;e.removeEdge(s),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},n.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),n.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),n.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),n.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),n.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(e,n){var o=Kr(this.webGLContexts.edges,this.frameBuffers.edges,e,n,this.pixelRatio,this.pickingDownSizingRatio),a=Yr.apply(void 0,pn(o)),s=this.itemIDsIndex[a];return s&&s.type==="edge"?s.id:null}},{key:"process",value:function(){var e=this;this.emit("beforeProcess");var n=this.graph,o=this.settings,a=this.getDimensions();if(this.nodeExtent=ys(this.graph),!this.settings.autoRescale){var s=a.width,u=a.height,c=this.nodeExtent,d=c.x,l=c.y;this.nodeExtent={x:[(d[0]+d[1])/2-s/2,(d[0]+d[1])/2+s/2],y:[(l[0]+l[1])/2-u/2,(l[0]+l[1])/2+u/2]}}this.normalizationFunction=ln(this.customBBox||this.nodeExtent);var h=new gn,f=tt(h.getState(),a,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(a,o.labelGridCellSize);for(var _={},x={},C={},k={},w=1,A=n.nodes(),m=0,p=A.length;m<p;m++){var R=A[m],g=this.nodeDataCache[R],b=n.getNodeAttributes(R);g.x=b.x,g.y=b.y,this.normalizationFunction.applyTo(g),typeof g.label=="string"&&!g.hidden&&this.labelGrid.add(R,g.size,this.framedGraphToViewport(g,{matrix:f})),_[g.type]=(_[g.type]||0)+1}this.labelGrid.organize();for(var y in this.nodePrograms){if(!Se.call(this.nodePrograms,y))throw new Error('Sigma: could not find a suitable program for node type "'.concat(y,'"!'));this.nodePrograms[y].reallocate(_[y]||0),_[y]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(A=dn(this.nodeZExtent,function(Q){return e.nodeDataCache[Q].zIndex},A));for(var E=0,S=A.length;E<S;E++){var L=A[E];x[L]=w,k[x[L]]={type:"node",id:L},w++;var v=this.nodeDataCache[L];this.addNodeToProgram(L,x[L],_[v.type]++)}for(var I={},U=n.edges(),D=0,T=U.length;D<T;D++){var $=U[D],M=this.edgeDataCache[$];I[M.type]=(I[M.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(U=dn(this.edgeZExtent,function(Q){return e.edgeDataCache[Q].zIndex},U));for(var X in this.edgePrograms){if(!Se.call(this.edgePrograms,X))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(X,'"!'));this.edgePrograms[X].reallocate(I[X]||0),I[X]=0}for(var q=0,V=U.length;q<V;q++){var P=U[q];C[P]=w,k[C[P]]={type:"edge",id:P},w++;var le=this.edgeDataCache[P];this.addEdgeToProgram(P,C[P],I[le.type]++)}return this.itemIDsIndex=k,this.nodeIndices=x,this.edgeIndices=C,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(e){var n=this.settings;if(this.camera.minRatio=n.minCameraRatio,this.camera.maxRatio=n.maxCameraRatio,this.camera.enabledRotation=n.enableCameraRotation,this.camera.setState(this.camera.validateState(this.camera.getState())),e){if(e.edgeProgramClasses!==n.edgeProgramClasses){for(var o in n.edgeProgramClasses)n.edgeProgramClasses[o]!==e.edgeProgramClasses[o]&&this.registerEdgeProgram(o,n.edgeProgramClasses[o]);for(var a in e.edgeProgramClasses)n.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(e.nodeProgramClasses!==n.nodeProgramClasses||e.nodeHoverProgramClasses!==n.nodeHoverProgramClasses){for(var s in n.nodeProgramClasses)(n.nodeProgramClasses[s]!==e.nodeProgramClasses[s]||n.nodeHoverProgramClasses[s]!==e.nodeHoverProgramClasses[s])&&this.registerNodeProgram(s,n.nodeProgramClasses[s],n.nodeHoverProgramClasses[s]);for(var u in e.nodeProgramClasses)n.nodeProgramClasses[u]||this.unregisterNodeProgram(u)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),n=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);hn(n,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,a=0,s=n.length;a<s;a++){var u=n[a],c=this.nodeDataCache[u];if(!this.displayedNodeLabels.has(u)&&!c.hidden){var d=this.framedGraphToViewport(c),l=d.x,h=d.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(l<-yn||l>this.width+yn||h<-bn||h>this.height+bn)){this.displayedNodeLabels.add(u);var _=this.settings.defaultDrawNodeLabel,x=this.nodePrograms[c.type],C=(x==null?void 0:x.drawLabel)||_;C(o,j(j({key:u},c),{},{size:f,x:l,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);var n=Is({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});hn(n,this.edgesWithForcedLabels);for(var o=new Set,a=0,s=n.length;a<s;a++){var u=n[a],c=this.graph.extremities(u),d=this.nodeDataCache[c[0]],l=this.nodeDataCache[c[1]],h=this.edgeDataCache[u];if(!o.has(u)&&!(h.hidden||d.hidden||l.hidden)){var f=this.settings.defaultDrawEdgeLabel,_=this.edgePrograms[h.type],x=(_==null?void 0:_.drawLabel)||f;x(e,j(j({key:u},h),{},{size:this.scaleSize(h.size)}),j(j(j({key:c[0]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),j(j(j({key:c[1]},l),this.framedGraphToViewport(l)),{},{size:this.scaleSize(l.size)}),this.settings),o.add(u)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var e=this,n=this.canvasContexts.hovers;n.clearRect(0,0,this.width,this.height);var o=function(f){var _=e.nodeDataCache[f],x=e.framedGraphToViewport(_),C=x.x,k=x.y,w=e.scaleSize(_.size),A=e.settings.defaultDrawNodeHover,m=e.nodePrograms[_.type],p=(m==null?void 0:m.drawHover)||A;p(n,j(j({key:f},_),{},{size:w,x:C,y:k}),e.settings)},a=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&a.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==e.hoveredNode&&a.push(h)}),a.forEach(function(h){return o(h)});var s={};a.forEach(function(h){var f=e.nodeDataCache[h].type;s[f]=(s[f]||0)+1});for(var u in this.nodeHoverPrograms)this.nodeHoverPrograms[u].reallocate(s[u]||0),s[u]=0;a.forEach(function(h){var f=e.nodeDataCache[h];e.nodeHoverPrograms[f.type].process(0,s[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var d in this.nodeHoverPrograms){var l=this.nodeHoverPrograms[d];l.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))}},{key:"render",value:function(){var e=this;this.emit("beforeRender");var n=function(){return e.emit("afterRender"),e};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(C){return e.resetWebGLTexture(C)}),!this.graph.order)return n();var o=this.mouseCaptor,a=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,s=this.camera.getState(),u=this.getDimensions(),c=this.getGraphDimensions(),d=this.getStagePadding();this.matrix=tt(s,u,c,d),this.invMatrix=tt(s,u,c,d,!0),this.correctionRatio=ms(this.matrix,s,u),this.graphToViewportRatio=this.getGraphToViewportRatio();var l=this.getRenderParams();for(var h in this.nodePrograms){var f=this.nodePrograms[h];f.render(l)}if(!this.settings.hideEdgesOnMove||!a)for(var _ in this.edgePrograms){var x=this.edgePrograms[_];x.render(l)}return this.settings.hideLabelsOnMove&&a||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),n()}},{key:"addNode",value:function(e){var n=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(n=this.settings.nodeReducer(e,n));var o=Ps(this.settings,e,n);this.nodeDataCache[e]=o,this.nodesWithForcedLabels.delete(e),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),o.highlighted&&!o.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(e){this.addNode(e);var n=this.nodeDataCache[e];this.normalizationFunction.applyTo(n)}},{key:"removeNode",value:function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)}},{key:"addEdge",value:function(e){var n=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(n=this.settings.edgeReducer(e,n));var o=zs(this.settings,e,n);this.edgeDataCache[e]=o,this.edgesWithForcedLabels.delete(e),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(e){this.addEdge(e)}},{key:"removeEdge",value:function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new mn,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(e,n,o){var a=this.nodeDataCache[e],s=this.nodePrograms[a.type];if(!s)throw new Error('Sigma: could not find a suitable program for node type "'.concat(a.type,'"!'));s.process(n,o,a),this.nodeProgramIndex[e]=o}},{key:"addEdgeToProgram",value:function(e,n,o){var a=this.edgeDataCache[e],s=this.edgePrograms[a.type];if(!s)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(a.type,'"!'));var u=this.graph.extremities(e),c=this.nodeDataCache[u[0]],d=this.nodeDataCache[u[1]];s.process(n,o,c,d,a),this.edgeProgramIndex[e]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var e=this.settings,n=e.stagePadding,o=e.autoRescale;return o&&n||0}},{key:"createLayer",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[e])throw new Error('Sigma: a layer named "'.concat(e,'" already exists'));var a=_s(n,{position:"absolute"},{class:"sigma-".concat(e)});return o.style&&Object.assign(a.style,o.style),this.elements[e]=a,"beforeLayer"in o&&o.beforeLayer?this.elements[o.beforeLayer].before(a):"afterLayer"in o&&o.afterLayer?this.elements[o.afterLayer].after(a):this.container.appendChild(a),a}},{key:"createCanvas",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(e,"canvas",n)}},{key:"createCanvasContext",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.createCanvas(e,n),a={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[e]=o.getContext("2d",a),this}},{key:"createWebGLContext",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=(n==null?void 0:n.canvas)||this.createCanvas(e,n);n.hidden&&o.remove();var a=j({preserveDrawingBuffer:!1,antialias:!1},n),s;s=o.getContext("webgl2",a),s||(s=o.getContext("webgl",a)),s||(s=o.getContext("experimental-webgl",a));var u=s;if(this.webGLContexts[e]=u,u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),n.picking){this.pickingLayers.add(e);var c=u.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=c}return u}},{key:"killLayer",value:function(e){var n=this.elements[e];if(!n)throw new Error("Sigma: cannot kill layer ".concat(e,", which does not exist"));if(this.webGLContexts[e]){var o,a=this.webGLContexts[e];(o=a.getExtension("WEBGL_lose_context"))===null||o===void 0||o.loseContext(),delete this.webGLContexts[e]}else this.canvasContexts[e]&&delete this.canvasContexts[e];return n.remove(),delete this.elements[e],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(e){e!==this.graph&&(this.hoveredNode&&!e.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!e.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}}},{key:"getNodeDisplayData",value:function(e){var n=this.nodeDataCache[e];return n?Object.assign({},n):void 0}},{key:"getEdgeDisplayData",value:function(e){var n=this.edgeDataCache[e];return n?Object.assign({},n):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return j({},this.settings)}},{key:"getSetting",value:function(e){return this.settings[e]}},{key:"setSetting",value:function(e,n){var o=j({},this.settings);return this.settings[e]=n,fn(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(e,n){return this.setSetting(e,n(this.settings[e])),this}},{key:"resize",value:function(e){var n=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=cn(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!e&&n===this.width&&o===this.height)return this;for(var a in this.elements){var s=this.elements[a];s.style.width=this.width+"px",s.style.height=this.height+"px"}for(var u in this.canvasContexts)this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[u].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var d=this.webGLContexts[c];if(d.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var l=this.textures[c];l&&d.deleteTexture(l)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(e){var n=this,o=(e==null?void 0:e.skipIndexation)!==void 0?e==null?void 0:e.skipIndexation:!1,a=(e==null?void 0:e.schedule)!==void 0?e.schedule:!1,s=!e||!e.partialGraph;if(s)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(m){return n.addNode(m)}),this.graph.forEachEdge(function(m){return n.addEdge(m)});else{for(var u,c,d=((u=e.partialGraph)===null||u===void 0?void 0:u.nodes)||[],l=0,h=(d==null?void 0:d.length)||0;l<h;l++){var f=d[l];if(this.updateNode(f),o){var _=this.nodeProgramIndex[f];if(_===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],_)}}for(var x=(e==null||(c=e.partialGraph)===null||c===void 0?void 0:c.edges)||[],C=0,k=x.length;C<k;C++){var w=x[C];if(this.updateEdge(w),o){var A=this.edgeProgramIndex[w];if(A===void 0)throw new Error('Sigma: edge "'.concat(w,`" can't be repaint`));this.addEdgeToProgram(w,this.edgeIndices[w],A)}}}return(s||!o)&&(this.needToProcess=!0),a?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var e=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){e.render()})),this}},{key:"scheduleRefresh",value:function(e){return this.refresh(j(j({},e),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(e,n){var o=this.camera.getState(),a=o.ratio,s=o.angle,u=o.x,c=o.y,d=this.settings,l=d.minCameraRatio,h=d.maxCameraRatio;typeof h=="number"&&(n=Math.min(n,h)),typeof l=="number"&&(n=Math.max(n,l));var f=n/a,_={x:this.width/2,y:this.height/2},x=this.viewportToFramedGraph(e),C=this.viewportToFramedGraph(_);return{angle:s,x:(x.x-C.x)*(1-f)+u,y:(x.y-C.y)*(1-f)+c,ratio:n}}},{key:"viewRectangle",value:function(){var e=this.viewportToFramedGraph({x:0,y:0}),n=this.viewportToFramedGraph({x:this.width,y:0}),o=this.viewportToFramedGraph({x:0,y:this.height});return{x1:e.x,y1:e.y,x2:n.x,y2:n.y,height:n.y-o.y}}},{key:"framedGraphToViewport",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!n.cameraState||!!n.viewportDimensions||!!n.graphDimensions,a=n.matrix?n.matrix:o?tt(n.cameraState||this.camera.getState(),n.viewportDimensions||this.getDimensions(),n.graphDimensions||this.getGraphDimensions(),n.padding||this.getStagePadding()):this.matrix,s=Lr(a,e);return{x:(1+s.x)*this.width/2,y:(1-s.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!n.cameraState||!!n.viewportDimensions||!n.graphDimensions,a=n.matrix?n.matrix:o?tt(n.cameraState||this.camera.getState(),n.viewportDimensions||this.getDimensions(),n.graphDimensions||this.getGraphDimensions(),n.padding||this.getStagePadding(),!0):this.invMatrix,s=Lr(a,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),s}},{key:"viewportToGraph",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(e,n))}},{key:"graphToViewport",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(e),n)}},{key:"getGraphToViewportRatio",value:function(){var e={x:0,y:0},n={x:1,y:1},o=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),a=this.graphToViewport(e),s=this.graphToViewport(n),u=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2));return u/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(e){return this.customBBox=e,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var n in this.nodePrograms)this.nodePrograms[n].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var a in this.edgePrograms)this.edgePrograms[a].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var s in this.elements)this.killLayer(s)}},{key:"scaleSize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return e/this.settings.zoomToSizeRatioFunction(n)*(this.getSetting("itemSizesReference")==="positions"?n*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var e={};for(var n in this.elements)this.elements[n]instanceof HTMLCanvasElement&&(e[n]=this.elements[n]);return e}}]),r}(Ir),$s=Us,je={},er,_n;function Ye(){if(_n)return er;_n=1;function i(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function r(t,e){t=t||{};var n={};for(var o in e){var a=t[o],s=e[o];if(!i(s)){n[o]=r(a,s);continue}a===void 0?n[o]=s:n[o]=a}return n}return er=r,er}var tr,wn;function Ms(){if(wn)return tr;wn=1;function i(t){return function(e,n){return e+Math.floor(t()*(n-e+1))}}var r=i(Math.random);return r.createRandom=i,tr=r,tr}var rr,En;function Bs(){if(En)return rr;En=1;var i=Ms().createRandom;function r(e){var n=i(e);return function(o){for(var a=o.length,s=a-1,u=-1;++u<a;){var c=n(u,s),d=o[c];o[c]=o[u],o[u]=d}}}var t=r(Math.random);return t.createShuffleInPlace=r,rr=t,rr}var nr,xn;function js(){if(xn)return nr;xn=1;var i=Ye(),r=de(),t=Bs(),e={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function n(g,b,y,E,S){this.wrappedCircle=S||null,this.children={},this.countChildren=0,this.id=g||null,this.next=null,this.previous=null,this.x=b||null,this.y=y||null,S?this.r=1010101:this.r=E||999}n.prototype.hasChildren=function(){return this.countChildren>0},n.prototype.addChild=function(g,b){this.children[g]=b,++this.countChildren},n.prototype.getChild=function(g){if(!this.children.hasOwnProperty(g)){var b=new n;this.children[g]=b,++this.countChildren}return this.children[g]},n.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var g=this;for(var b in g.children){var y=g.children[b];y.x+=g.x,y.y+=g.y,y.applyPositionToChildren()}}};function o(g,b,y){for(var E in b.children){var S=b.children[E];S.hasChildren()?o(g,S,y):y[S.id]={x:S.x,y:S.y}}}function a(g,b){var y=g.r-b.r,E=b.x-g.x,S=b.y-g.y;return y<0||y*y<E*E+S*S}function s(g,b){var y=g.r-b.r+1e-6,E=b.x-g.x,S=b.y-g.y;return y>0&&y*y>E*E+S*S}function u(g,b){for(var y=0;y<b.length;++y)if(!s(g,b[y]))return!1;return!0}function c(g){return new n(null,g.x,g.y,g.r)}function d(g,b){var y=g.x,E=g.y,S=g.r,L=b.x,v=b.y,I=b.r,U=L-y,D=v-E,T=I-S,$=Math.sqrt(U*U+D*D);return new n(null,(y+L+U/$*T)/2,(E+v+D/$*T)/2,($+S+I)/2)}function l(g,b,y){var E=g.x,S=g.y,L=g.r,v=b.x,I=b.y,U=b.r,D=y.x,T=y.y,$=y.r,M=E-v,X=E-D,q=S-I,V=S-T,P=U-L,le=$-L,Q=E*E+S*S-L*L,xe=Q-v*v-I*I+U*U,he=Q-D*D-T*T+$*$,fe=X*q-M*V,re=(q*he-V*xe)/(fe*2)-E,K=(V*P-q*le)/fe,Y=(X*xe-M*he)/(fe*2)-S,Z=(M*le-X*P)/fe,ae=K*K+Z*Z-1,W=2*(L+re*K+Y*Z),B=re*re+Y*Y-L*L,G=-(ae?(W+Math.sqrt(W*W-4*ae*B))/(2*ae):B/W);return new n(null,E+re+K*G,S+Y+Z*G,G)}function h(g){switch(g.length){case 1:return c(g[0]);case 2:return d(g[0],g[1]);case 3:return l(g[0],g[1],g[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+g.length)}}function f(g,b){var y,E;if(u(b,g))return[b];for(y=0;y<g.length;++y)if(a(b,g[y])&&u(d(g[y],b),g))return[g[y],b];for(y=0;y<g.length-1;++y)for(E=y+1;E<g.length;++E)if(a(d(g[y],g[E]),b)&&a(d(g[y],b),g[E])&&a(d(g[E],b),g[y])&&u(l(g[y],g[E],b),g))return[g[y],g[E],b];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function _(g){var b=g.wrappedCircle,y=g.next.wrappedCircle,E=b.r+y.r,S=(b.x*y.r+y.x*b.r)/E,L=(b.y*y.r+y.y*b.r)/E;return S*S+L*L}function x(g,b){var y=0,E=g.slice(),S=g.length,L=[],v,I;for(b(E);y<S;)v=E[y],I&&s(I,v)?++y:(L=f(L,v),I=h(L),y=0);return I}function C(g,b,y){var E=g.x-b.x,S,L,v=g.y-b.y,I,U,D=E*E+v*v;D?(L=b.r+y.r,L*=L,U=g.r+y.r,U*=U,L>U?(S=(D+U-L)/(2*D),I=Math.sqrt(Math.max(0,U/D-S*S)),y.x=g.x-S*E-I*v,y.y=g.y-S*v+I*E):(S=(D+L-U)/(2*D),I=Math.sqrt(Math.max(0,L/D-S*S)),y.x=b.x+S*E-I*v,y.y=b.y+S*v+I*E)):(y.x=b.x+y.r,y.y=b.y)}function k(g,b){var y=g.r+b.r-1e-6,E=b.x-g.x,S=b.y-g.y;return y>0&&y*y>E*E+S*S}function w(g,b){var y=g.length;if(y===0)return 0;var E,S,L,v,I,U,D,T,$,M;if(E=g[0],E.x=0,E.y=0,y<=1)return E.r;if(S=g[1],E.x=-S.r,S.x=E.r,S.y=0,y<=2)return E.r+S.r;L=g[2],C(S,E,L),E=new n(null,null,null,null,E),S=new n(null,null,null,null,S),L=new n(null,null,null,null,L),E.next=L.previous=S,S.next=E.previous=L,L.next=S.previous=E;e:for(U=3;U<y;++U){L=g[U],C(E.wrappedCircle,S.wrappedCircle,L),L=new n(null,null,null,null,L),D=S.next,T=E.previous,$=S.wrappedCircle.r,M=E.wrappedCircle.r;do if($<=M){if(k(D.wrappedCircle,L.wrappedCircle)){S=D,E.next=S,S.previous=E,--U;continue e}$+=D.wrappedCircle.r,D=D.next}else{if(k(T.wrappedCircle,L.wrappedCircle)){E=T,E.next=S,S.previous=E,--U;continue e}M+=T.wrappedCircle.r,T=T.previous}while(D!==T.next);for(L.previous=E,L.next=S,E.next=S.previous=S=L,v=_(E);(L=L.next)!==S;)(I=_(L))<v&&(E=L,v=I);S=E.next}E=[S.wrappedCircle],L=S;for(var X=1e4;(L=L.next)!==S&&--X!==0;)E.push(L.wrappedCircle);for(L=x(E,b),U=0;U<y;++U)E=g[U],E.x-=L.x,E.y-=L.y;return L.r}function A(g,b){var y=0;if(g.hasChildren()){for(var E in g.children){var S=g.children[E];S.hasChildren()&&(S.r=A(S,b))}y=w(Object.values(g.children),b)}return y}function m(g,b){A(g,b);for(var y in g.children){var E=g.children[y];E.applyPositionToChildren()}}function p(g,b,y){if(!r(b))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");y=i(y,e);var E={},S={},L=b.nodes(),v=y.center,I=y.hierarchyAttributes,U=t.createShuffleInPlace(y.rng),D=y.scale,T=new n;b.forEachNode(function(P,le){var Q=le.size?le.size:1,xe=new n(P,null,null,Q),he=T;I.forEach(function(fe){var re=le[fe];he=he.getChild(re)}),he.addChild(P,xe)}),m(T,U),o(b,T,E);var $=L.length,M,X,q;for(q=0;q<$;q++){var V=L[q];M=v+D*E[V].x,X=v+D*E[V].y,S[V]={x:M,y:X},g&&(b.setNodeAttribute(V,y.attributes.x,M),b.setNodeAttribute(V,y.attributes.y,X))}return S}var R=p.bind(null,!1);return R.assign=p.bind(null,!0),nr=R,nr}var ir,Tn;function Ws(){if(Tn)return ir;Tn=1;var i=Ye(),r=de(),t={dimensions:["x","y"],center:.5,scale:1};function e(o,a,s){if(!r(a))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");s=i(s,t);var u=s.dimensions;if(!Array.isArray(u)||u.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=s.center,d=s.scale,l=Math.PI*2,h=(c-.5)*d,f=a.order,_=u[0],x=u[1];function C(A,m){return m[_]=d*Math.cos(A*l/f)+h,m[x]=d*Math.sin(A*l/f)+h,m}var k=0;if(!o){var w={};return a.forEachNode(function(A){w[A]=C(k++,{})}),w}a.updateEachNodeAttributes(function(A,m){return C(k++,m),m},{attributes:u})}var n=e.bind(null,!1);return n.assign=e.bind(null,!0),ir=n,ir}var or,An;function Hs(){if(An)return or;An=1;var i=Ye(),r=de(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function e(o,a,s){if(!r(a))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");s=i(s,t);var u=s.dimensions;if(!Array.isArray(u)||u.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=u.length,d=s.center,l=s.rng,h=s.scale,f=(d-.5)*h;function _(C){for(var k=0;k<c;k++)C[u[k]]=l()*h+f;return C}if(!o){var x={};return a.forEachNode(function(C){x[C]=_({})}),x}a.updateEachNodeAttributes(function(C,k){return _(k),k},{attributes:u})}var n=e.bind(null,!1);return n.assign=e.bind(null,!0),or=n,or}var ar,Rn;function Vs(){if(Rn)return ar;Rn=1;var i=Ye(),r=de(),t=Math.PI/180,e={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function n(a,s,u,c){if(!r(s))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");c=i(c,e),c.degrees&&(u*=t);var d=c.dimensions;if(!Array.isArray(d)||d.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(s.order===0)return a?void 0:{};var l=d[0],h=d[1],f=0,_=0;if(!c.centeredOnZero){var x=1/0,C=-1/0,k=1/0,w=-1/0;s.forEachNode(function(g,b){var y=b[l],E=b[h];y<x&&(x=y),y>C&&(C=y),E<k&&(k=E),E>w&&(w=E)}),f=(x+C)/2,_=(k+w)/2}var A=Math.cos(u),m=Math.sin(u);function p(g){var b=g[l],y=g[h];return g[l]=f+(b-f)*A-(y-_)*m,g[h]=_+(b-f)*m+(y-_)*A,g}if(!a){var R={};return s.forEachNode(function(g,b){var y={};y[l]=b[l],y[h]=b[h],R[g]=p(y)}),R}s.updateEachNodeAttributes(function(g,b){return p(b),b},{attributes:d})}var o=n.bind(null,!1);return o.assign=n.bind(null,!0),ar=o,ar}var Sn;function Xs(){return Sn||(Sn=1,je.circlepack=js(),je.circular=Ws(),je.random=Hs(),je.rotation=Vs()),je}var Pt=Xs(),it={},Cn;function zt(){if(Cn)return it;Cn=1;function i(e){return typeof e!="number"||isNaN(e)?1:e}function r(e,n){var o={},a=function(c){return typeof c>"u"?n:c};typeof n=="function"&&(a=n);var s=function(c){return a(c[e])},u=function(){return a(void 0)};return typeof e=="string"?(o.fromAttributes=s,o.fromGraph=function(c,d){return s(c.getNodeAttributes(d))},o.fromEntry=function(c,d){return s(d)}):typeof e=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},o.fromGraph=function(c,d){return a(e(d,c.getNodeAttributes(d)))},o.fromEntry=function(c,d){return a(e(c,d))}):(o.fromAttributes=u,o.fromGraph=u,o.fromEntry=u),o}function t(e,n){var o={},a=function(c){return typeof c>"u"?n:c};typeof n=="function"&&(a=n);var s=function(c){return a(c[e])},u=function(){return a(void 0)};return typeof e=="string"?(o.fromAttributes=s,o.fromGraph=function(c,d){return s(c.getEdgeAttributes(d))},o.fromEntry=function(c,d){return s(d)},o.fromPartialEntry=o.fromEntry,o.fromMinimalEntry=o.fromEntry):typeof e=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},o.fromGraph=function(c,d){var l=c.extremities(d);return a(e(d,c.getEdgeAttributes(d),l[0],l[1],c.getNodeAttributes(l[0]),c.getNodeAttributes(l[1]),c.isUndirected(d)))},o.fromEntry=function(c,d,l,h,f,_,x){return a(e(c,d,l,h,f,_,x))},o.fromPartialEntry=function(c,d,l,h){return a(e(c,d,l,h))},o.fromMinimalEntry=function(c,d){return a(e(c,d))}):(o.fromAttributes=u,o.fromGraph=u,o.fromEntry=u,o.fromMinimalEntry=u),o}return it.createNodeValueGetter=r,it.createEdgeValueGetter=t,it.createEdgeWeightGetter=function(e){return t(e,i)},it}var sr,Ln;function qs(){if(Ln)return sr;Ln=1;var i=0,r=1,t=2,e=3,n=4,o=5,a=6,s=7,u=8,c=9,d=0,l=1,h=2,f=0,_=1,x=2,C=3,k=4,w=5,A=6,m=7,p=8,R=3,g=10,b=3,y=9,E=10;return sr=function(L,v,I){var U,D,T,$,M,X,q,V,P,le,Q=v.length,xe=I.length,he=L.adjustSizes,fe=L.barnesHutTheta*L.barnesHutTheta,re,K,Y,Z,ae,W,B,G=[];for(T=0;T<Q;T+=g)v[T+n]=v[T+t],v[T+o]=v[T+e],v[T+t]=0,v[T+e]=0;if(L.outboundAttractionDistribution){for(re=0,T=0;T<Q;T+=g)re+=v[T+a];re/=Q/g}if(L.barnesHutOptimize){var Oe=1/0,Ue=-1/0,Fe=1/0,$e=-1/0,ge,Me,Ut;for(T=0;T<Q;T+=g)Oe=Math.min(Oe,v[T+i]),Ue=Math.max(Ue,v[T+i]),Fe=Math.min(Fe,v[T+r]),$e=Math.max($e,v[T+r]);var at=Ue-Oe,st=$e-Fe;for(at>st?(Fe-=(at-st)/2,$e=Fe+at):(Oe-=(st-at)/2,Ue=Oe+st),G[0+f]=-1,G[0+_]=(Oe+Ue)/2,G[0+x]=(Fe+$e)/2,G[0+C]=Math.max(Ue-Oe,$e-Fe),G[0+k]=-1,G[0+w]=-1,G[0+A]=0,G[0+m]=0,G[0+p]=0,U=1,T=0;T<Q;T+=g)for(D=0,Ut=R;;)if(G[D+w]>=0){v[T+i]<G[D+_]?v[T+r]<G[D+x]?ge=G[D+w]:ge=G[D+w]+y:v[T+r]<G[D+x]?ge=G[D+w]+y*2:ge=G[D+w]+y*3,G[D+m]=(G[D+m]*G[D+A]+v[T+i]*v[T+a])/(G[D+A]+v[T+a]),G[D+p]=(G[D+p]*G[D+A]+v[T+r]*v[T+a])/(G[D+A]+v[T+a]),G[D+A]+=v[T+a],D=ge;continue}else if(G[D+f]<0){G[D+f]=T;break}else{if(G[D+w]=U*y,V=G[D+C]/2,P=G[D+w],G[P+f]=-1,G[P+_]=G[D+_]-V,G[P+x]=G[D+x]-V,G[P+C]=V,G[P+k]=P+y,G[P+w]=-1,G[P+A]=0,G[P+m]=0,G[P+p]=0,P+=y,G[P+f]=-1,G[P+_]=G[D+_]-V,G[P+x]=G[D+x]+V,G[P+C]=V,G[P+k]=P+y,G[P+w]=-1,G[P+A]=0,G[P+m]=0,G[P+p]=0,P+=y,G[P+f]=-1,G[P+_]=G[D+_]+V,G[P+x]=G[D+x]-V,G[P+C]=V,G[P+k]=P+y,G[P+w]=-1,G[P+A]=0,G[P+m]=0,G[P+p]=0,P+=y,G[P+f]=-1,G[P+_]=G[D+_]+V,G[P+x]=G[D+x]+V,G[P+C]=V,G[P+k]=G[D+k],G[P+w]=-1,G[P+A]=0,G[P+m]=0,G[P+p]=0,U+=4,v[G[D+f]+i]<G[D+_]?v[G[D+f]+r]<G[D+x]?ge=G[D+w]:ge=G[D+w]+y:v[G[D+f]+r]<G[D+x]?ge=G[D+w]+y*2:ge=G[D+w]+y*3,G[D+A]=v[G[D+f]+a],G[D+m]=v[G[D+f]+i],G[D+p]=v[G[D+f]+r],G[ge+f]=G[D+f],G[D+f]=-1,v[T+i]<G[D+_]?v[T+r]<G[D+x]?Me=G[D+w]:Me=G[D+w]+y:v[T+r]<G[D+x]?Me=G[D+w]+y*2:Me=G[D+w]+y*3,ge===Me)if(Ut--){D=ge;continue}else{Ut=R;break}G[Me+f]=T;break}}if(L.barnesHutOptimize)for(K=L.scalingRatio,T=0;T<Q;T+=g)for(D=0;;)if(G[D+w]>=0)if(W=Math.pow(v[T+i]-G[D+m],2)+Math.pow(v[T+r]-G[D+p],2),le=G[D+C],4*le*le/W<fe){if(Y=v[T+i]-G[D+m],Z=v[T+r]-G[D+p],he===!0?W>0?(B=K*v[T+a]*G[D+A]/W,v[T+t]+=Y*B,v[T+e]+=Z*B):W<0&&(B=-K*v[T+a]*G[D+A]/Math.sqrt(W),v[T+t]+=Y*B,v[T+e]+=Z*B):W>0&&(B=K*v[T+a]*G[D+A]/W,v[T+t]+=Y*B,v[T+e]+=Z*B),D=G[D+k],D<0)break;continue}else{D=G[D+w];continue}else{if(X=G[D+f],X>=0&&X!==T&&(Y=v[T+i]-v[X+i],Z=v[T+r]-v[X+r],W=Y*Y+Z*Z,he===!0?W>0?(B=K*v[T+a]*v[X+a]/W,v[T+t]+=Y*B,v[T+e]+=Z*B):W<0&&(B=-K*v[T+a]*v[X+a]/Math.sqrt(W),v[T+t]+=Y*B,v[T+e]+=Z*B):W>0&&(B=K*v[T+a]*v[X+a]/W,v[T+t]+=Y*B,v[T+e]+=Z*B)),D=G[D+k],D<0)break;continue}else for(K=L.scalingRatio,$=0;$<Q;$+=g)for(M=0;M<$;M+=g)Y=v[$+i]-v[M+i],Z=v[$+r]-v[M+r],he===!0?(W=Math.sqrt(Y*Y+Z*Z)-v[$+u]-v[M+u],W>0?(B=K*v[$+a]*v[M+a]/W/W,v[$+t]+=Y*B,v[$+e]+=Z*B,v[M+t]-=Y*B,v[M+e]-=Z*B):W<0&&(B=100*K*v[$+a]*v[M+a],v[$+t]+=Y*B,v[$+e]+=Z*B,v[M+t]-=Y*B,v[M+e]-=Z*B)):(W=Math.sqrt(Y*Y+Z*Z),W>0&&(B=K*v[$+a]*v[M+a]/W/W,v[$+t]+=Y*B,v[$+e]+=Z*B,v[M+t]-=Y*B,v[M+e]-=Z*B));for(P=L.gravity/L.scalingRatio,K=L.scalingRatio,T=0;T<Q;T+=g)B=0,Y=v[T+i],Z=v[T+r],W=Math.sqrt(Math.pow(Y,2)+Math.pow(Z,2)),L.strongGravityMode?W>0&&(B=K*v[T+a]*P):W>0&&(B=K*v[T+a]*P/W),v[T+t]-=Y*B,v[T+e]-=Z*B;for(K=1*(L.outboundAttractionDistribution?re:1),q=0;q<xe;q+=b)$=I[q+d],M=I[q+l],V=I[q+h],ae=Math.pow(V,L.edgeWeightInfluence),Y=v[$+i]-v[M+i],Z=v[$+r]-v[M+r],he===!0?(W=Math.sqrt(Y*Y+Z*Z)-v[$+u]-v[M+u],L.linLogMode?L.outboundAttractionDistribution?W>0&&(B=-K*ae*Math.log(1+W)/W/v[$+a]):W>0&&(B=-K*ae*Math.log(1+W)/W):L.outboundAttractionDistribution?W>0&&(B=-K*ae/v[$+a]):W>0&&(B=-K*ae)):(W=Math.sqrt(Math.pow(Y,2)+Math.pow(Z,2)),L.linLogMode?L.outboundAttractionDistribution?W>0&&(B=-K*ae*Math.log(1+W)/W/v[$+a]):W>0&&(B=-K*ae*Math.log(1+W)/W):L.outboundAttractionDistribution?(W=1,B=-K*ae/v[$+a]):(W=1,B=-K*ae)),W>0&&(v[$+t]+=Y*B,v[$+e]+=Z*B,v[M+t]-=Y*B,v[M+e]-=Z*B);var ut,Ke,ct,Ie,dt,lt;if(he===!0)for(T=0;T<Q;T+=g)v[T+c]!==1&&(ut=Math.sqrt(Math.pow(v[T+t],2)+Math.pow(v[T+e],2)),ut>E&&(v[T+t]=v[T+t]*E/ut,v[T+e]=v[T+e]*E/ut),Ke=v[T+a]*Math.sqrt((v[T+n]-v[T+t])*(v[T+n]-v[T+t])+(v[T+o]-v[T+e])*(v[T+o]-v[T+e])),ct=Math.sqrt((v[T+n]+v[T+t])*(v[T+n]+v[T+t])+(v[T+o]+v[T+e])*(v[T+o]+v[T+e]))/2,Ie=.1*Math.log(1+ct)/(1+Math.sqrt(Ke)),dt=v[T+i]+v[T+t]*(Ie/L.slowDown),v[T+i]=dt,lt=v[T+r]+v[T+e]*(Ie/L.slowDown),v[T+r]=lt);else for(T=0;T<Q;T+=g)v[T+c]!==1&&(Ke=v[T+a]*Math.sqrt((v[T+n]-v[T+t])*(v[T+n]-v[T+t])+(v[T+o]-v[T+e])*(v[T+o]-v[T+e])),ct=Math.sqrt((v[T+n]+v[T+t])*(v[T+n]+v[T+t])+(v[T+o]+v[T+e])*(v[T+o]+v[T+e]))/2,Ie=v[T+s]*Math.log(1+ct)/(1+Math.sqrt(Ke)),v[T+s]=Math.min(1,Math.sqrt(Ie*(Math.pow(v[T+t],2)+Math.pow(v[T+e],2))/(1+Math.sqrt(Ke)))),dt=v[T+i]+v[T+t]*(Ie/L.slowDown),v[T+i]=dt,lt=v[T+r]+v[T+e]*(Ie/L.slowDown),v[T+r]=lt);return{}},sr}var Ae={},Dn;function Zs(){if(Dn)return Ae;Dn=1;var i=10,r=3;return Ae.assign=function(t){t=t||{};var e=Array.prototype.slice.call(arguments).slice(1),n,o,a;for(n=0,a=e.length;n<a;n++)if(e[n])for(o in e[n])t[o]=e[n][o];return t},Ae.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Ae.graphToByteArrays=function(t,e){var n=t.order,o=t.size,a={},s,u=new Float32Array(n*i),c=new Float32Array(o*r);return s=0,t.forEachNode(function(d,l){a[d]=s,u[s]=l.x,u[s+1]=l.y,u[s+2]=0,u[s+3]=0,u[s+4]=0,u[s+5]=0,u[s+6]=1,u[s+7]=1,u[s+8]=l.size||1,u[s+9]=l.fixed?1:0,s+=i}),s=0,t.forEachEdge(function(d,l,h,f,_,x,C){var k=a[h],w=a[f],A=e(d,l,h,f,_,x,C);u[k+6]+=A,u[w+6]+=A,c[s]=k,c[s+1]=w,c[s+2]=A,s+=r}),{nodes:u,edges:c}},Ae.assignLayoutChanges=function(t,e,n){var o=0;t.updateEachNodeAttributes(function(a,s){return s.x=e[o],s.y=e[o+1],o+=i,n?n(a,s):s})},Ae.readGraphPositions=function(t,e){var n=0;t.forEachNode(function(o,a){e[n]=a.x,e[n+1]=a.y,n+=i})},Ae.collectLayoutChanges=function(t,e,n){for(var o=t.nodes(),a={},s=0,u=0,c=e.length;s<c;s+=i){if(n){var d=Object.assign({},t.getNodeAttributes(o[u]));d.x=e[s],d.y=e[s+1],d=n(o[u],d),a[o[u]]={x:d.x,y:d.y}}else a[o[u]]={x:e[s],y:e[s+1]};u++}return a},Ae.createWorker=function(e){var n=window.URL||window.webkitURL,o=e.toString(),a=n.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),s=new Worker(a);return n.revokeObjectURL(a),s},Ae}var ur,kn;function Ys(){return kn||(kn=1,ur={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),ur}var cr,Gn;function Ks(){if(Gn)return cr;Gn=1;var i=de(),r=zt().createEdgeWeightGetter,t=qs(),e=Zs(),n=Ys();function o(u,c,d){if(!i(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof d=="number"&&(d={iterations:d});var l=d.iterations;if(typeof l!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(l<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=r("getEdgeWeight"in d?d.getEdgeWeight:"weight").fromEntry,f=typeof d.outputReducer=="function"?d.outputReducer:null,_=e.assign({},n,d.settings),x=e.validateSettings(_);if(x)throw new Error("graphology-layout-forceatlas2: "+x.message);var C=e.graphToByteArrays(c,h),k;for(k=0;k<l;k++)t(_,C.nodes,C.edges);if(u){e.assignLayoutChanges(c,C.nodes,f);return}return e.collectLayoutChanges(c,C.nodes)}function a(u){var c=typeof u=="number"?u:u.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),s.inferSettings=a,cr=s,cr}var Js=Ks();const Nn=Ne(Js);var dr,On;function Qs(){if(On)return dr;On=1;const{createNodeValueGetter:i,createEdgeValueGetter:r}=zt();return dr=function(e,n,o){const{nodeXAttribute:a,nodeYAttribute:s}=o,{attraction:u,repulsion:c,gravity:d,inertia:l,maxMove:h}=o.settings;let{shouldSkipNode:f,shouldSkipEdge:_,isNodeFixed:x}=o;x=i(x),f=i(f,!1),_=r(_,!1);const C=e.filterNodes((A,m)=>!f.fromEntry(A,m)),k=C.length;for(let A=0;A<k;A++){const m=C[A],p=e.getNodeAttributes(m),R=n[m];R?n[m]={dx:R.dx*l,dy:R.dy*l,x:p[a]||0,y:p[s]||0}:n[m]={dx:0,dy:0,x:p[a]||0,y:p[s]||0}}if(c)for(let A=0;A<k;A++){const m=C[A],p=n[m];for(let R=A+1;R<k;R++){const g=C[R],b=n[g],y=b.x-p.x,E=b.y-p.y,S=Math.sqrt(y*y+E*E)||1,L=c/S*y,v=c/S*E;p.dx-=L,p.dy-=v,b.dx+=L,b.dy+=v}}if(u&&e.forEachEdge((A,m,p,R,g,b,y)=>{if(p===R||f.fromEntry(p,g)||f.fromEntry(R,b)||_.fromEntry(A,m,p,R,g,b,y))return;const E=n[p],S=n[R],L=S.x-E.x,v=S.y-E.y,I=Math.sqrt(L*L+v*v)||1,U=u*I*L,D=u*I*v;E.dx+=U,E.dy+=D,S.dx-=U,S.dy-=D}),d)for(let A=0;A<k;A++){const m=C[A],p=n[m],{x:R,y:g}=p,b=Math.sqrt(R*R+g*g)||1;n[m].dx-=R*d*b,n[m].dy-=g*d*b}const w=!1;for(let A=0;A<k;A++){const m=C[A],p=n[m],R=Math.sqrt(p.dx*p.dx+p.dy*p.dy);R>h&&(p.dx*=h/R,p.dy*=h/R),x.fromGraph(e,m)?p.fixed=!0:(p.x+=p.dx,p.y+=p.dy,p.fixed=!1)}return{converged:w}},dr}var bt={},Fn;function eu(){return Fn||(Fn=1,bt.assignLayoutChanges=function(i,r,t){const{nodeXAttribute:e,nodeYAttribute:n}=t;i.updateEachNodeAttributes((o,a)=>{const s=r[o];return!s||s.fixed||(a[e]=s.x,a[n]=s.y),a},{attributes:["x","y"]})},bt.collectLayoutChanges=function(i){const r={};for(const t in i){const e=i[t];r[t]={x:e.x,y:e.y}}return r}),bt}var lr,In;function tu(){return In||(In=1,lr={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),lr}var hr,Pn;function ru(){if(Pn)return hr;Pn=1;const i=de(),r=Ye(),t=Qs(),e=eu(),n=tu();function o(s,u,c){if(!i(u))throw new Error("graphology-layout-force: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};const d=c.maxIterations;if(c=r(c,n),typeof d!="number"||d<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");const l={};let h=null,f;for(f=0;f<d&&(h=t(u,l,c),!h.converged);f++);if(s){e.assignLayoutChanges(u,l,c);return}return e.collectLayoutChanges(l)}const a=o.bind(null,!1);return a.assign=o.bind(null,!0),hr=a,hr}var nu=ru();const iu=Ne(nu);function ou(i,r){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var e=t.call(i,r||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function Xi(i){var r=ou(i,"string");return typeof r=="symbol"?r:r+""}function qi(i,r,t){return(r=Xi(r))in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}function zn(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function Dt(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?zn(Object(t),!0).forEach(function(e){qi(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):zn(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function au(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function su(i,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,Xi(e.key),e)}}function uu(i,r,t){return r&&su(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),i}function kt(i){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kt(i)}function Zi(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zi=function(){return!!i})()}function Yi(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function cu(i,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yi(i)}function du(i,r,t){return r=kt(r),cu(i,Zi()?Reflect.construct(r,t||[],kt(i).constructor):r.apply(i,t))}function Dr(i,r){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dr(i,r)}function lu(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&Dr(i,r)}function kr(i,r){(r==null||r>i.length)&&(r=i.length);for(var t=0,e=Array(r);t<r;t++)e[t]=i[t];return e}function hu(i){if(Array.isArray(i))return kr(i)}function fu(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function gu(i,r){if(i){if(typeof i=="string")return kr(i,r);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kr(i,r):void 0}}function pu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fr(i){return hu(i)||fu(i)||gu(i)||pu()}function Ki(i,r,t,e){var n=Math.pow(1-i,2)*r.x+2*(1-i)*i*t.x+Math.pow(i,2)*e.x,o=Math.pow(1-i,2)*r.y+2*(1-i)*i*t.y+Math.pow(i,2)*e.y;return{x:n,y:o}}function vu(i,r,t){for(var e=20,n=0,o=i,a=0;a<e;a++){var s=Ki((a+1)/e,i,r,t);n+=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),o=s}return n}function mu(i){var r=i.curvatureAttribute,t=i.defaultCurvature,e=i.keepLabelUpright,n=e===void 0?!0:e;return function(o,a,s,u,c){var d=c.edgeLabelSize,l=a[r]||t,h=c.edgeLabelFont,f=c.edgeLabelWeight,_=c.edgeLabelColor.attribute?a[c.edgeLabelColor.attribute]||c.edgeLabelColor.color||"#000":c.edgeLabelColor.color,x=a.label;if(x){o.fillStyle=_,o.font="".concat(f," ").concat(d,"px ").concat(h);var C=!n||s.x<u.x,k=C?s.x:u.x,w=C?s.y:u.y,A=C?u.x:s.x,m=C?u.y:s.y,p=(k+A)/2,R=(w+m)/2,g=A-k,b=m-w,y=Math.sqrt(Math.pow(g,2)+Math.pow(b,2)),E=C?1:-1,S=p+b*l*E,L=R-g*l*E,v=a.size*.7+5,I={x:L-w,y:-(S-k)},U=Math.sqrt(Math.pow(I.x,2)+Math.pow(I.y,2)),D={x:m-L,y:-(A-S)},T=Math.sqrt(Math.pow(D.x,2)+Math.pow(D.y,2));k+=v*I.x/U,w+=v*I.y/U,A+=v*D.x/T,m+=v*D.y/T,S+=v*b/y,L-=v*g/y;var $={x:S,y:L},M={x:k,y:w},X={x:A,y:m},q=vu(M,$,X);if(!(q<s.size+u.size)){var V=o.measureText(x).width,P=q-s.size-u.size;if(V>P){var le="…";for(x=x+le,V=o.measureText(x).width;V>P&&x.length>1;)x=x.slice(0,-2)+le,V=o.measureText(x).width;if(x.length<4)return}for(var Q={},xe=0,he=x.length;xe<he;xe++){var fe=x[xe];Q[fe]||(Q[fe]=o.measureText(fe).width*(1+l*.35))}for(var re=.5-V/q/2,K=0,Y=x.length;K<Y;K++){var Z=x[K],ae=Ki(re,M,$,X),W=2*(1-re)*(S-k)+2*re*(A-S),B=2*(1-re)*(L-w)+2*re*(m-L),G=Math.atan2(B,W);o.save(),o.translate(ae.x,ae.y),o.rotate(G),o.fillText(Z,0,0),o.restore(),re+=Q[Z]/q}}}}}function yu(i){var r=i.arrowHead,t=(r==null?void 0:r.extremity)==="target"||(r==null?void 0:r.extremity)==="both",e=(r==null?void 0:r.extremity)==="source"||(r==null?void 0:r.extremity)==="both",n=`
precision highp float;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`.concat(t?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(e?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(r?`
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;`:"",`

float det(vec2 a, vec2 b) {
  return a.x * b.y - b.x * a.y;
}

vec2 getDistanceVector(vec2 b0, vec2 b1, vec2 b2) {
  float a = det(b0, b2), b = 2.0 * det(b1, b0), d = 2.0 * det(b2, b1);
  float f = b * d - a * a;
  vec2 d21 = b2 - b1, d10 = b1 - b0, d20 = b2 - b0;
  vec2 gf = 2.0 * (b * d21 + d * d10 + a * d20);
  gf = vec2(gf.y, -gf.x);
  vec2 pp = -f * gf / dot(gf, gf);
  vec2 d0p = b0 - pp;
  float ap = det(d0p, d20), bp = 2.0 * det(d10, d0p);
  float t = clamp((ap + bp) / (2.0 * a + b + d), 0.0, 1.0);
  return mix(mix(b0, b1, t), mix(b1, b2, t), t);
}

float distToQuadraticBezierCurve(vec2 p, vec2 b0, vec2 b1, vec2 b2) {
  return length(getDistanceVector(b0 - p, b1 - p, b2 - p));
}

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = distToQuadraticBezierCurve(gl_FragCoord.xy, v_cpA, v_cpB, v_cpC);
  float thickness = v_thickness;
`).concat(t?`
  float distToTarget = length(gl_FragCoord.xy - v_targetPoint);
  float targetArrowLength = v_targetSize + thickness * u_lengthToThicknessRatio;
  if (distToTarget < targetArrowLength) {
    thickness = (distToTarget - v_targetSize) / (targetArrowLength - v_targetSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`
`).concat(e?`
  float distToSource = length(gl_FragCoord.xy - v_sourcePoint);
  float sourceArrowLength = v_sourceSize + thickness * u_lengthToThicknessRatio;
  if (distToSource < sourceArrowLength) {
    thickness = (distToSource - v_sourceSize) / (sourceArrowLength - v_sourceSize) * u_widenessToThicknessRatio * thickness;
  }`:"",`

  float halfThickness = thickness / 2.0;
  if (dist < halfThickness) {
    #ifdef PICKING_MODE
    gl_FragColor = v_color;
    #else
    float t = smoothstep(
      halfThickness - v_feather,
      halfThickness,
      dist
    );

    gl_FragColor = mix(v_color, transparent, t);
    #endif
  } else {
    gl_FragColor = transparent;
  }
}
`);return n}function bu(i){var r=i.arrowHead,t=(r==null?void 0:r.extremity)==="target"||(r==null?void 0:r.extremity)==="both",e=(r==null?void 0:r.extremity)==="source"||(r==null?void 0:r.extremity)==="both",n=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute float a_direction;
attribute float a_thickness;
attribute vec2 a_source;
attribute vec2 a_target;
attribute float a_current;
attribute float a_curvature;
`.concat(t?`attribute float a_targetSize;
`:"",`
`).concat(e?`attribute float a_sourceSize;
`:"",`

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform vec2 u_dimensions;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying float v_thickness;
varying float v_feather;
varying vec2 v_cpA;
varying vec2 v_cpB;
varying vec2 v_cpC;
`).concat(t?`
varying float v_targetSize;
varying vec2 v_targetPoint;`:"",`
`).concat(e?`
varying float v_sourceSize;
varying vec2 v_sourcePoint;`:"",`
`).concat(r?`
uniform float u_widenessToThicknessRatio;`:"",`

const float bias = 255.0 / 254.0;
const float epsilon = 0.7;

vec2 clipspaceToViewport(vec2 pos, vec2 dimensions) {
  return vec2(
    (pos.x + 1.0) * dimensions.x / 2.0,
    (pos.y + 1.0) * dimensions.y / 2.0
  );
}

vec2 viewportToClipspace(vec2 pos, vec2 dimensions) {
  return vec2(
    pos.x / dimensions.x * 2.0 - 1.0,
    pos.y / dimensions.y * 2.0 - 1.0
  );
}

void main() {
  float minThickness = u_minEdgeThickness;

  // Selecting the correct position
  // Branchless "position = a_source if a_current == 1.0 else a_target"
  vec2 position = a_source * max(0.0, a_current) + a_target * max(0.0, 1.0 - a_current);
  position = (u_matrix * vec3(position, 1)).xy;

  vec2 source = (u_matrix * vec3(a_source, 1)).xy;
  vec2 target = (u_matrix * vec3(a_target, 1)).xy;

  vec2 viewportPosition = clipspaceToViewport(position, u_dimensions);
  vec2 viewportSource = clipspaceToViewport(source, u_dimensions);
  vec2 viewportTarget = clipspaceToViewport(target, u_dimensions);

  vec2 delta = viewportTarget.xy - viewportSource.xy;
  float len = length(delta);
  vec2 normal = vec2(-delta.y, delta.x) * a_direction;
  vec2 unitNormal = normal / len;
  float boundingBoxThickness = len * a_curvature;

  float curveThickness = max(minThickness, a_thickness / u_sizeRatio);
  v_thickness = curveThickness * u_pixelRatio;
  v_feather = u_feather;

  v_cpA = viewportSource;
  v_cpB = 0.5 * (viewportSource + viewportTarget) + unitNormal * a_direction * boundingBoxThickness;
  v_cpC = viewportTarget;

  vec2 viewportOffsetPosition = (
    viewportPosition +
    unitNormal * (boundingBoxThickness / 2.0 + sign(boundingBoxThickness) * (`).concat(r?"curveThickness * u_widenessToThicknessRatio":"curveThickness",` + epsilon)) *
    max(0.0, a_direction) // NOTE: cutting the bounding box in half to avoid overdraw
  );

  position = viewportToClipspace(viewportOffsetPosition, u_dimensions);
  gl_Position = vec4(position, 0, 1);
    
`).concat(t?`
  v_targetSize = a_targetSize * u_pixelRatio / u_sizeRatio;
  v_targetPoint = viewportTarget;
`:"",`
`).concat(e?`
  v_sourceSize = a_sourceSize * u_pixelRatio / u_sizeRatio;
  v_sourcePoint = viewportSource;
`:"",`

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`);return n}var Ji=.25,_u={arrowHead:null,curvatureAttribute:"curvature",defaultCurvature:Ji},Qi=WebGLRenderingContext,Un=Qi.UNSIGNED_BYTE,ke=Qi.FLOAT;function zr(i){var r=Dt(Dt({},_u),i||{}),t=r,e=t.arrowHead,n=t.curvatureAttribute,o=t.drawLabel,a=(e==null?void 0:e.extremity)==="target"||(e==null?void 0:e.extremity)==="both",s=(e==null?void 0:e.extremity)==="source"||(e==null?void 0:e.extremity)==="both",u=["u_matrix","u_sizeRatio","u_dimensions","u_pixelRatio","u_feather","u_minEdgeThickness"].concat(fr(e?["u_lengthToThicknessRatio","u_widenessToThicknessRatio"]:[]));return function(c){lu(d,c);function d(){var l;au(this,d);for(var h=arguments.length,f=new Array(h),_=0;_<h;_++)f[_]=arguments[_];return l=du(this,d,[].concat(f)),qi(Yi(l),"drawLabel",o||mu(r)),l}return uu(d,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:bu(r),FRAGMENT_SHADER_SOURCE:yu(r),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:u,ATTRIBUTES:[{name:"a_source",size:2,type:ke},{name:"a_target",size:2,type:ke}].concat(fr(a?[{name:"a_targetSize",size:1,type:ke}]:[]),fr(s?[{name:"a_sourceSize",size:1,type:ke}]:[]),[{name:"a_thickness",size:1,type:ke},{name:"a_curvature",size:1,type:ke},{name:"a_color",size:4,type:Un,normalized:!0},{name:"a_id",size:4,type:Un,normalized:!0}]),CONSTANT_ATTRIBUTES:[{name:"a_current",size:1,type:ke},{name:"a_direction",size:1,type:ke}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[0,-1],[1,1],[1,-1]]}}},{key:"processVisibleItem",value:function(h,f,_,x,C){var k,w=C.size||1,A=_.x,m=_.y,p=x.x,R=x.y,g=Ze(C.color),b=(k=C[n])!==null&&k!==void 0?k:Ji,y=this.array;y[f++]=A,y[f++]=m,y[f++]=p,y[f++]=R,a&&(y[f++]=x.size),s&&(y[f++]=_.size),y[f++]=w,y[f++]=b,y[f++]=g,y[f++]=h}},{key:"setUniforms",value:function(h,f){var _=f.gl,x=f.uniformLocations,C=x.u_matrix,k=x.u_pixelRatio,w=x.u_feather,A=x.u_sizeRatio,m=x.u_dimensions,p=x.u_minEdgeThickness;if(_.uniformMatrix3fv(C,!1,h.matrix),_.uniform1f(k,h.pixelRatio),_.uniform1f(A,h.sizeRatio),_.uniform1f(w,h.antiAliasingFeather),_.uniform2f(m,h.width*h.pixelRatio,h.height*h.pixelRatio),_.uniform1f(p,h.minEdgeThickness),e){var R=x.u_lengthToThicknessRatio,g=x.u_widenessToThicknessRatio;_.uniform1f(R,e.lengthToThicknessRatio),_.uniform1f(g,e.widenessToThicknessRatio)}}}]),d}(Ot)}var wu=zr();zr({arrowHead:It});zr({arrowHead:Dt(Dt({},It),{},{extremity:"both"})});var gr,$n;function Eu(){return $n||($n=1,gr=function(r){return r!==null&&typeof r=="function"&&typeof r.prototype=="object"&&typeof r.prototype.addUndirectedEdgeWithKey=="function"&&typeof r.prototype.dropNode=="function"}),gr}var pr,Mn;function xu(){if(Mn)return pr;Mn=1;var i=Eu();return pr=function(r,t){if(!i(r))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var e="clusterDensity"in t?t.clusterDensity:.5,n=t.rng||Math.random,o=t.order,a=t.size,s=t.clusters;if(typeof e!="number"||e>1||e<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof n!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof o!="number"||o<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof a!="number"||a<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof s!="number"||s<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var u=new r;if(!o)return u;var c=new Array(s),d,l,h;for(h=0;h<s;h++)c[h]=[];for(h=0;h<o;h++)d=n()*s|0,u.addNode(h,{cluster:d}),c[d].push(h);if(!a)return u;var f,_,x;for(h=0;h<a;h++){if(n()<1-e){f=n()*o|0;do _=n()*o|0;while(f===_)}else{if(d=n()*s|0,l=c[d],x=l.length,!x||x<2)continue;f=l[n()*x|0];do _=l[n()*x|0];while(f===_)}u.multi?u.addEdge(f,_):u.mergeEdge(f,_)}return u},pr}var Tu=xu();const Au=Ne(Tu);var Et={exports:{}},Ru=Et.exports,Bn;function Su(){return Bn||(Bn=1,function(i){(function(r,t,e){function n(u){var c=this,d=s();c.next=function(){var l=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=l-(c.c=l|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(u),c.s0<0&&(c.s0+=1),c.s1-=d(u),c.s1<0&&(c.s1+=1),c.s2-=d(u),c.s2<0&&(c.s2+=1),d=null}function o(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function a(u,c){var d=new n(u),l=c&&c.state,h=d.next;return h.int32=function(){return d.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,l&&(typeof l=="object"&&o(l,d),h.state=function(){return o(d,{})}),h}function s(){var u=4022871197,c=function(d){d=String(d);for(var l=0;l<d.length;l++){u+=d.charCodeAt(l);var h=.02519603282416938*u;u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296}return(u>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=a:this.alea=a})(Ru,i)}(Et)),Et.exports}var xt={exports:{}},Cu=xt.exports,jn;function Lu(){return jn||(jn=1,function(i){(function(r,t,e){function n(s){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var l=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^l^l>>>8},s===(s|0)?u.x=s:c+=s;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var c=new n(s),d=u&&u.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,_=(h+f)/(1<<21);while(_===0);return _},l.int32=c.next,l.quick=l,d&&(typeof d=="object"&&o(d,c),l.state=function(){return o(c,{})}),l}t&&t.exports?t.exports=a:this.xor128=a})(Cu,i)}(xt)),xt.exports}var Tt={exports:{}},Du=Tt.exports,Wn;function ku(){return Wn||(Wn=1,function(i){(function(r,t,e){function n(s){var u=this,c="";u.next=function(){var l=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(l^l<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:c+=s;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var c=new n(s),d=u&&u.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,_=(h+f)/(1<<21);while(_===0);return _},l.int32=c.next,l.quick=l,d&&(typeof d=="object"&&o(d,c),l.state=function(){return o(c,{})}),l}t&&t.exports?t.exports=a:this.xorwow=a})(Du,i)}(Tt)),Tt.exports}var At={exports:{}},Gu=At.exports,Hn;function Nu(){return Hn||(Hn=1,function(i){(function(r,t,e){function n(s){var u=this;u.next=function(){var d=u.x,l=u.i,h,f;return h=d[l],h^=h>>>7,f=h^h<<24,h=d[l+1&7],f^=h^h>>>10,h=d[l+3&7],f^=h^h>>>3,h=d[l+4&7],f^=h^h<<7,h=d[l+7&7],h=h^h<<13,f^=h^h<<9,d[l]=f,u.i=l+1&7,f};function c(d,l){var h,f=[];if(l===(l|0))f[0]=l;else for(l=""+l,h=0;h<l.length;++h)f[h&7]=f[h&7]<<15^l.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],d.x=f,d.i=0,h=256;h>0;--h)d.next()}c(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var c=new n(s),d=u&&u.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,_=(h+f)/(1<<21);while(_===0);return _},l.int32=c.next,l.quick=l,d&&(d.x&&o(d,c),l.state=function(){return o(c,{})}),l}t&&t.exports?t.exports=a:this.xorshift7=a})(Gu,i)}(At)),At.exports}var Rt={exports:{}},Ou=Rt.exports,Vn;function Fu(){return Vn||(Vn=1,function(i){(function(r,t,e){function n(s){var u=this;u.next=function(){var d=u.w,l=u.X,h=u.i,f,_;return u.w=d=d+1640531527|0,_=l[h+34&127],f=l[h=h+1&127],_^=_<<13,f^=f<<17,_^=_>>>15,f^=f>>>12,_=l[h]=_^f,u.i=h,_+(d^d>>>16)|0};function c(d,l){var h,f,_,x,C,k=[],w=128;for(l===(l|0)?(f=l,l=null):(l=l+"\0",f=0,w=Math.max(w,l.length)),_=0,x=-32;x<w;++x)l&&(f^=l.charCodeAt((x+32)%l.length)),x===0&&(C=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,x>=0&&(C=C+1640531527|0,h=k[x&127]^=f+C,_=h==0?_+1:0);for(_>=128&&(k[(l&&l.length||0)&127]=-1),_=127,x=4*128;x>0;--x)f=k[_+34&127],h=k[_=_+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,k[_]=f^h;d.w=C,d.X=k,d.i=_}c(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var c=new n(s),d=u&&u.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,_=(h+f)/(1<<21);while(_===0);return _},l.int32=c.next,l.quick=l,d&&(d.X&&o(d,c),l.state=function(){return o(c,{})}),l}t&&t.exports?t.exports=a:this.xor4096=a})(Ou,i)}(Rt)),Rt.exports}var St={exports:{}},Iu=St.exports,Xn;function Pu(){return Xn||(Xn=1,function(i){(function(r,t,e){function n(s){var u=this,c="";u.next=function(){var l=u.b,h=u.c,f=u.d,_=u.a;return l=l<<25^l>>>7^h,h=h-f|0,f=f<<24^f>>>8^_,_=_-l|0,u.b=l=l<<20^l>>>12^h,u.c=h=h-f|0,u.d=f<<16^h>>>16^_,u.a=_-l|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):c+=s;for(var d=0;d<c.length+20;d++)u.b^=c.charCodeAt(d)|0,u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var c=new n(s),d=u&&u.state,l=function(){return(c.next()>>>0)/4294967296};return l.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,_=(h+f)/(1<<21);while(_===0);return _},l.int32=c.next,l.quick=l,d&&(typeof d=="object"&&o(d,c),l.state=function(){return o(c,{})}),l}t&&t.exports?t.exports=a:this.tychei=a})(Iu,i)}(St)),St.exports}var Ct={exports:{}};const zu={},Uu=Object.freeze(Object.defineProperty({__proto__:null,default:zu},Symbol.toStringTag,{value:"Module"})),$u=ao(Uu);var Mu=Ct.exports,qn;function Bu(){return qn||(qn=1,function(i){(function(r,t,e){var n=256,o=6,a=52,s="random",u=e.pow(n,o),c=e.pow(2,a),d=c*2,l=n-1,h;function f(m,p,R){var g=[];p=p==!0?{entropy:!0}:p||{};var b=k(C(p.entropy?[m,A(t)]:m??w(),3),g),y=new _(g),E=function(){for(var S=y.g(o),L=u,v=0;S<c;)S=(S+v)*n,L*=n,v=y.g(1);for(;S>=d;)S/=2,L/=2,v>>>=1;return(S+v)/L};return E.int32=function(){return y.g(4)|0},E.quick=function(){return y.g(4)/4294967296},E.double=E,k(A(y.S),t),(p.pass||R||function(S,L,v,I){return I&&(I.S&&x(I,y),S.state=function(){return x(y,{})}),v?(e[s]=S,L):S})(E,b,"global"in p?p.global:this==e,p.state)}function _(m){var p,R=m.length,g=this,b=0,y=g.i=g.j=0,E=g.S=[];for(R||(m=[R++]);b<n;)E[b]=b++;for(b=0;b<n;b++)E[b]=E[y=l&y+m[b%R]+(p=E[b])],E[y]=p;(g.g=function(S){for(var L,v=0,I=g.i,U=g.j,D=g.S;S--;)L=D[I=l&I+1],v=v*n+D[l&(D[I]=D[U=l&U+L])+(D[U]=L)];return g.i=I,g.j=U,v})(n)}function x(m,p){return p.i=m.i,p.j=m.j,p.S=m.S.slice(),p}function C(m,p){var R=[],g=typeof m,b;if(p&&g=="object")for(b in m)try{R.push(C(m[b],p-1))}catch{}return R.length?R:g=="string"?m:m+"\0"}function k(m,p){for(var R=m+"",g,b=0;b<R.length;)p[l&b]=l&(g^=p[l&b]*19)+R.charCodeAt(b++);return A(p)}function w(){try{var m;return h&&(m=h.randomBytes)?m=m(n):(m=new Uint8Array(n),(r.crypto||r.msCrypto).getRandomValues(m)),A(m)}catch{var p=r.navigator,R=p&&p.plugins;return[+new Date,r,R,r.screen,A(t)]}}function A(m){return String.fromCharCode.apply(0,m)}if(k(e.random(),t),i.exports){i.exports=f;try{h=$u}catch{}}else e["seed"+s]=f})(typeof self<"u"?self:Mu,[],Math)}(Ct)),Ct.exports}var vr,Zn;function ju(){if(Zn)return vr;Zn=1;var i=Su(),r=Lu(),t=ku(),e=Nu(),n=Fu(),o=Pu(),a=Bu();return a.alea=i,a.xor128=r,a.xorwow=t,a.xorshift7=e,a.xor4096=n,a.tychei=o,vr=a,vr}var Wu=ju();const Hu=Ne(Wu);var se={},Te={},mr,Yn;function eo(){if(Yn)return mr;Yn=1;var i=de();return mr=function(t){if(!i(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var e=0,n=0;function o(){e++}function a(){n++}return t.forEachNode(function(s){t.type!=="directed"&&t.forEachUndirectedNeighbor(s,o),t.type!=="undirected"&&t.forEachOutNeighbor(s,a)}),e/2+n},mr}var Kn;function Vu(){if(Kn)return Te;Kn=1;var i=de(),r=eo();function t(a,s){return 2*s/(a*(a-1))}function e(a,s){return s/(a*(a-1))}function n(a,s){var u=a*(a-1);return s/(u+u/2)}function o(a,s,u){var c,d;if(arguments.length>3){if(c=u,d=arguments[3],typeof c!="number"||c<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof d!="number"||d<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!i(u))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");c=u.order,d=u.size,u.multi&&s===!1&&(d=r(u))}if(c<2)return 0;a===null&&(a=u.type),s===null&&(s=u.multi);var l;return a==="undirected"?l=t:a==="directed"?l=e:l=n,l(c,d)}return Te.abstractDensity=o,Te.density=o.bind(null,null,null),Te.directedDensity=o.bind(null,"directed",!1),Te.undirectedDensity=o.bind(null,"undirected",!1),Te.mixedDensity=o.bind(null,"mixed",!1),Te.multiDirectedDensity=o.bind(null,"directed",!0),Te.multiUndirectedDensity=o.bind(null,"undirected",!0),Te.multiMixedDensity=o.bind(null,"mixed",!0),Te}var _t={},Jn;function Xu(){if(Jn)return _t;Jn=1;var i=de();function r(e,n){if(!i(e))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(n),a,s,u,c={};for(u=0;u<o.length;u++)s=o[u],c[s]=[1/0,-1/0];return e.forEachNode(function(d,l){for(u=0;u<o.length;u++)s=o[u],a=l[s],a<c[s][0]&&(c[s][0]=a),a>c[s][1]&&(c[s][1]=a)}),typeof n=="string"?c[n]:c}function t(e,n){if(!i(e))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(n),a,s,u,c={};for(u=0;u<o.length;u++)s=o[u],c[s]=[1/0,-1/0];return e.forEachEdge(function(d,l){for(u=0;u<o.length;u++)s=o[u],a=l[s],a<c[s][0]&&(c[s][0]=a),a>c[s][1]&&(c[s][1]=a)}),typeof n=="string"?c[n]:c}return _t.nodeExtent=r,_t.edgeExtent=t,_t}var ze={},yr,Qn;function qu(){if(Qn)return yr;Qn=1;var i=li(),r=i.ARRAY_BUFFER_SUPPORT,t=i.SYMBOL_SUPPORT;return yr=function(n,o){var a,s,u,c,d;if(!n)throw new Error("obliterator/forEach: invalid iterable.");if(typeof o!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(n)||r&&ArrayBuffer.isView(n)||typeof n=="string"||n.toString()==="[object Arguments]"){for(u=0,c=n.length;u<c;u++)o(n[u],u);return}if(typeof n.forEach=="function"){n.forEach(o);return}if(t&&Symbol.iterator in n&&typeof n.next!="function"&&(n=n[Symbol.iterator]()),typeof n.next=="function"){for(a=n,u=0;d=a.next(),d.done!==!0;)o(d.value,u),u++;return}for(s in n)n.hasOwnProperty(s)&&o(n[s],s)},yr}var br,ei;function Zu(){if(ei)return br;ei=1;var i=Gt(),r=qu();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(e){return this.items.push(e),++this.size},t.prototype.dequeue=function(){if(this.size){var e=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,e}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(e,n){n=arguments.length>1?n:this;for(var o=this.offset,a=0,s=this.items.length;o<s;o++,a++)e.call(n,this.items[o],a,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var e=this.items,n=this.offset;return new i(function(){if(n>=e.length)return{done:!0};var o=e[n];return n++,{value:o,done:!1}})},t.prototype.entries=function(){var e=this.items,n=this.offset,o=0;return new i(function(){if(n>=e.length)return{done:!0};var a=e[n];return n++,{value:[o++,a],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:t,enumerable:!1}),e},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(e){var n=new t;return r(e,function(o){n.enqueue(o)}),n},t.of=function(){return t.from(arguments)},br=t,br}var _r,ti;function Yu(){return ti||(ti=1,_r=function(r,t){var e=t.length;if(e!==0){var n=r.length;r.length+=e;for(var o=0;o<e;o++)r[n+o]=t[o]}}),_r}var ri;function Ku(){if(ri)return ze;ri=1;var i=de(),r=Zu(),t=Yu();function e(c,d,l){if(!i(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!c.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" source node does not exist in the given graph.');if(!c.hasNode(l))throw new Error('graphology-shortest-path: the "'+l+'" target node does not exist in the given graph.');if(d=""+d,l=""+l,d===l)return[d];var h=c.inboundNeighbors.bind(c),f=c.outboundNeighbors.bind(c),_={},x={};_[d]=null,x[l]=null;var C=[d],k=[l],w,A,m,p,R,g,b,y,E=!1;e:for(;C.length&&k.length;)if(C.length<=k.length){for(w=C,C=[],R=0,b=w.length;R<b;R++)for(A=w[R],m=f(A),g=0,y=m.length;g<y;g++)if(p=m[g],p in _||(C.push(p),_[p]=A),p in x){E=!0;break e}}else for(w=k,k=[],R=0,b=w.length;R<b;R++)for(A=w[R],m=h(A),g=0,y=m.length;g<y;g++)if(p=m[g],p in x||(k.push(p),x[p]=A),p in _){E=!0;break e}if(!E)return null;for(var S=[];p;)S.unshift(p),p=_[p];for(p=x[S[S.length-1]];p;)S.push(p),p=x[p];return S.length?S:null}function n(c,d){if(!i(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!c.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" source node does not exist in the given graph.');d=""+d;var l={},h={},f,_,x,C,k,w;for(l[d]=!0,h[d]=[d];Object.keys(l).length;){f=l,l={};for(x in f)for(_=c.outboundNeighbors(x),k=0,w=_.length;k<w;k++)C=_[k],h[C]||(h[C]=h[x].concat(C),l[C]=!0)}return h}function o(c,d,l){if(!i(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!d.hasNode(l))throw new Error('graphology-shortest-path: the "'+l+'" source node does not exist in the given graph.');l=""+l;var h=new Set,f={},_=0;f[l]=0;for(var x=[l],C,k,w;x.length!==0;){var A=[];for(C=0,k=x.length;C<k;C++)w=x[C],!h.has(w)&&(h.add(w),t(A,d[c](w)),f[w]=_);_++,x=A}return f}var a=o.bind(null,"outboundNeighbors"),s=o.bind(null,"neighbors");function u(c,d){d=""+d;var l=[],h={},f={},_=c.nodes(),x,C,k,w,A,m,p,R,g;for(m=0,R=_.length;m<R;m++)w=_[m],h[w]=[],f[w]=0;var b={};f[d]=1,b[d]=0;for(var y=r.of(d);y.size;)for(w=y.dequeue(),l.push(w),x=b[w],C=f[w],k=c.outboundNeighbors(w),p=0,g=k.length;p<g;p++)A=k[p],A in b||(y.enqueue(A),b[A]=x+1),b[A]===x+1&&(f[A]+=C,h[A].push(w));return[l,h,f]}return ze.bidirectional=e,ze.singleSource=n,ze.singleSourceLength=a,ze.undirectedSingleSourceLength=s,ze.brandes=u,ze}var wr,ni;function Ju(){if(ni)return wr;ni=1;var i=de(),r=Ku().singleSourceLength;return wr=function(e,n){if(!i(e))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(e.size===0)return 1/0;var o=-1/0,a=r(e,n),s,u,c=0;for(s in a)u=a[s],u>o&&(o=u),c++;return c<e.order?1/0:o},wr}var Er,ii;function Qu(){if(ii)return Er;ii=1;var i=de(),r=Ju();return Er=function(e){if(!i(e))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(e.size===0)return 1/0;var n=-1/0;return e.someNode(function(o){var a=r(e,o);return a>n&&(n=a),n===1/0}),n},Er}var xr,oi;function ec(){if(oi)return xr;oi=1;var i=de();return xr=function(t){if(!i(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var e=t.type;return e!=="mixed"?e:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},xr}var Tr,ai;function tc(){if(ai)return Tr;ai=1;var i=Ye(),r=de(),t=ec(),e=zt(),n={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function o(w,A){var m=new Array(w.order),p=new Float64Array(w.order),R={},g=0,b=e.createEdgeWeightGetter(A.getEdgeWeight).fromEntry,y=e.createNodeValueGetter(A.getNodeCommunity).fromEntry,E=0,S={};return w.forEachNode(function(L,v){S[L]=E,m[E++]=y(L,v)}),w.forEachUndirectedEdge(function(L,v,I,U,D,T,$){var M=b(L,v,I,U,D,T,$);g+=M,R[L]=M,p[S[I]]+=M,I!==U&&(p[S[U]]+=M)}),{weights:R,communities:m,weightedDegrees:p,M:g}}function a(w,A){var m=new Array(w.order),p=new Float64Array(w.order),R=new Float64Array(w.order),g={},b=0,y=e.createEdgeWeightGetter(A.getEdgeWeight).fromEntry,E=e.createNodeValueGetter(A.getNodeCommunity).fromEntry,S=0,L={};return w.forEachNode(function(v,I){L[v]=S,m[S++]=E(v,I)}),w.forEachDirectedEdge(function(v,I,U,D,T,$,M){var X=y(v,I,U,D,T,$,M);b+=X,g[v]=X,R[L[U]]+=X,p[L[D]]+=X}),{weights:g,communities:m,weightedInDegrees:p,weightedOutDegrees:R,M:b}}function s(w,A){var m=A.resolution,p=o(w,A),R=p.communities,g=p.weightedDegrees,b=p.M,y=w.nodes(),E,S,L,v,I,U,D=0,T=b*2;for(E=0,L=w.order;E<L;E++)for(S=0;S<L;S++)R[E]===R[S]&&(U=w.undirectedEdge(y[E],y[S]),v=p.weights[U]||0,I=g[E]*g[S],E===S&&typeof U<"u"?D+=(v-I/T*m)*2:D+=v-I/T*m);return D/T}function u(w,A){var m=A.resolution,p=a(w,A),R=p.communities,g=p.weightedInDegrees,b=p.weightedOutDegrees,y=p.M,E=w.nodes(),S,L,v,I,U,D,T=0;for(S=0,v=w.order;S<v;S++)for(L=0;L<v;L++)R[S]===R[L]&&(D=w.directedEdge(E[S],E[L]),I=p.weights[D]||0,U=g[S]*b[L],T+=I-U/y*m);return T/y}function c(w,A){var m={},p={},R={},g=e.createNodeValueGetter(A.getNodeCommunity).fromEntry;return w.forEachNode(function(b,y){var E=g(b,y);if(m[b]=E,typeof E>"u")throw new Error('graphology-metrics/modularity: the "'+b+'" node is not in the partition.');p[E]=0,R[E]=0}),{communities:m,totalWeights:p,internalWeights:R}}function d(w,A){var m={},p={},R={},g={},b=e.createNodeValueGetter(A.getNodeCommunity).fromEntry;return w.forEachNode(function(y,E){var S=b(y,E);if(m[y]=S,typeof S>"u")throw new Error('graphology-metrics/modularity: the "'+y+'" node is not in the partition.');p[S]=0,R[S]=0,g[S]=0}),{communities:m,totalInWeights:p,totalOutWeights:R,internalWeights:g}}function l(w,A){var m=A.resolution,p=c(w,A),R=0,g=p.totalWeights,b=p.internalWeights,y=p.communities,E=e.createEdgeWeightGetter(A.getEdgeWeight).fromEntry;w.forEachUndirectedEdge(function(I,U,D,T,$,M,X){var q=E(I,U,D,T,$,M,X);R+=q;var V=y[D],P=y[T];g[V]+=q,g[P]+=q,V===P&&(b[V]+=q*2)});var S=0,L=R*2;for(var v in b)S+=b[v]/L-Math.pow(g[v]/L,2)*m;return S}function h(w,A){var m=A.resolution,p=d(w,A),R=0,g=p.totalInWeights,b=p.totalOutWeights,y=p.internalWeights,E=p.communities,S=e.createEdgeWeightGetter(A.getEdgeWeight).fromEntry;w.forEachDirectedEdge(function(I,U,D,T,$,M,X){var q=S(I,U,D,T,$,M,X);R+=q;var V=E[D],P=E[T];b[V]+=q,g[P]+=q,V===P&&(y[V]+=q)});var L=0;for(var v in y)L+=y[v]/R-g[v]*b[v]/Math.pow(R,2)*m;return L}function f(w,A,m,p){return p/(2*w)-A*m/(2*(w*w))}function _(w,A,m,p,R,g){return g/w-(R*A+p*m)/(w*w)}function x(w,A){if(!r(w))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(w.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(w.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var m=t(w);if(m==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return A=i(A,n),m==="directed"?u(w,A):s(w,A)}function C(w,A){if(!r(w))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(w.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(w.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var m=t(w);if(m==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return A=i(A,n),m==="directed"?h(w,A):l(w,A)}var k=C;return k.sparse=C,k.dense=x,k.undirectedDelta=f,k.directedDelta=_,Tr=k,Tr}var Ar,si;function rc(){if(si)return Ar;si=1;var i=de(),r=zt().createEdgeWeightGetter,t="weight";return Ar=function(n,o){if(!i(n))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");o=r(o||t).fromEntry;var a=0;return n.forEachEdge(function(s,u,c,d,l,h,f){a+=o(s,u,c,d,l,h,f)}),a},Ar}var ui;function nc(){if(ui)return se;ui=1;var i=Vu(),r=Xu();return se.diameter=Qu(),se.modularity=tc(),se.simpleSize=eo(),se.weightedSize=rc(),se.abstractDensity=i.abstractDensity,se.density=i.density,se.directedDensity=i.directedDensity,se.undirectedDensity=i.undirectedDensity,se.mixedDensity=i.mixedDensity,se.multiDirectedDensity=i.multiDirectedDensity,se.multiUndirectedDensity=i.multiUndirectedDensity,se.multiMixedDensity=i.multiMixedDensity,se.nodeExtent=r.nodeExtent,se.edgeExtent=r.edgeExtent,se}var ic=nc();window.res=We;const to="#b186f7",ci=Hu("sigma"),oc={order:5e3,size:1e3,clusters:3,edgesRenderer:"edges-default"};function ro(i){const r={...oc,order:Math.floor(Math.random()*4e3)+1e3,size:Math.floor(Math.random()*4e3)+1e3,clusters:1,edgesRenderer:Wi},t=Au(J,{...r,rng:ci});Pt.circular.assign(t,{center:Math.random()}),Nn.assign(t,{iterations:50,settings:{...Nn.inferSettings(t),gravity:10,strongGravityMode:!0}});const e={};for(let o=0;o<+ne.clusters;o++)e[o]="#"+Math.floor(ci()*16777215).toString(16);let n=0;return t.forEachNode((o,{cluster:a})=>{t.mergeNodeAttributes(o,{label:`Node n°${++n}, in cluster n°${a}`,color:e[a+""],_id:crypto.randomUUID(),size:4})}),t}window.generateGraph=ro;const ee=new J({multi:!0});window.graph=ee;We.graph.nodes.forEach((i,r)=>{ee.addNode(i._id,{...i.source,_cc:i._cc,label:i.source.name,size:r==0?20:10,degree:r==0?0:1,color:r==0?"#0000b7":"#9960f7"})});Object.entries(We.graph.connections).forEach(([i,r])=>{const t=We.graph.nodes[i];r.forEach(([e,n])=>{const o=We.graph.nodes[e],a=We.graph.edges[n];a.size=2,a.label=a.source.sub_context_label;try{ee.addDirectedEdge(t._id,o._id,a)}catch(s){console.log(s),console.log(i,[e,n])}})});Pt.circular(ee,{dimensions:[1e3,1e3]});Pt.random.assign(ee);iu(ee,{maxIterations:50});Pt.circlepack.assign(ee,{hierarchyAttributes:["degree"]});const oe=new $s(ee,document.getElementById("app"),{defaultDrawNodeLabel:ac,labelWeight:500,labelSize:15,labelRenderedSizeThreshold:10,defaultDrawNodeHover:uc,labelFont:"Ubuntu, sans-serif",renderEdgeLabels:!0,edgeLabelSize:10,defaultEdgeType:"arrow",edgeLabelSizePowRatio:.6,edgeProgramClasses:{curved:wu}});window.renderer=oe;function ac(i,r,t){if(!r.label)return;const e=t.labelSize,n=t.labelFont,o=t.labelWeight;i.font=`${o} ${e}px ${n}`;const a=i.measureText(r.label).width+8;i.fillStyle="#ffffffcc",i.fillRect(r.x+r.size,r.y+e/3-15,a,20),i.fillStyle=to,i.fillText(r.label,r.x+r.size+3,r.y+e/3)}function sc(i,r,t,e,n,o){i.beginPath(),i.moveTo(r+o,t),i.lineTo(r+e-o,t),i.quadraticCurveTo(r+e,t,r+e,t+o),i.lineTo(r+e,t+n-o),i.quadraticCurveTo(r+e,t+n,r+e-o,t+n),i.lineTo(r+o,t+n),i.quadraticCurveTo(r,t+n,r,t+n-o),i.lineTo(r,t+o),i.quadraticCurveTo(r,t,r+o,t),i.closePath()}function uc(i,r,t){const e=t.labelSize,n=t.labelFont,o=t.labelWeight,a=r.label;i.beginPath(),i.fillStyle="#fff",i.shadowOffsetX=0,i.shadowOffsetY=2,i.shadowBlur=8,i.shadowColor="#dcdcdc",i.font=`${o} ${e}px ${n}`;const u=i.measureText(a).width,c=Math.round(r.x),d=Math.round(r.y),l=Math.round(u+e/2+r.size+3),h=Math.round(e/2+4);sc(i,c,d-12,l,h+12,5),i.closePath(),i.fill(),i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.fillStyle=to,i.font=`${o} ${e}px ${n}`,i.fillText(a,r.x+r.size+3,r.y+e/3),i.fillStyle=r.color}let Ge=null,Ur=!1;oe.on("downNode",i=>{Ur=!0,Ge=i.node,ee.setNodeAttribute(Ge,"highlighted",!0),oe.getCustomBBox()||oe.setCustomBBox(oe.getBBox())});oe.on("moveBody",({event:i})=>{if(!Ur||!Ge)return;const r=oe.viewportToGraph(i);ee.setNodeAttribute(Ge,"x",r.x),ee.setNodeAttribute(Ge,"y",r.y),i.preventSigmaDefault(),i.original.preventDefault(),i.original.stopPropagation()});const no=()=>{Ge&&ee.removeNodeAttribute(Ge,"highlighted"),Ur=!1,Ge=null};oe.on("upNode",no);oe.on("upStage",no);const ne={searchQuery:""};function io(i){i&&(ne.hoveredNode=i,ne.hoveredNeighbors=new Set(ee.neighbors(i))),i||(ne.hoveredNode=void 0,ne.hoveredNeighbors=void 0),oe.refresh({skipIndexation:!0})}oe.on("enterNode",({node:i})=>{io(i)});oe.on("leaveNode",()=>{io(void 0)});oe.setSetting("nodeReducer",(i,r)=>{const t={...r};return ne.hoveredNeighbors&&!ne.hoveredNeighbors.has(i)&&ne.hoveredNode!==i&&(t.label="",t.color="#f6f6f6"),ne.selectedNode===i?t.highlighted=!0:ne.suggestions&&(ne.suggestions.has(i)?t.forceLabel=!0:(t.label="",t.color="#f6f6f6")),t});oe.setSetting("edgeReducer",(i,r)=>{const t={...r};return ne.hoveredNode&&!ee.extremities(i).every(e=>e===ne.hoveredNode||ee.areNeighbors(e,ne.hoveredNode))&&(t.hidden=!0),ne.suggestions&&(!ne.suggestions.has(ee.source(i))||!ne.suggestions.has(ee.target(i)))&&(t.hidden=!0),t});oe.on("doubleClickNode",({event:i,node:r})=>{console.log(i),i.preventSigmaDefault();const t=oe.viewportToGraph({x:i.x,y:i.y}),e=ro(),n=oe.getBBox(),o=cc(n,t);console.log("closest edge -> ",o),console.log(n),dc(e,o,n);const a=Array.from(e.nodeEntries()),s=a[0].attributes;console.log(a);const u=a.map(d=>d.attributes);console.log(u);const c=s._id;u.forEach(d=>ee.addNode(d._id,d)),u.slice(1).forEach(d=>ee.addEdge(u[0]._id,d._id)),ee.addEdge(c,r)});function cc(i,r){const t=Math.round(Math.abs(r.x-i.x[0])),e=Math.round(Math.abs(i.x[1]-r.x)),n=Math.round(Math.abs(r.y-i.y[0])),o=Math.round(Math.abs(i.y[1]-r.y)),a={[t]:"LEFT",[e]:"RIGHT",[n]:"BOTTOM",[o]:"TOP"},s=Math.min(t,e,n,o);return{direction:a[s],distance:s}}function dc(i,r,t){const e=ic.nodeExtent(i,["x","y"]);console.log(e,"xyextent");const n=Array.from(i.nodeEntries());if(r.direction=="LEFT"){const o=Math.floor(Math.random()*150),a=Math.random()>.5?-1:1;n.forEach(({attributes:s})=>{const u=t.x[0]-e.x[1];s.x=s.x+u-3,s.y=s.y+o*a})}else if(r.direction=="RIGHT"){const o=Math.floor(Math.random()*150),a=Math.random()>.5?-1:1;n.forEach(({attributes:s})=>{const u=t.x[1]-e.x[0];s.x=s.x+u+3,s.y=s.y+o*a})}else if(r.direction=="TOP"){const o=Math.floor(Math.random()*150),a=Math.random()>.5?-1:1;n.forEach(({attributes:s})=>{const u=t.y[1]-e.y[0];s.y=s.y+u+3,s.x=s.x+o*a})}else if(r.direction=="BOTTOM"){const o=Math.floor(Math.random()*150),a=Math.random()>.5?-1:1;n.forEach(({attributes:s})=>{const u=e.y[1]-t.y[0];s.y=s.y-u-3,s.x=s.x+o*a})}}
